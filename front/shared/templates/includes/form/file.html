{% load shared_tags %}

<div class="file has-name is-fullwidth" id="{{ field.id_for_label }}-wrapper">
    <label for="{{ field.id_for_label }}" class="file-label {% if field.field.required %}required{% endif %}">
                    <span class="file-cta">
                        <span class="file-icon">
                            <span class="iconify" data-icon="mdi:upload"></span>
                        </span>
                        <span class="file-label">Select a file...</span>
                    </span>
        <span class="file-name">No file selected</span>
        {{ field|add_class:"file-input" }}
    </label>
</div>
{% if field.help_text %}
    <div class="help pb-2" style="margin-top: -0.6em;">{{ field.help_text }}</div>
{% endif %}

<script>
    const fileInput = document.querySelector("#{{ field.id_for_label|escapejs }}-wrapper input[type=file]");
    fileInput.onchange = () => {
        if (fileInput.files.length > 0) {
            const fileName = document.querySelector("#{{ field.id_for_label|escapejs }}-wrapper .file-name");
            fileName.textContent = fileInput.files[0].name;
        }
    };
</script>
