{% load shared_tags %}

{% include "includes/form/base.html" %}

{% include "includes/form/field_group.html" with included_fields="name,notify_email" %}

<div class="box has-background-light mt-5">
    <h3 class="title">Dataset</h3>
    {% include "includes/form/field_group.html" with included_fields=dataset_fields %}
</div>

{% include "includes/form/field_group.html" with excluded_fields=excluded_fields|add_to_list:dataset_fields|add_to_list:"name,notify_email" %}

{% block extra_js %}
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const formatSelect = document.getElementById("id_format");
        const formatFields = document.querySelectorAll(".format-field");

        function toggleFormatField() {
            const selectedFormat = formatSelect.value;
            formatFields.forEach(div => {
                div.style.display = div.classList.contains(`format-${selectedFormat}`) ? "block" : "none";
            });
        }

        if (formatSelect) {
            formatSelect.addEventListener("change", toggleFormatField);
            toggleFormatField();
        }
     });
    </script>
{% endblock %}
