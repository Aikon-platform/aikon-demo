(function(e){typeof define==`function`&&define.amd?define([],e):e()})(function(){var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),l=Array.isArray,u=Array.prototype.indexOf,d=Array.from;Object.keys;var f=Object.defineProperty,p=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,h=Object.prototype,g=Array.prototype,_=Object.getPrototypeOf,v=Object.isExtensible;function y(e){return typeof e==`function`}let b=()=>{};function x(e){for(var t=0;t<e.length;t++)e[t]()}function S(){var e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}function C(e,t){if(Array.isArray(e))return e;if(t===void 0||!(Symbol.iterator in e))return Array.from(e);let n=[];for(let r of e)if(n.push(r),n.length===t)break;return n}let w=Symbol(`$state`),ee=Symbol(`legacy props`),te=Symbol(``),ne=new class extends Error{name=`StaleReactionError`;message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function re(e){throw Error(`https://svelte.dev/e/lifecycle_outside_component`)}function ie(){throw Error(`https://svelte.dev/e/async_derived_orphan`)}function ae(e){throw Error(`https://svelte.dev/e/effect_in_teardown`)}function oe(){throw Error(`https://svelte.dev/e/effect_in_unowned_derived`)}function se(e){throw Error(`https://svelte.dev/e/effect_orphan`)}function ce(){throw Error(`https://svelte.dev/e/effect_update_depth_exceeded`)}function le(e){throw Error(`https://svelte.dev/e/props_invalid_value`)}function ue(){throw Error(`https://svelte.dev/e/state_descriptors_fixed`)}function de(){throw Error(`https://svelte.dev/e/state_prototype_fixed`)}function fe(){throw Error(`https://svelte.dev/e/state_unsafe_mutation`)}function pe(){throw Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`)}let me={},he=Symbol();function ge(e){console.warn(`https://svelte.dev/e/hydration_mismatch`)}function _e(){console.warn(`https://svelte.dev/e/select_multiple_invalid_value`)}function ve(){console.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`)}let T=!1;function ye(e){T=e}let E;function be(e){if(e===null)throw ge(),me;return E=e}function xe(){return be(Ut(E))}function D(e){if(T){if(Ut(E)!==null)throw ge(),me;E=e}}function Se(e=1){if(T){for(var t=e,n=E;t--;)n=Ut(n);E=n}}function Ce(e=!0){for(var t=0,n=E;;){if(n.nodeType===8){var r=n.data;if(r===`]`){if(t===0)return n;--t}else (r===`[`||r===`[!`)&&(t+=1)}var i=Ut(n);e&&n.remove(),n=i}}function we(e){if(!e||e.nodeType!==8)throw ge(),me;return e.data}function Te(e){return e===this.v}function Ee(e,t){return e==e?e!==t||typeof e==`object`&&!!e||typeof e==`function`:t==t}function De(e,t){return e!==t}function Oe(e){return!Ee(e,this.v)}let ke=null;function Ae(e){ke=e}function je(e){return Ie(`getContext`).get(e)}function Me(e,t){return Ie(`setContext`).set(e,t),t}function Ne(e){return Ie(`hasContext`).has(e)}function Pe(){return Ie(`getAllContexts`)}function O(e,t=!1,n){ke={p:ke,c:null,e:null,s:e,x:null,l:null}}function k(e){var t=ke,n=t.e;if(n!==null){t.e=null;for(var r of n)nn(r)}return e!==void 0&&(t.x=e),ke=t.p,e??{}}function Fe(){return!0}function Ie(e){return ke===null&&re(e),ke.c??=new Map(Le(ke)||void 0)}function Le(e){let t=e.p;for(;t!==null;){let e=t.c;if(e!==null)return e;t=t.p}return null}var Re=typeof requestIdleCallback>`u`?e=>setTimeout(e,1):requestIdleCallback,ze=[],Be=[];function Ve(){var e=ze;ze=[],x(e)}function He(){var e=Be;Be=[],x(e)}function Ue(){return ze.length>0||Be.length>0}function We(e){if(ze.length===0&&!it){var t=ze;queueMicrotask(()=>{t===ze&&Ve()})}ze.push(e)}function Ge(e){Be.length===0&&Re(He),Be.push(e)}function Ke(){ze.length>0&&Ve(),Be.length>0&&He()}var qe=new WeakMap;function Je(e){var t=V;if(t===null)return B.f|=8388608,e;if(t.f&32768)Ye(e,t);else{if(!(t.f&128))throw!t.parent&&e instanceof Error&&Xe(e),e;t.b.error(e)}}function Ye(e,t){for(;t!==null;){if(t.f&128)try{t.b.error(e);return}catch(t){e=t}t=t.parent}throw e instanceof Error&&Xe(e),e}function Xe(e){let t=qe.get(e);t&&(f(e,`message`,{value:t.message}),f(e,`stack`,{value:t.stack}))}var Ze=new Set;let A=null,Qe=null,$e=null,et=new Set;var tt=[],nt=null,rt=!1;let it=!1;var at=class e{current=new Map;#previous=new Map;#callbacks=new Set;#pending=0;#deferred=null;#neutered=!1;#async_effects=[];#boundary_async_effects=[];#render_effects=[];#effects=[];#block_effects=[];#dirty_effects=[];#maybe_dirty_effects=[];skipped_effects=new Set;process(e){tt=[],Qe=null;var t=null;for(let t of e)this.#traverse_effect_tree(t);if(this.#async_effects.length===0&&this.#pending===0){this.#commit();var n=this.#render_effects,r=this.#effects;this.#render_effects=[],this.#effects=[],this.#block_effects=[],Qe=A,A=null,ut(n),ut(r),A===null?A=this:Ze.delete(this),this.#deferred?.resolve()}else this.#defer_effects(this.#render_effects),this.#defer_effects(this.#effects),this.#defer_effects(this.#block_effects);if(t){for(let[e,{v:n,wv:r}]of t)e.wv<=r&&(e.v=n);$e=null}for(let e of this.#async_effects)qn(e);for(let e of this.#boundary_async_effects)qn(e);this.#async_effects=[],this.#boundary_async_effects=[]}#traverse_effect_tree(e){e.f^=1024;for(var t=e.first;t!==null;){var n=t.f,r=(n&96)!=0;if(!(r&&n&1024||n&8192||this.skipped_effects.has(t))&&t.fn!==null){r?t.f^=1024:n&4?this.#effects.push(t):n&1024||(n&4194304?(t.b?.is_pending()?this.#boundary_async_effects:this.#async_effects).push(t):Hn(t)&&(t.f&16&&this.#block_effects.push(t),qn(t)));var i=t.first;if(i!==null){t=i;continue}}var a=t.parent;for(t=t.next;t===null&&a!==null;)t=a.next,a=a.parent}}#defer_effects(e){for(let t of e)(t.f&2048?this.#dirty_effects:this.#maybe_dirty_effects).push(t),Qn(t,1024);e.length=0}capture(e,t){this.#previous.has(e)||this.#previous.set(e,t),this.current.set(e,e.v)}activate(){A=this}deactivate(){A=null,Qe=null;for(let e of et)if(et.delete(e),e(),A!==null)break}neuter(){this.#neutered=!0}flush(){tt.length>0?st():this.#commit(),A===this&&(this.#pending===0&&Ze.delete(this),this.deactivate())}#commit(){if(!this.#neutered)for(let e of this.#callbacks)e();this.#callbacks.clear()}increment(){this.#pending+=1}decrement(){if(--this.#pending,this.#pending===0){for(let e of this.#dirty_effects)Qn(e,2048),dt(e);for(let e of this.#maybe_dirty_effects)Qn(e,4096),dt(e);this.#render_effects=[],this.#effects=[],this.flush()}else this.deactivate()}add_callback(e){this.#callbacks.add(e)}settled(){return(this.#deferred??=S()).promise}static ensure(){if(A===null){let t=A=new e;Ze.add(A),it||e.enqueue(()=>{A===t&&t.flush()})}return A}static enqueue(e){We(e)}};function ot(e){var t=it;it=!0;try{var n;for(e&&(st(),n=e());;){if(Ke(),tt.length===0&&!Ue()&&(A?.flush(),tt.length===0))return nt=null,n;st()}}finally{it=t}}function st(){var e=Cn;rt=!0;try{var t=0;for(wn(!0);tt.length>0;){var n=at.ensure();t++>1e3&&ct(),n.process(tt),Dt.clear()}}finally{rt=!1,wn(e),nt=null}}function ct(){try{ce()}catch(e){Ye(e,nt)}}let lt=null;function ut(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&24576)&&Hn(r)&&(lt=[],qn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?_n(r):r.fn=null),lt?.length>0)){Dt.clear();for(let e of lt)qn(e);lt=[]}}lt=null}}function dt(e){for(var t=nt=e;t.parent!==null;){t=t.parent;var n=t.f;if(rt&&t===V&&n&16)return;if(n&96){if(!(n&1024))return;t.f^=1024}}tt.push(t)}function ft(e){let t=0,n=Ot(0),r;return()=>{en()&&(H(n),ln(()=>(t===0&&(r=Xn(()=>e(()=>Mt(n)))),t+=1,()=>{We(()=>{--t,t===0&&(r?.(),r=void 0,Mt(n))})})))}}var pt=589952;function mt(e,t,n){new ht(e,t,n)}var ht=class{parent;#pending=!1;#anchor;#hydrate_open=T?E:null;#props;#children;#effect;#main_effect=null;#pending_effect=null;#failed_effect=null;#offscreen_fragment=null;#local_pending_count=0;#pending_count=0;#is_creating_fallback=!1;#effect_pending=null;#effect_pending_update=()=>{this.#effect_pending&&At(this.#effect_pending,this.#local_pending_count)};#effect_pending_subscriber=ft(()=>(this.#effect_pending=Ot(this.#local_pending_count),()=>{this.#effect_pending=null}));constructor(e,t,n){this.#anchor=e,this.#props=t,this.#children=n,this.parent=V.b,this.#pending=!!this.#props.pending,this.#effect=un(()=>{if(V.b=this,T){let e=this.#hydrate_open;xe(),e.nodeType===8&&e.data===`[!`?this.#hydrate_pending_content():this.#hydrate_resolved_content()}else{try{this.#main_effect=dn(()=>n(this.#anchor))}catch(e){this.error(e)}this.#pending_count>0?this.#show_pending_snippet():this.#pending=!1}},pt),T&&(this.#anchor=E)}#hydrate_resolved_content(){try{this.#main_effect=dn(()=>this.#children(this.#anchor))}catch(e){this.error(e)}this.#pending=!1}#hydrate_pending_content(){let e=this.#props.pending;e&&(this.#pending_effect=dn(()=>e(this.#anchor)),at.enqueue(()=>{this.#main_effect=this.#run(()=>(at.ensure(),dn(()=>this.#children(this.#anchor)))),this.#pending_count>0?this.#show_pending_snippet():(vn(this.#pending_effect,()=>{this.#pending_effect=null}),this.#pending=!1)}))}is_pending(){return this.#pending||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#props.pending}#run(e){var t=V,n=B,r=ke;kn(this.#effect),On(this.#effect),Ae(this.#effect.ctx);try{return e()}catch(e){return Je(e),null}finally{kn(t),On(n),Ae(r)}}#show_pending_snippet(){let e=this.#props.pending;this.#main_effect!==null&&(this.#offscreen_fragment=document.createDocumentFragment(),gt(this.#main_effect,this.#offscreen_fragment)),this.#pending_effect===null&&(this.#pending_effect=dn(()=>e(this.#anchor)))}#update_pending_count(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#update_pending_count(e);return}this.#pending_count+=e,this.#pending_count===0&&(this.#pending=!1,this.#pending_effect&&vn(this.#pending_effect,()=>{this.#pending_effect=null}),this.#offscreen_fragment&&=(this.#anchor.before(this.#offscreen_fragment),null))}update_pending_count(e){this.#update_pending_count(e),this.#local_pending_count+=e,et.add(this.#effect_pending_update)}get_effect_pending(){return this.#effect_pending_subscriber(),H(this.#effect_pending)}error(e){var t=this.#props.onerror;let n=this.#props.failed;if(this.#is_creating_fallback||!t&&!n)throw e;this.#main_effect&&=(hn(this.#main_effect),null),this.#pending_effect&&=(hn(this.#pending_effect),null),this.#failed_effect&&=(hn(this.#failed_effect),null),T&&(be(this.#hydrate_open),Se(),be(Ce()));var r=!1,i=!1;let a=()=>{if(r){ve();return}r=!0,i&&pe(),at.ensure(),this.#local_pending_count=0,this.#failed_effect!==null&&vn(this.#failed_effect,()=>{this.#failed_effect=null}),this.#pending=this.has_pending_snippet(),this.#main_effect=this.#run(()=>(this.#is_creating_fallback=!1,dn(()=>this.#children(this.#anchor)))),this.#pending_count>0?this.#show_pending_snippet():this.#pending=!1};var o=B;try{On(null),i=!0,t?.(e,a),i=!1}catch(e){Ye(e,this.#effect&&this.#effect.parent)}finally{On(o)}n&&We(()=>{this.#failed_effect=this.#run(()=>{this.#is_creating_fallback=!0;try{return dn(()=>{n(this.#anchor,()=>e,()=>a)})}catch(e){return Ye(e,this.#effect.parent),null}finally{this.#is_creating_fallback=!1}})})}};function gt(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:Ut(n);t.append(n),n=i}}function _t(e,t,n){let r=Fe()?bt:St;if(t.length===0){n(e.map(r));return}var i=A,a=V,o=vt(),s=T;Promise.all(t.map(e=>xt(e))).then(t=>{i?.activate(),o();try{n([...e.map(r),...t])}catch(e){a.f&16384||Ye(e,a)}s&&ye(!1),i?.deactivate(),yt()}).catch(e=>{Ye(e,a)})}function vt(){var e=V,t=B,n=ke,r=A,i=T;if(i)var a=E;return function(){kn(e),On(t),Ae(n),r?.activate(),i&&(ye(!0),be(a))}}function yt(){kn(null),On(null),Ae(null)}function bt(e){var t=2050,n=B!==null&&B.f&2?B:null;return V===null||n!==null&&n.f&256?t|=256:V.f|=524288,{ctx:ke,deps:null,effects:null,equals:Te,f:t,fn:e,reactions:null,rv:0,v:he,wv:0,parent:n??V,ac:null}}function xt(e,t){let n=V;n===null&&ie();var r=n.b,i=void 0,a=Ot(he),o=null,s=!B;return cn(()=>{try{var t=e();o&&Promise.resolve(t).catch(()=>{})}catch(e){t=Promise.reject(e)}var n=()=>t;i=o?.then(n,n)??Promise.resolve(t),o=i;var c=A,l=r.is_pending();s&&(r.update_pending_count(1),l||c.increment());let u=(e,t=void 0)=>{o=null,l||c.activate(),t?t!==ne&&(a.f|=8388608,At(a,t)):(a.f&8388608&&(a.f^=8388608),At(a,e)),s&&(r.update_pending_count(-1),l||c.decrement()),yt()};if(i.then(u,e=>u(null,e||`unknown`)),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(e=>{function t(n){function r(){n===i?e(a):t(i)}n.then(r,r)}t(i)})}function j(e){let t=bt(e);return jn(t),t}function St(e){let t=bt(e);return t.equals=Oe,t}function Ct(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)hn(t[n])}}function wt(e){for(var t=e.parent;t!==null;){if(!(t.f&2))return t;t=t.parent}return null}function Tt(e){var t,n=V;kn(wt(e));try{Ct(e),t=Wn(e)}finally{kn(n)}return t}function Et(e){var t=Tt(e);if(e.equals(t)||(e.v=t,e.wv=Vn()),!Tn)if($e!==null)$e.set(e,e.v);else{var n=(Bn||e.f&256)&&e.deps!==null?4096:1024;Qn(e,n)}}let Dt=new Map;function Ot(e,t){return{f:0,v:e,reactions:null,equals:Te,rv:0,wv:0}}function M(e,t){let n=Ot(e,t);return jn(n),n}function kt(e,t=!1,n=!0){let r=Ot(e);return t||(r.equals=Oe),r}function N(e,t,n=!1){B!==null&&(!Dn||B.f&131072)&&Fe()&&B.f&4325394&&!An?.includes(e)&&fe();let r=n?P(t):t;return At(e,r)}function At(e,t){if(!e.equals(t)){var n=e.v;Tn?Dt.set(e,t):Dt.set(e,n),e.v=t,at.ensure().capture(e,n),e.f&2&&(e.f&2048&&Tt(e),Qn(e,e.f&256?4096:1024)),e.wv=Vn(),Nt(e,2048),Fe()&&V!==null&&V.f&1024&&!(V.f&96)&&(Pn===null?Fn([e]):Pn.push(e))}return t}function jt(e,t=1){var n=H(e),r=t===1?n++:n--;return N(e,n),r}function Mt(e){N(e,e.v+1)}function Nt(e,t){var n=e.reactions;if(n!==null)for(var r=Fe(),i=n.length,a=0;a<i;a++){var o=n[a],s=o.f;if(!(!r&&o===V)){var c=(s&2048)==0;c&&Qn(o,t),s&2?Nt(o,4096):c&&(s&16&&lt!==null&&lt.push(o),dt(o))}}}function P(e){if(typeof e!=`object`||!e||w in e)return e;let t=_(e);if(t!==h&&t!==g)return e;var n=new Map,r=l(e),i=M(0),a=null,o=Rn,s=e=>{if(Rn===o)return e();var t=B,n=Rn;On(null),zn(o);var r=e();return On(t),zn(n),r};return r&&n.set(`length`,M(e.length,a)),new Proxy(e,{defineProperty(e,t,r){(!(`value`in r)||r.configurable===!1||r.enumerable===!1||r.writable===!1)&&ue();var i=n.get(t);return i===void 0?i=s(()=>{var e=M(r.value,a);return n.set(t,e),e}):N(i,r.value,!0),!0},deleteProperty(e,t){var r=n.get(t);if(r===void 0){if(t in e){let e=s(()=>M(he,a));n.set(t,e),Mt(i)}}else N(r,he),Mt(i);return!0},get(t,r,i){if(r===w)return e;var o=n.get(r),c=r in t;if(o===void 0&&(!c||p(t,r)?.writable)&&(o=s(()=>{var e=P(c?t[r]:he);return M(e,a)}),n.set(r,o)),o!==void 0){var l=H(o);return l===he?void 0:l}return Reflect.get(t,r,i)},getOwnPropertyDescriptor(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);if(r&&`value`in r){var i=n.get(t);i&&(r.value=H(i))}else if(r===void 0){var a=n.get(t),o=a?.v;if(a!==void 0&&o!==he)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return r},has(e,t){if(t===w)return!0;var r=n.get(t),i=r!==void 0&&r.v!==he||Reflect.has(e,t);return(r!==void 0||V!==null&&(!i||p(e,t)?.writable))&&(r===void 0&&(r=s(()=>{var n=i?P(e[t]):he;return M(n,a)}),n.set(t,r)),H(r)===he)?!1:i},set(e,t,o,c){var l=n.get(t),u=t in e;if(r&&t===`length`)for(var d=o;d<l.v;d+=1){var f=n.get(d+``);f===void 0?d in e&&(f=s(()=>M(he,a)),n.set(d+``,f)):N(f,he)}if(l===void 0)(!u||p(e,t)?.writable)&&(l=s(()=>M(void 0,a)),N(l,P(o)),n.set(t,l));else{u=l.v!==he;var m=s(()=>P(o));N(l,m)}var h=Reflect.getOwnPropertyDescriptor(e,t);if(h?.set&&h.set.call(c,o),!u){if(r&&typeof t==`string`){var g=n.get(`length`),_=Number(t);Number.isInteger(_)&&_>=g.v&&N(g,_+1)}Mt(i)}return!0},ownKeys(e){H(i);var t=Reflect.ownKeys(e).filter(e=>{var t=n.get(e);return t===void 0||t.v!==he});for(var[r,a]of n)a.v!==he&&!(r in e)&&t.push(r);return t},setPrototypeOf(){de()}})}function Pt(e){try{if(typeof e==`object`&&e&&w in e)return e[w]}catch{}return e}function Ft(e,t){return Object.is(Pt(e),Pt(t))}var It,Lt,Rt,zt;function Bt(){if(It===void 0){It=window,document,Lt=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Rt=p(t,`firstChild`).get,zt=p(t,`nextSibling`).get,v(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),v(n)&&(n.__t=void 0)}}function Vt(e=``){return document.createTextNode(e)}function Ht(e){return Rt.call(e)}function Ut(e){return zt.call(e)}function F(e,t){if(!T)return Ht(e);var n=Ht(E);if(n===null)n=E.appendChild(Vt());else if(t&&n.nodeType!==3){var r=Vt();return n?.before(r),be(r),r}return be(n),n}function I(e,t=!1){if(!T){var n=Ht(e);return n instanceof Comment&&n.data===``?Ut(n):n}if(t&&E?.nodeType!==3){var r=Vt();return E?.before(r),be(r),r}return E}function L(e,t=1,n=!1){let r=T?E:e;for(var i;t--;)i=r,r=Ut(r);if(!T)return r;if(n&&r?.nodeType!==3){var a=Vt();return r===null?i?.after(a):r.before(a),be(a),a}return be(r),r}function Wt(e){e.textContent=``}function Gt(){return!1}function Kt(e,t){if(t){let t=document.body;e.autofocus=!0,We(()=>{document.activeElement===t&&e.focus()})}}var qt=!1;function Jt(){qt||(qt=!0,document.addEventListener(`reset`,e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(let t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Yt(e){var t=B,n=V;On(null),kn(null);try{return e()}finally{On(t),kn(n)}}function Xt(e,t,n,r=n){e.addEventListener(t,()=>Yt(n));let i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Jt()}function Zt(e){V===null&&B===null&&se(e),B!==null&&B.f&256&&V===null&&oe(),Tn&&ae(e)}function Qt(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function $t(e,t,n,r=!0){var i=V;i!==null&&i.f&8192&&(e|=8192);var a={ctx:ke,deps:null,nodes_start:null,nodes_end:null,f:e|2048,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{qn(a),a.f|=32768}catch(e){throw hn(a),e}else t!==null&&dt(a);if(r){var o=a;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&!(o.f&524288)&&(o=o.first),o!==null&&(o.parent=i,i!==null&&Qt(o,i),B!==null&&B.f&2&&!(e&64))){var s=B;(s.effects??=[]).push(o)}}return a}function en(){return B!==null&&!Dn}function tn(e){let t=$t(8,null,!1);return Qn(t,1024),t.teardown=e,t}function R(e){Zt(`$effect`);var t=V.f;if(!B&&t&32&&!(t&32768)){var n=ke;(n.e??=[]).push(e)}else return nn(e)}function nn(e){return $t(1048580,e,!1)}function rn(e){return Zt(`$effect.pre`),$t(1048584,e,!0)}function an(e){at.ensure();let t=$t(524352,e,!0);return()=>{hn(t)}}function on(e){at.ensure();let t=$t(524352,e,!0);return(e={})=>new Promise(n=>{e.outro?vn(t,()=>{hn(t),n(void 0)}):(hn(t),n(void 0))})}function sn(e){return $t(4,e,!1)}function cn(e){return $t(4718592,e,!0)}function ln(e,t=0){return $t(8|t,e,!0)}function z(e,t=[],n=[]){_t(t,n,t=>{$t(8,()=>e(...t.map(H)),!0)})}function un(e,t=0){return $t(16|t,e,!0)}function dn(e,t=!0){return $t(524320,e,!0,t)}function fn(e){var t=e.teardown;if(t!==null){let e=Tn,n=B;En(!0),On(null);try{t.call(null)}finally{En(e),On(n)}}}function pn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){let e=n.ac;e!==null&&Yt(()=>{e.abort(ne)});var r=n.next;n.f&64?n.parent=null:hn(n,t),n=r}}function mn(e){for(var t=e.first;t!==null;){var n=t.next;t.f&32||hn(t),t=n}}function hn(e,t=!0){var n=!1;(t||e.f&262144)&&e.nodes_start!==null&&e.nodes_end!==null&&(gn(e.nodes_start,e.nodes_end),n=!0),pn(e,t&&!n),Kn(e,0),Qn(e,16384);var r=e.transitions;if(r!==null)for(let e of r)e.stop();fn(e);var i=e.parent;i!==null&&i.first!==null&&_n(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function gn(e,t){for(;e!==null;){var n=e===t?null:Ut(e);e.remove(),e=n}}function _n(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function vn(e,t){var n=[];bn(e,n,!0),yn(n,()=>{hn(e),t&&t()})}function yn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function bn(e,t,n){if(!(e.f&8192)){if(e.f^=8192,e.transitions!==null)for(let r of e.transitions)(r.is_global||n)&&t.push(r);for(var r=e.first;r!==null;){var i=r.next,a=(r.f&65536)!=0||(r.f&32)!=0;bn(r,t,a?n:!1),r=i}}}function xn(e){Sn(e,!0)}function Sn(e,t){if(e.f&8192){e.f^=8192,e.f&1024||(Qn(e,2048),dt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&65536)!=0||(n.f&32)!=0;Sn(n,i?t:!1),n=r}if(e.transitions!==null)for(let n of e.transitions)(n.is_global||t)&&n.in()}}let Cn=!1;function wn(e){Cn=e}let Tn=!1;function En(e){Tn=e}let B=null,Dn=!1;function On(e){B=e}let V=null;function kn(e){V=e}let An=null;function jn(e){B!==null&&(An===null?An=[e]:An.push(e))}var Mn=null,Nn=0;let Pn=null;function Fn(e){Pn=e}let In=1;var Ln=0;let Rn=Ln;function zn(e){Rn=e}let Bn=!1;function Vn(){return++In}function Hn(e){var t=e.f;if(t&2048)return!0;if(t&4096){var n=e.deps,r=(t&256)!=0;if(n!==null){var i,a,o=(t&512)!=0,s=r&&V!==null&&!Bn,c=n.length;if((o||s)&&(V===null||!(V.f&16384))){var l=e,u=l.parent;for(i=0;i<c;i++)a=n[i],(o||!a?.reactions?.includes(l))&&(a.reactions??=[]).push(l);o&&(l.f^=512),s&&u!==null&&!(u.f&256)&&(l.f^=256)}for(i=0;i<c;i++)if(a=n[i],Hn(a)&&Et(a),a.wv>e.wv)return!0}(!r||V!==null&&!Bn)&&Qn(e,1024)}return!1}function Un(e,t,n=!0){var r=e.reactions;if(r!==null&&!An?.includes(e))for(var i=0;i<r.length;i++){var a=r[i];a.f&2?Un(a,t,!1):t===a&&(n?Qn(a,2048):a.f&1024&&Qn(a,4096),dt(a))}}function Wn(e){var t=Mn,n=Nn,r=Pn,i=B,a=Bn,o=An,s=ke,c=Dn,l=Rn,u=e.f;Mn=null,Nn=0,Pn=null,Bn=(u&256)!=0&&(Dn||!Cn||B===null),B=u&96?null:e,An=null,Ae(e.ctx),Dn=!1,Rn=++Ln,e.ac!==null&&(Yt(()=>{e.ac.abort(ne)}),e.ac=null);try{e.f|=2097152;var d=e.fn,f=d(),p=e.deps;if(Mn!==null){var m;if(Kn(e,Nn),p!==null&&Nn>0)for(p.length=Nn+Mn.length,m=0;m<Mn.length;m++)p[Nn+m]=Mn[m];else e.deps=p=Mn;if(!Bn||u&2&&e.reactions!==null)for(m=Nn;m<p.length;m++)(p[m].reactions??=[]).push(e)}else p!==null&&Nn<p.length&&(Kn(e,Nn),p.length=Nn);if(Fe()&&Pn!==null&&!Dn&&p!==null&&!(e.f&6146))for(m=0;m<Pn.length;m++)Un(Pn[m],e);return i!==null&&i!==e&&(Ln++,Pn!==null&&(r===null?r=Pn:r.push(...Pn))),e.f&8388608&&(e.f^=8388608),f}catch(e){return Je(e)}finally{e.f^=2097152,Mn=t,Nn=n,Pn=r,B=i,Bn=a,An=o,Ae(s),Dn=c,Rn=l}}function Gn(e,t){let n=t.reactions;if(n!==null){var r=u.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&t.f&2&&(Mn===null||!Mn.includes(t))&&(Qn(t,4096),t.f&768||(t.f^=512),Ct(t),Kn(t,0))}function Kn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Gn(e,n[r])}function qn(e){var t=e.f;if(!(t&16384)){Qn(e,1024);var n=V,r=Cn;V=e,Cn=!0;try{t&16?mn(e):pn(e),fn(e);var i=Wn(e);e.teardown=typeof i==`function`?i:null,e.wv=In}finally{Cn=r,V=n}}}async function Jn(){await Promise.resolve(),ot()}function H(e){var t=(e.f&2)!=0;if(null?.add(e),B!==null&&!Dn){if(!(V!==null&&V.f&16384)&&!An?.includes(e)){var n=B.deps;if(B.f&2097152)e.rv<Ln&&(e.rv=Ln,Mn===null&&n!==null&&n[Nn]===e?Nn++:Mn===null?Mn=[e]:(!Bn||!Mn.includes(e))&&Mn.push(e));else{(B.deps??=[]).push(e);var r=e.reactions;r===null?e.reactions=[B]:r.includes(B)||r.push(B)}}}else if(t&&e.deps===null&&e.effects===null){var i=e,a=i.parent;a!==null&&!(a.f&256)&&(i.f^=256)}if(Tn){if(Dt.has(e))return Dt.get(e);if(t){i=e;var o=i.v;return(!(i.f&1024)&&i.reactions!==null||Yn(i))&&(o=Tt(i)),Dt.set(i,o),o}}else if(t){if(i=e,$e?.has(i))return $e.get(i);Hn(i)&&Et(i)}if(e.f&8388608)throw e.v;return e.v}function Yn(e){if(e.v===he)return!0;if(e.deps===null)return!1;for(let t of e.deps)if(Dt.has(t)||t.f&2&&Yn(t))return!0;return!1}function Xn(e){var t=Dn;try{return Dn=!0,e()}finally{Dn=t}}var Zn=-7169;function Qn(e,t){e.f=e.f&Zn|t}function $n(){return Symbol(`@attach`)}function er(e){return e.endsWith(`capture`)&&e!==`gotpointercapture`&&e!==`lostpointercapture`}var tr=[`beforeinput`,`click`,`change`,`dblclick`,`contextmenu`,`focusin`,`focusout`,`input`,`keydown`,`keyup`,`mousedown`,`mousemove`,`mouseout`,`mouseover`,`mouseup`,`pointerdown`,`pointermove`,`pointerout`,`pointerover`,`pointerup`,`touchend`,`touchmove`,`touchstart`];function nr(e){return tr.includes(e)}var rr=`allowfullscreen.async.autofocus.autoplay.checked.controls.default.disabled.formnovalidate.indeterminate.inert.ismap.loop.multiple.muted.nomodule.novalidate.open.playsinline.readonly.required.reversed.seamless.selected.webkitdirectory.defer.disablepictureinpicture.disableremoteplayback`.split(`.`),ir={formnovalidate:`formNoValidate`,ismap:`isMap`,nomodule:`noModule`,playsinline:`playsInline`,readonly:`readOnly`,defaultvalue:`defaultValue`,defaultchecked:`defaultChecked`,srcobject:`srcObject`,novalidate:`noValidate`,allowfullscreen:`allowFullscreen`,disablepictureinpicture:`disablePictureInPicture`,disableremoteplayback:`disableRemotePlayback`};function ar(e){return e=e.toLowerCase(),ir[e]??e}[...rr];var or=[`touchstart`,`touchmove`];function sr(e){return or.includes(e)}var cr=[`textarea`,`script`,`style`,`title`];function lr(e){return cr.includes(e)}let ur=new Set,dr=new Set;function fr(e,t,n,r={}){function i(e){if(r.capture||_r.call(t,e),!e.cancelBubble)return Yt(()=>n?.call(this,e))}return e.startsWith(`pointer`)||e.startsWith(`touch`)||e===`wheel`?We(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function pr(e,t,n,r={}){var i=fr(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function mr(e,t,n,r,i){var a={capture:r,passive:i},o=fr(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&tn(()=>{t.removeEventListener(e,o,a)})}function hr(e){for(var t=0;t<e.length;t++)ur.add(e[t]);for(var n of dr)n(e)}var gr=null;function _r(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],a=i[0]||e.target;gr=e;var o=0,s=gr===e&&e.__root;if(s){var c=i.indexOf(s);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;c<=u&&(o=c)}if(a=i[o]||e.target,a!==t){f(e,`currentTarget`,{configurable:!0,get(){return a||n}});var d=B,p=V;On(null),kn(null);try{for(var m,h=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var _=a[`__`+r];if(_!=null&&(!a.disabled||e.target===a))if(l(_)){var[v,...y]=_;v.apply(a,[e,...y])}else _.call(a,e)}catch(e){m?h.push(e):m=e}if(e.cancelBubble||g===t||g===null)break;a=g}if(m){for(let e of h)queueMicrotask(()=>{throw e});throw m}}finally{e.__root=t,delete e.currentTarget,On(d),kn(p)}}}function vr(e){var t=document.createElement(`template`);return t.innerHTML=e.replaceAll(`<!>`,`<!---->`),t.content}function yr(e,t){var n=V;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function U(e,t){var n=(t&1)!=0,r=(t&2)!=0,i,a=!e.startsWith(`<!>`);return()=>{if(T)return yr(E,null),E;i===void 0&&(i=vr(a?e:`<!>`+e),n||(i=Ht(i)));var t=r||Lt?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=Ht(t),s=t.lastChild;yr(o,s)}else yr(t,t);return t}}function br(e,t,n=`svg`){var r=!e.startsWith(`<!>`),i=(t&1)!=0,a=`<${n}>${r?e:`<!>`+e}</${n}>`,o;return()=>{if(T)return yr(E,null),E;if(!o){var e=vr(a),t=Ht(e);if(i)for(o=document.createDocumentFragment();Ht(t);)o.appendChild(Ht(t));else o=Ht(t)}var n=o.cloneNode(!0);if(i){var r=Ht(n),s=n.lastChild;yr(r,s)}else yr(n,n);return n}}function xr(e,t){return br(e,t,`svg`)}function Sr(e=``){if(!T){var t=Vt(e+``);return yr(t,t),t}var n=E;return n.nodeType!==3&&(n.before(n=Vt()),be(n)),yr(n,n),n}function W(){if(T)return yr(E,null),E;var e=document.createDocumentFragment(),t=document.createComment(``),n=Vt();return e.append(t,n),yr(t,n),e}function G(e,t){if(T){V.nodes_end=E,xe();return}e!==null&&e.before(t)}function Cr(){if(T&&E&&E.nodeType===8&&E.textContent?.startsWith(`$`)){let e=E.textContent.substring(1);return xe(),e}return(window.__svelte??={}).uid??=1,`c${window.__svelte.uid++}`}function K(e,t){var n=t==null?``:typeof t==`object`?t+``:t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+``)}function wr(e,t){return Er(e,t)}var Tr=new Map;function Er(e,{target:t,anchor:n,props:r={},events:i,context:a,intro:o=!0}){Bt();var s=new Set,c=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!s.has(r)){s.add(r);var i=sr(r);t.addEventListener(r,_r,{passive:i});var a=Tr.get(r);a===void 0?(document.addEventListener(r,_r,{passive:i}),Tr.set(r,1)):Tr.set(r,a+1)}}};c(d(ur)),dr.add(c);var l=void 0,u=on(()=>{var o=n??t.appendChild(Vt());return mt(o,{pending:()=>{}},t=>{if(a){O({});var n=ke;n.c=a}if(i&&(r.$$events=i),T&&yr(t,null),l=e(t,r)||{},T&&(V.nodes_end=E,E===null||E.nodeType!==8||E.data!==`]`))throw ge(),me;a&&k()}),()=>{for(var e of s){t.removeEventListener(e,_r);var r=Tr.get(e);--r===0?(document.removeEventListener(e,_r),Tr.delete(e)):Tr.set(e,r)}dr.delete(c),o!==n&&o.parentNode?.removeChild(o)}});return Dr.set(l,u),l}var Dr=new WeakMap;function Or(e,t){let n=Dr.get(e);return n?(Dr.delete(e),n(t)):Promise.resolve()}function q(e,t,n=!1){T&&xe();var r=e,i=null,a=null,o=he,s=n?65536:0,c=!1;let l=(e,t=!0)=>{c=!0,f(t,e)};var u=null;function d(){u!==null&&(u.lastChild.remove(),r.before(u),u=null);var e=o?i:a,t=o?a:i;e&&xn(e),t&&vn(t,()=>{o?a=null:i=null})}let f=(e,t)=>{if(o===(o=e))return;let n=!1;if(T){let e=we(r)===`[!`;!!o===e&&(r=Ce(),be(r),ye(!1),n=!0)}var s=Gt(),c=r;if(s&&(u=document.createDocumentFragment(),u.append(c=Vt())),o?i??=t&&dn(()=>t(c)):a??=t&&dn(()=>t(c)),s){var l=A,f=o?i:a,p=o?a:i;f&&l.skipped_effects.delete(f),p&&l.skipped_effects.add(p),l.add_callback(d)}else d();n&&ye(!0)};un(()=>{c=!1,t(l),c||f(null,null)},s),T&&(r=E)}function kr(e,t,n){T&&xe();var r=e,i=he,a,o,s=null,c=Fe()?De:Ee;function l(){a&&vn(a),s!==null&&(s.lastChild.remove(),r.before(s),s=null),a=o}un(()=>{if(c(i,i=t())){var e=r,a=Gt();a&&(s=document.createDocumentFragment(),s.append(e=Vt())),o=dn(()=>n(e)),a?A.add_callback(l):l()}}),T&&(r=E)}let Ar=null;function jr(e){Ar=e}function Mr(e,t){return t}function Nr(e,t,n){for(var r=e.items,i=[],a=t.length,o=0;o<a;o++)bn(t[o].e,i,!0);var s=a>0&&i.length===0&&n!==null;if(s){var c=n.parentNode;Wt(c),c.append(n),r.clear(),zr(e,t[0].prev,t[a-1].next)}yn(i,()=>{for(var n=0;n<a;n++){var i=t[n];s||(r.delete(i.k),zr(e,i.prev,i.next)),hn(i.e,!s)}})}function Pr(e,t,n,r,i,a=null){var o=e,s={flags:t,items:new Map,first:null};if(t&4){var c=e;o=T?be(Ht(c)):c.appendChild(Vt())}T&&xe();var u=null,f=!1,p=new Map,m=St(()=>{var e=n();return l(e)?e:e==null?[]:d(e)}),h,g;function _(){Fr(g,h,s,p,o,i,t,r,n),a!==null&&(h.length===0?u?xn(u):u=dn(()=>a(o)):u!==null&&vn(u,()=>{u=null}))}un(()=>{g??=V,h=H(m);var e=h.length;if(f&&e===0)return;f=e===0;let c=!1;if(T&&we(o)===`[!`!=(e===0)&&(o=Ce(),be(o),ye(!1),c=!0),T){for(var l=null,d,v=0;v<e;v++){if(E.nodeType===8&&E.data===`]`){o=E,c=!0,ye(!1);break}var y=h[v],b=r(y,v);d=Lr(E,s,l,null,y,b,v,i,t,n),s.items.set(b,d),l=d}e>0&&be(Ce())}if(T)e===0&&a&&(u=dn(()=>a(o)));else if(Gt()){var x=new Set,S=A;for(v=0;v<e;v+=1){y=h[v],b=r(y,v);var C=s.items.get(b)??p.get(b);C?t&3&&Ir(C,y,v,t):(d=Lr(null,s,null,null,y,b,v,i,t,n,!0),p.set(b,d)),x.add(b)}for(let[e,t]of s.items)x.has(e)||S.skipped_effects.add(t.e);S.add_callback(_)}else _();c&&ye(!0),H(m)}),T&&(o=E)}function Fr(e,t,n,r,i,a,o,s,c){var l=(o&8)!=0,u=(o&3)!=0,f=t.length,p=n.items,m=n.first,h,g=null,_,v=[],y=[],b,x,S,C;if(l)for(C=0;C<f;C+=1)b=t[C],x=s(b,C),S=p.get(x),S!==void 0&&(S.a?.measure(),(_??=new Set).add(S));for(C=0;C<f;C+=1){if(b=t[C],x=s(b,C),S=p.get(x),S===void 0){var w=r.get(x);if(w!==void 0){r.delete(x),p.set(x,w);var ee=g?g.next:m;zr(n,g,w),zr(n,w,ee),Rr(w,ee,i),g=w}else{var te=m?m.e.nodes_start:i;g=Lr(te,n,g,g===null?n.first:g.next,b,x,C,a,o,c)}p.set(x,g),v=[],y=[],m=g.next;continue}if(u&&Ir(S,b,C,o),S.e.f&8192&&(xn(S.e),l&&(S.a?.unfix(),(_??=new Set).delete(S))),S!==m){if(h!==void 0&&h.has(S)){if(v.length<y.length){var ne=y[0],re;g=ne.prev;var ie=v[0],ae=v[v.length-1];for(re=0;re<v.length;re+=1)Rr(v[re],ne,i);for(re=0;re<y.length;re+=1)h.delete(y[re]);zr(n,ie.prev,ae.next),zr(n,g,ie),zr(n,ae,ne),m=ne,g=ae,--C,v=[],y=[]}else h.delete(S),Rr(S,m,i),zr(n,S.prev,S.next),zr(n,S,g===null?n.first:g.next),zr(n,g,S),g=S;continue}for(v=[],y=[];m!==null&&m.k!==x;)m.e.f&8192||(h??=new Set).add(m),y.push(m),m=m.next;if(m===null)continue;S=m}v.push(S),g=S,m=S.next}if(m!==null||h!==void 0){for(var oe=h===void 0?[]:d(h);m!==null;)m.e.f&8192||oe.push(m),m=m.next;var se=oe.length;if(se>0){var ce=o&4&&f===0?i:null;if(l){for(C=0;C<se;C+=1)oe[C].a?.measure();for(C=0;C<se;C+=1)oe[C].a?.fix()}Nr(n,oe,ce)}}l&&We(()=>{if(_!==void 0)for(S of _)S.a?.apply()}),e.first=n.first&&n.first.e,e.last=g&&g.e;for(var le of r.values())hn(le.e);r.clear()}function Ir(e,t,n,r){r&1&&At(e.v,t),r&2?At(e.i,n):e.i=n}function Lr(e,t,n,r,i,a,o,s,c,l,u){var d=Ar,f=(c&1)!=0,p=(c&16)==0,m=f?p?kt(i,!1,!1):Ot(i):i,h=c&2?Ot(o):o,g={i:h,v:m,k:a,a:null,e:null,prev:n,next:r};Ar=g;try{return e===null&&document.createDocumentFragment().append(e=Vt()),g.e=dn(()=>s(e,m,h,l),T),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?u||(t.first=g):(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{Ar=d}}function Rr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var o=Ut(a);i.before(a),a=o}}function zr(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Br(e,t,n=!1,r=!1,i=!1){var a=e,o=``;z(()=>{var e=V;if(o===(o=t()??``)){T&&xe();return}if(e.nodes_start!==null&&(gn(e.nodes_start,e.nodes_end),e.nodes_start=e.nodes_end=null),o!==``){if(T){for(var i=E.data,s=xe(),c=s;s!==null&&(s.nodeType!==8||s.data!==``);)c=s,s=Ut(s);if(s===null)throw ge(),me;yr(E,c),a=be(s);return}var l=o+``;n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var u=vr(l);if((n||r)&&(u=Ht(u)),yr(Ht(u),u.lastChild),n||r)for(;Ht(u);)a.before(Ht(u));else a.before(u)}})}function J(e,t,...n){var r=e,i=b,a;un(()=>{i!==(i=t())&&(a&&=(hn(a),null),a=dn(()=>i(r,...n)))},65536),T&&(r=E)}function Vr(e,t,n){T&&xe();var r=e,i,a,o=null,s=null;function c(){a&&=(vn(a),null),o&&=(o.lastChild.remove(),r.before(o),null),a=s,s=null}un(()=>{if(i!==(i=t())){var e=Gt();if(i){var l=r;e&&(o=document.createDocumentFragment(),o.append(l=Vt()),a&&A.skipped_effects.add(a)),s=dn(()=>n(l,i))}e?A.add_callback(c):c()}},65536),T&&(r=E)}function Hr(e,t,n,r,i,a){let o=T;T&&xe();var s,c,l=null;T&&E.nodeType===1&&(l=E,xe());var u=T?E:e,d,f=Ar;un(()=>{let e=t()||null;var a=i?i():n||e===`svg`?`http://www.w3.org/2000/svg`:null;if(e!==s){var o=Ar;jr(f),d&&(e===null?vn(d,()=>{d=null,c=null}):e===c?xn(d):hn(d)),e&&e!==c&&(d=dn(()=>{if(l=T?l:a?document.createElementNS(a,e):document.createElement(e),yr(l,l),r){T&&lr(e)&&l.append(document.createComment(``));var t=T?Ht(l):l.appendChild(Vt());T&&(t===null?ye(!1):be(t)),r(l,t)}V.nodes_end=l,u.before(l)})),s=e,s&&(c=s),jr(o)}},65536),o&&(ye(!0),be(u))}function Ur(e,t){var n=void 0,r;un(()=>{n!==(n=t())&&(r&&=(hn(r),null),n&&(r=dn(()=>{sn(()=>n(e))})))})}function Wr(e){var t,n,r=``;if(typeof e==`string`||typeof e==`number`)r+=e;else if(typeof e==`object`)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Wr(e[t]))&&(r&&(r+=` `),r+=n)}else for(n in e)e[n]&&(r&&(r+=` `),r+=n);return r}function Gr(){for(var e,t,n=0,r=``,i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Wr(e))&&(r&&(r+=` `),r+=t);return r}function Kr(e){return typeof e==`object`?Gr(e):e??``}var qr=[...` 	
\r\f\xA0\vï»¿`];function Jr(e,t,n){var r=e==null?``:``+e;if(t&&(r=r?r+` `+t:t),n){for(var i in n)if(n[i])r=r?r+` `+i:i;else if(r.length)for(var a=i.length,o=0;(o=r.indexOf(i,o))>=0;){var s=o+a;(o===0||qr.includes(r[o-1]))&&(s===r.length||qr.includes(r[s]))?r=(o===0?``:r.substring(0,o))+r.substring(s+1):o=s}}return r===``?null:r}function Yr(e,t=!1){var n=t?` !important;`:`;`,r=``;for(var i in e){var a=e[i];a!=null&&a!==``&&(r+=` `+i+`: `+a+n)}return r}function Xr(e){return e[0]!==`-`||e[1]!==`-`?e.toLowerCase():e}function Zr(e,t){if(t){var n=``,r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,``).trim();var a=!1,o=0,s=!1,c=[];r&&c.push(...Object.keys(r).map(Xr)),i&&c.push(...Object.keys(i).map(Xr));var l=0,u=-1;let t=e.length;for(var d=0;d<t;d++){var f=e[d];if(s?f===`/`&&e[d-1]===`*`&&(s=!1):a?a===f&&(a=!1):f===`/`&&e[d+1]===`*`?s=!0:f===`"`||f===`'`?a=f:f===`(`?o++:f===`)`&&o--,!s&&a===!1&&o===0){if(f===`:`&&u===-1)u=d;else if(f===`;`||d===t-1){if(u!==-1){var p=Xr(e.substring(l,u).trim());if(!c.includes(p)){f!==`;`&&d++;var m=e.substring(l,d).trim();n+=` `+m+`;`}}l=d+1,u=-1}}}}return r&&(n+=Yr(r)),i&&(n+=Yr(i,!0)),n=n.trim(),n===``?null:n}return e==null?null:String(e)}function Qr(e,t,n,r,i,a){var o=e.__className;if(T||o!==n||o===void 0){var s=Jr(n,r,a);(!T||s!==e.getAttribute(`class`))&&(s==null?e.removeAttribute(`class`):t?e.className=s:e.setAttribute(`class`,s)),e.__className=n}else if(a&&i!==a)for(var c in a){var l=!!a[c];(i==null||l!==!!i[c])&&e.classList.toggle(c,l)}return a}function $r(e,t={},n,r){for(var i in n){var a=n[i];t[i]!==a&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,r))}}function ei(e,t,n,r){var i=e.__style;if(T||i!==t){var a=Zr(t,r);(!T||a!==e.getAttribute(`style`))&&(a==null?e.removeAttribute(`style`):e.style.cssText=a),e.__style=t}else r&&(Array.isArray(r)?($r(e,n?.[0],r[0]),$r(e,n?.[1],r[1],`important`)):$r(e,n,r));return r}function ti(e,t,n=!1){if(e.multiple){if(t==null)return;if(!l(t))return _e();for(var r of e.options)r.selected=t.includes(ii(r));return}for(r of e.options){var i=ii(r);if(Ft(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ni(e){var t=new MutationObserver(()=>{ti(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[`value`]}),tn(()=>{t.disconnect()})}function ri(e,t,n=t){var r=!0;Xt(e,`change`,t=>{var r=t?`[selected]`:`:checked`,i;if(e.multiple)i=[].map.call(e.querySelectorAll(r),ii);else{var a=e.querySelector(r)??e.querySelector(`option:not([disabled])`);i=a&&ii(a)}n(i)}),sn(()=>{var i=t();if(ti(e,i,r),r&&i===void 0){var a=e.querySelector(`:checked`);a!==null&&(i=ii(a),n(i))}e.__value=i,r=!1}),ni(e)}function ii(e){return`__value`in e?e.__value:e.value}let ai=Symbol(`class`),oi=Symbol(`style`);var si=Symbol(`is custom element`),ci=Symbol(`is html`);function li(e){if(T){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute(`value`)){var n=e.value;Y(e,`value`,null),e.value=n}if(e.hasAttribute(`checked`)){var r=e.checked;Y(e,`checked`,null),e.checked=r}}};e.__on_r=n,Ge(n),Jt()}}function ui(e,t){var n=mi(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!==`PROGRESS`)||(e.value=t??``)}function di(e,t){t?e.hasAttribute(`selected`)||e.setAttribute(`selected`,``):e.removeAttribute(`selected`)}function Y(e,t,n,r){var i=mi(e);T&&(i[t]=e.getAttribute(t),t===`src`||t===`srcset`||t===`href`&&e.nodeName===`LINK`)||i[t]!==(i[t]=n)&&(t===`loading`&&(e[te]=n),n==null?e.removeAttribute(t):typeof n!=`string`&&gi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function fi(e,t,n,r,i=!1,a=!1){if(T&&i&&e.tagName===`INPUT`){var o=e;(o.type===`checkbox`?`defaultChecked`:`defaultValue`)in n||li(o)}var s=mi(e),c=s[si],l=!s[ci];let u=T&&c;u&&ye(!1);var d=t||{},f=e.tagName===`OPTION`;for(var p in t)p in n||(n[p]=null);n.class?n.class=Kr(n.class):(r||n[ai])&&(n.class=null),n[oi]&&(n.style??=null);var m=gi(e);for(let i in n){let o=n[i];if(f&&i===`value`&&o==null){e.value=e.__value=``,d[i]=o;continue}if(i===`class`){var h=e.namespaceURI===`http://www.w3.org/1999/xhtml`;Qr(e,h,o,r,t?.[ai],n[ai]),d[i]=o,d[ai]=n[ai];continue}if(i===`style`){ei(e,o,t?.[oi],n[oi]),d[i]=o,d[oi]=n[oi];continue}var g=d[i];if(o===g&&!(o===void 0&&e.hasAttribute(i)))continue;d[i]=o;var _=i[0]+i[1];if(_===`$$`)continue;if(_===`on`){let t={},n=`$$`+i,r=i.slice(2);var v=nr(r);if(er(r)&&(r=r.slice(0,-7),t.capture=!0),!v&&g){if(o!=null)continue;e.removeEventListener(r,d[n],t),d[n]=null}if(o!=null)if(v)e[`__${r}`]=o,hr([r]);else{function a(e){d[i].call(this,e)}d[n]=fr(r,e,a,t)}else v&&(e[`__${r}`]=void 0)}else if(i===`style`)Y(e,i,o);else if(i===`autofocus`)Kt(e,!!o);else if(!c&&(i===`__value`||i===`value`&&o!=null))e.value=e.__value=o;else if(i===`selected`&&f)di(e,o);else{var y=i;l||(y=ar(y));var b=y===`defaultValue`||y===`defaultChecked`;if(o==null&&!c&&!b)if(s[i]=null,y===`value`||y===`checked`){let n=e,r=t===void 0;if(y===`value`){let e=n.defaultValue;n.removeAttribute(y),n.defaultValue=e,n.value=n.__value=r?e:null}else{let e=n.defaultChecked;n.removeAttribute(y),n.defaultChecked=e,n.checked=r?e:!1}}else e.removeAttribute(i);else b||m.includes(y)&&(c||typeof o!=`string`)?(e[y]=o,y in s&&(s[y]=he)):typeof o!=`function`&&Y(e,y,o,a)}}return u&&ye(!0),d}function pi(e,t,n=[],r=[],i,a=!1,o=!1){_t(n,r,n=>{var r=void 0,s={},c=e.nodeName===`SELECT`,l=!1;if(un(()=>{var u=t(...n.map(H)),d=fi(e,r,u,i,a,o);l&&c&&`value`in u&&ti(e,u.value);for(let e of Object.getOwnPropertySymbols(s))u[e]||hn(s[e]);for(let t of Object.getOwnPropertySymbols(u)){var f=u[t];t.description===`@attach`&&(!r||f!==r[t])&&(s[t]&&hn(s[t]),s[t]=dn(()=>Ur(e,()=>f))),d[t]=f}r=d}),c){var u=e;sn(()=>{ti(u,r.value,!0),ni(u)})}l=!0})}function mi(e){return e.__attributes??={[si]:e.nodeName.includes(`-`),[ci]:e.namespaceURI===`http://www.w3.org/1999/xhtml`}}var hi=new Map;function gi(e){var t=e.getAttribute(`is`)||e.nodeName,n=hi.get(t);if(n)return n;hi.set(t,n=[]);for(var r,i=e,a=Element.prototype;a!==i;){for(var o in r=m(i),r)r[o].set&&n.push(o);i=_(i)}return n}function _i(e,t,n=t){var r=new WeakSet;Xt(e,`input`,async i=>{var a=i?e.defaultValue:e.value;if(a=yi(e)?bi(a):a,n(a),A!==null&&r.add(A),await Jn(),a!==(a=t())){var o=e.selectionStart,s=e.selectionEnd;e.value=a??``,s!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(s,e.value.length))}}),(T&&e.defaultValue!==e.value||Xn(t)==null&&e.value)&&(n(yi(e)?bi(e.value):e.value),A!==null&&r.add(A)),ln(()=>{var n=t();if(e===document.activeElement){var i=Qe??A;if(r.has(i))return}yi(e)&&n===bi(e.value)||e.type===`date`&&!n&&!e.value||n!==e.value&&(e.value=n??``)})}function vi(e,t,n=t){Xt(e,`change`,t=>{var r=t?e.defaultChecked:e.checked;n(r)}),(T&&e.defaultChecked!==e.checked||Xn(t)==null)&&n(e.checked),ln(()=>{e.checked=!!t()})}function yi(e){var t=e.type;return t===`number`||t===`range`}function bi(e){return e===``?null:+e}function xi(e,t){return e===t||e?.[w]===t}function Si(e={},t,n,r){return sn(()=>{var i,a;return ln(()=>{i=a,a=r?.()||[],Xn(()=>{e!==n(...a)&&(t(e,...a),i&&xi(n(...i),e)&&t(null,...i))})}),()=>{We(()=>{a&&xi(n(...a),e)&&t(null,...a)})}}),e}var Ci=!1;function wi(e){var t=Ci;try{return Ci=!1,[e(),Ci]}finally{Ci=t}}var Ti={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Ei(e,t,n){return new Proxy({props:e,exclude:t},Ti)}var Di={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(y(r)&&(r=r()),typeof r==`object`&&r&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];y(i)&&(i=i());let a=p(i,t);if(a&&a.set)return a.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(y(r)&&(r=r()),typeof r==`object`&&r&&t in r){let e=p(r,t);return e&&!e.configurable&&(e.configurable=!0),e}}},has(e,t){if(t===w||t===ee)return!1;for(let n of e.props)if(y(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){let t=[];for(let n of e.props){if(y(n)&&(n=n()),!n)continue;for(let e in n)t.includes(e)||t.push(e);for(let e of Object.getOwnPropertySymbols(n))t.includes(e)||t.push(e)}return t}};function Oi(...e){return new Proxy({props:e},Di)}function X(e,t,n,r){var i=!0,a=(n&8)!=0,o=(n&16)!=0,s=r,c=!0,l=()=>(c&&(c=!1,s=o?Xn(r):r),s),u;if(a){var d=w in e||ee in e;u=p(e,t)?.set??(d&&t in e?n=>e[t]=n:void 0)}var f,m=!1;a?[f,m]=wi(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=l(),u&&(i&&le(t),u(f)));var h=i?()=>{var n=e[t];return n===void 0?l():(c=!0,n)}:()=>{var n=e[t];return n!==void 0&&(s=void 0),n===void 0?s:n};if(i&&!(n&4))return h;if(u){var g=e.$$legacy;return(function(e,t){return arguments.length>0?((!i||!t||g||m)&&u(t?h():e),e):h()})}var _=!1,v=(n&1?bt:St)(()=>(_=!1,h()));a&&H(v);var y=V;return(function(e,t){if(arguments.length>0){let n=t?H(v):i&&a?P(e):e;return N(v,n),_=!0,s!==void 0&&(s=n),e}return Tn&&_||y.f&16384?v.v:H(v)})}function ki(e){ke===null&&re(`onMount`),R(()=>{let t=Xn(e);if(typeof t==`function`)return t})}function Ai(e){ke===null&&re(`onDestroy`),ki(()=>()=>Xn(e))}typeof window<`u`&&((window.__svelte??={}).v??=new Set).add(`5`);var ji=/^[a-z0-9]+(-[a-z0-9]+)*$/,Mi=(e,t,n,r=``)=>{let i=e.split(`:`);if(e.slice(0,1)===`@`){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){let e=i.pop(),n=i.pop(),a={provider:i.length>0?i[0]:r,prefix:n,name:e};return t&&!Ni(a)?null:a}let a=i[0],o=a.split(`-`);if(o.length>1){let e={provider:r,prefix:o.shift(),name:o.join(`-`)};return t&&!Ni(e)?null:e}if(n&&r===``){let e={provider:r,prefix:``,name:a};return t&&!Ni(e,n)?null:e}return null},Ni=(e,t)=>e?!!((t&&e.prefix===``||e.prefix)&&e.name):!1;function Pi(e,t){let n=e.icons,r=e.aliases||Object.create(null),i=Object.create(null);function a(e){if(n[e])return i[e]=[];if(!(e in i)){i[e]=null;let t=r[e]&&r[e].parent,n=t&&a(t);n&&(i[e]=[t].concat(n))}return i[e]}return Object.keys(n).concat(Object.keys(r)).forEach(a),i}var Fi=Object.freeze({left:0,top:0,width:16,height:16}),Ii=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Li=Object.freeze({...Fi,...Ii}),Ri=Object.freeze({...Li,body:``,hidden:!1});function zi(e,t){let n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);let r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}function Bi(e,t){let n=zi(e,t);for(let r in Ri)r in Ii?r in e&&!(r in n)&&(n[r]=Ii[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function Vi(e,t,n){let r=e.icons,i=e.aliases||Object.create(null),a={};function o(e){a=Bi(r[e]||i[e],a)}return o(t),n.forEach(o),Bi(e,a)}function Hi(e,t){let n=[];if(typeof e!=`object`||typeof e.icons!=`object`)return n;e.not_found instanceof Array&&e.not_found.forEach(e=>{t(e,null),n.push(e)});let r=Pi(e);for(let i in r){let a=r[i];a&&(t(i,Vi(e,i,a)),n.push(i))}return n}var Ui={provider:``,aliases:{},not_found:{},...Fi};function Wi(e,t){for(let n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function Gi(e){if(typeof e!=`object`||!e)return null;let t=e;if(typeof t.prefix!=`string`||!e.icons||typeof e.icons!=`object`||!Wi(e,Ui))return null;let n=t.icons;for(let e in n){let t=n[e];if(!e||typeof t.body!=`string`||!Wi(t,Ri))return null}let r=t.aliases||Object.create(null);for(let e in r){let t=r[e],i=t.parent;if(!e||typeof i!=`string`||!n[i]&&!r[i]||!Wi(t,Ri))return null}return t}var Ki=Object.create(null);function qi(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function Ji(e,t){let n=Ki[e]||(Ki[e]=Object.create(null));return n[t]||(n[t]=qi(e,t))}function Yi(e,t){return Gi(t)?Hi(t,(t,n)=>{n?e.icons[t]=n:e.missing.add(t)}):[]}function Xi(e,t,n){try{if(typeof n.body==`string`)return e.icons[t]={...n},!0}catch{}return!1}var Zi=!1;function Qi(e){return typeof e==`boolean`&&(Zi=e),Zi}function $i(e){let t=typeof e==`string`?Mi(e,!0,Zi):e;if(t){let e=Ji(t.provider,t.prefix),n=t.name;return e.icons[n]||(e.missing.has(n)?null:void 0)}}function ea(e,t){let n=Mi(e,!0,Zi);if(!n)return!1;let r=Ji(n.provider,n.prefix);return t?Xi(r,n.name,t):(r.missing.add(n.name),!0)}function ta(e,t){if(typeof e!=`object`)return!1;if(typeof t!=`string`&&(t=e.provider||``),Zi&&!t&&!e.prefix){let t=!1;return Gi(e)&&(e.prefix=``,Hi(e,(e,n)=>{ea(e,n)&&(t=!0)})),t}let n=e.prefix;if(!Ni({prefix:n,name:`a`}))return!1;let r=Ji(t,n);return!!Yi(r,e)}var na=Object.freeze({width:null,height:null}),ra=Object.freeze({...na,...Ii}),ia=/(-?[0-9.]*[0-9]+[0-9.]*)/g,aa=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function oa(e,t,n){if(t===1)return e;if(n||=100,typeof e==`number`)return Math.ceil(e*t*n)/n;if(typeof e!=`string`)return e;let r=e.split(ia);if(r===null||!r.length)return e;let i=[],a=r.shift(),o=aa.test(a);for(;;){if(o){let e=parseFloat(a);isNaN(e)?i.push(a):i.push(Math.ceil(e*t*n)/n)}else i.push(a);if(a=r.shift(),a===void 0)return i.join(``);o=!o}}function sa(e,t=`defs`){let n=``,r=e.indexOf(`<`+t);for(;r>=0;){let i=e.indexOf(`>`,r),a=e.indexOf(`</`+t);if(i===-1||a===-1)break;let o=e.indexOf(`>`,a);if(o===-1)break;n+=e.slice(i+1,a).trim(),e=e.slice(0,r).trim()+e.slice(o+1)}return{defs:n,content:e}}function ca(e,t){return e?`<defs>`+e+`</defs>`+t:t}function la(e,t,n){let r=sa(e);return ca(r.defs,t+r.content+n)}var ua=e=>e===`unset`||e===`undefined`||e===`none`;function da(e,t){let n={...Li,...e},r={...ra,...t},i={left:n.left,top:n.top,width:n.width,height:n.height},a=n.body;[n,r].forEach(e=>{let t=[],n=e.hFlip,r=e.vFlip,o=e.rotate;n?r?o+=2:(t.push(`translate(`+(i.width+i.left).toString()+` `+(0-i.top).toString()+`)`),t.push(`scale(-1 1)`),i.top=i.left=0):r&&(t.push(`translate(`+(0-i.left).toString()+` `+(i.height+i.top).toString()+`)`),t.push(`scale(1 -1)`),i.top=i.left=0);let s;switch(o<0&&(o-=Math.floor(o/4)*4),o%=4,o){case 1:s=i.height/2+i.top,t.unshift(`rotate(90 `+s.toString()+` `+s.toString()+`)`);break;case 2:t.unshift(`rotate(180 `+(i.width/2+i.left).toString()+` `+(i.height/2+i.top).toString()+`)`);break;case 3:s=i.width/2+i.left,t.unshift(`rotate(-90 `+s.toString()+` `+s.toString()+`)`);break}o%2==1&&(i.left!==i.top&&(s=i.left,i.left=i.top,i.top=s),i.width!==i.height&&(s=i.width,i.width=i.height,i.height=s)),t.length&&(a=la(a,`<g transform="`+t.join(` `)+`">`,`</g>`))});let o=r.width,s=r.height,c=i.width,l=i.height,u,d;o===null?(d=s===null?`1em`:s===`auto`?l:s,u=oa(d,c/l)):(u=o===`auto`?c:o,d=s===null?oa(u,l/c):s===`auto`?l:s);let f={},p=(e,t)=>{ua(t)||(f[e]=t.toString())};p(`width`,u),p(`height`,d);let m=[i.left,i.top,c,l];return f.viewBox=m.join(` `),{attributes:f,viewBox:m,body:a}}var fa=/\sid="(\S+)"/g,pa=`IconifyId`+Date.now().toString(16)+(Math.random()*16777216|0).toString(16),ma=0;function ha(e,t=pa){let n=[],r;for(;r=fa.exec(e);)n.push(r[1]);if(!n.length)return e;let i=`suffix`+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(n=>{let r=typeof t==`function`?t(n):t+(ma++).toString(),a=n.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`);e=e.replace(RegExp(`([#;"])(`+a+`)([")]|\\.[a-z])`,`g`),`$1`+r+i+`$3`)}),e=e.replace(new RegExp(i,`g`),``),e}var ga=Object.create(null);function _a(e,t){ga[e]=t}function va(e){return ga[e]||ga[``]}function ya(e){let t;if(typeof e.resources==`string`)t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||`/`,maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}for(var ba=Object.create(null),xa=[`https://api.simplesvg.com`,`https://api.unisvg.com`],Sa=[];xa.length>0;)xa.length===1||Math.random()>.5?Sa.push(xa.shift()):Sa.push(xa.pop());ba[``]=ya({resources:[`https://api.iconify.design`].concat(Sa)});function Ca(e,t){let n=ya(t);return n===null?!1:(ba[e]=n,!0)}function wa(e){return ba[e]}var Ta=(()=>{let e;try{if(e=fetch,typeof e==`function`)return e}catch{}})();function Ea(e,t){let n=wa(e);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let e=0;n.resources.forEach(t=>{let n=t;e=Math.max(e,n.length)});let i=t+`.json?icons=`;r=n.maxURL-e-n.path.length-i.length}return r}function Da(e){return e===404}var Oa=(e,t,n)=>{let r=[],i=Ea(e,t),a=`icons`,o={type:a,provider:e,prefix:t,icons:[]},s=0;return n.forEach((n,c)=>{s+=n.length+1,s>=i&&c>0&&(r.push(o),o={type:a,provider:e,prefix:t,icons:[]},s=n.length),o.icons.push(n)}),r.push(o),r};function ka(e){if(typeof e==`string`){let t=wa(e);if(t)return t.path}return`/`}var Aa={prepare:Oa,send:(e,t,n)=>{if(!Ta){n(`abort`,424);return}let r=ka(t.provider);switch(t.type){case`icons`:{let e=t.prefix,n=t.icons.join(`,`),i=new URLSearchParams({icons:n});r+=e+`.json?`+i.toString();break}case`custom`:{let e=t.uri;r+=e.slice(0,1)===`/`?e.slice(1):e;break}default:n(`abort`,400);return}let i=503;Ta(e+r).then(e=>{let t=e.status;if(t!==200){setTimeout(()=>{n(Da(t)?`abort`:`next`,t)});return}return i=501,e.json()}).then(e=>{if(typeof e!=`object`||!e){setTimeout(()=>{e===404?n(`abort`,e):n(`next`,i)});return}setTimeout(()=>{n(`success`,e)})}).catch(()=>{n(`next`,i)})}};function ja(e,t){e.forEach(e=>{let n=e.loaderCallbacks;n&&(e.loaderCallbacks=n.filter(e=>e.id!==t))})}function Ma(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;let t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1,r=e.provider,i=e.prefix;t.forEach(t=>{let a=t.icons,o=a.pending.length;a.pending=a.pending.filter(t=>{if(t.prefix!==i)return!0;let o=t.name;if(e.icons[o])a.loaded.push({provider:r,prefix:i,name:o});else if(e.missing.has(o))a.missing.push({provider:r,prefix:i,name:o});else return n=!0,!0;return!1}),a.pending.length!==o&&(n||ja([e],t.id),t.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),t.abort))})}))}var Na=0;function Pa(e,t,n){let r=Na++,i=ja.bind(null,n,r);if(!t.pending.length)return i;let a={id:r,icons:t,callback:e,abort:i};return n.forEach(e=>{(e.loaderCallbacks||=[]).push(a)}),i}function Fa(e){let t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((e,t)=>e.provider===t.provider?e.prefix===t.prefix?e.name.localeCompare(t.name):e.prefix.localeCompare(t.prefix):e.provider.localeCompare(t.provider));let r={provider:``,prefix:``,name:``};return e.forEach(e=>{if(r.name===e.name&&r.prefix===e.prefix&&r.provider===e.provider)return;r=e;let i=e.provider,a=e.prefix,o=e.name,s=n[i]||(n[i]=Object.create(null)),c=s[a]||(s[a]=Ji(i,a)),l;l=o in c.icons?t.loaded:a===``||c.missing.has(o)?t.missing:t.pending;let u={provider:i,prefix:a,name:o};l.push(u)}),t}function Ia(e,t=!0,n=!1){let r=[];return e.forEach(e=>{let i=typeof e==`string`?Mi(e,t,n):e;i&&r.push(i)}),r}var La={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Ra(e,t,n,r){let i=e.resources.length,a=e.random?Math.floor(Math.random()*i):e.index,o;if(e.random){let t=e.resources.slice(0);for(o=[];t.length>1;){let e=Math.floor(Math.random()*t.length);o.push(t[e]),t=t.slice(0,e).concat(t.slice(e+1))}o=o.concat(t)}else o=e.resources.slice(a).concat(e.resources.slice(0,a));let s=Date.now(),c=`pending`,l=0,u,d=null,f=[],p=[];typeof r==`function`&&p.push(r);function m(){d&&=(clearTimeout(d),null)}function h(){c===`pending`&&(c=`aborted`),m(),f.forEach(e=>{e.status===`pending`&&(e.status=`aborted`)}),f=[]}function g(e,t){t&&(p=[]),typeof e==`function`&&p.push(e)}function _(){return{startTime:s,payload:t,status:c,queriesSent:l,queriesPending:f.length,subscribe:g,abort:h}}function v(){c=`failed`,p.forEach(e=>{e(void 0,u)})}function y(){f.forEach(e=>{e.status===`pending`&&(e.status=`aborted`)}),f=[]}function b(t,n,r){let i=n!==`success`;switch(f=f.filter(e=>e!==t),c){case`pending`:break;case`failed`:if(i||!e.dataAfterTimeout)return;break;default:return}if(n===`abort`){u=r,v();return}if(i){u=r,f.length||(o.length?x():v());return}if(m(),y(),!e.random){let n=e.resources.indexOf(t.resource);n!==-1&&n!==e.index&&(e.index=n)}c=`completed`,p.forEach(e=>{e(r)})}function x(){if(c!==`pending`)return;m();let r=o.shift();if(r===void 0){if(f.length){d=setTimeout(()=>{m(),c===`pending`&&(y(),v())},e.timeout);return}v();return}let i={status:`pending`,resource:r,callback:(e,t)=>{b(i,e,t)}};f.push(i),l++,d=setTimeout(x,e.rotate),n(r,t,i.callback)}return setTimeout(x),_}function za(e){let t={...La,...e},n=[];function r(){n=n.filter(e=>e().status===`pending`)}function i(e,i,a){let o=Ra(t,e,i,(e,t)=>{r(),a&&a(e,t)});return n.push(o),o}function a(e){return n.find(t=>e(t))||null}return{query:i,find:a,setIndex:e=>{t.index=e},getIndex:()=>t.index,cleanup:r}}function Ba(){}var Va=Object.create(null);function Ha(e){if(!Va[e]){let t=wa(e);if(!t)return;let n=za(t);Va[e]={config:t,redundancy:n}}return Va[e]}function Ua(e,t,n){let r,i;if(typeof e==`string`){let t=va(e);if(!t)return n(void 0,424),Ba;i=t.send;let a=Ha(e);a&&(r=a.redundancy)}else{let t=ya(e);if(t){r=za(t);let n=e.resources?e.resources[0]:``,a=va(n);a&&(i=a.send)}}return!r||!i?(n(void 0,424),Ba):r.query(t,i,n)().abort}function Wa(){}function Ga(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,Ma(e)}))}function Ka(e){let t=[],n=[];return e.forEach(e=>{(e.match(ji)?t:n).push(e)}),{valid:t,invalid:n}}function qa(e,t,n){function r(){let n=e.pendingIcons;t.forEach(t=>{n&&n.delete(t),e.icons[t]||e.missing.add(t)})}if(n&&typeof n==`object`)try{if(!Yi(e,n).length){r();return}}catch(e){console.error(e)}r(),Ga(e)}function Ja(e,t){e instanceof Promise?e.then(e=>{t(e)}).catch(()=>{t(null)}):t(e)}function Ya(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;let{provider:t,prefix:n}=e,r=e.iconsToLoad;if(delete e.iconsToLoad,!r||!r.length)return;let i=e.loadIcon;if(e.loadIcons&&(r.length>1||!i)){Ja(e.loadIcons(r,n,t),t=>{qa(e,r,t)});return}if(i){r.forEach(r=>{let a=i(r,n,t);Ja(a,t=>{qa(e,[r],t?{prefix:n,icons:{[r]:t}}:null)})});return}let{valid:a,invalid:o}=Ka(r);if(o.length&&qa(e,o,null),!a.length)return;let s=n.match(ji)?va(t):null;if(!s){qa(e,a,null);return}s.prepare(t,n,a).forEach(n=>{Ua(t,n,t=>{qa(e,n.icons,t)})})}))}var Xa=(e,t)=>{let n=Ia(e,!0,Qi()),r=Fa(n);if(!r.pending.length){let e=!0;return t&&setTimeout(()=>{e&&t(r.loaded,r.missing,r.pending,Wa)}),()=>{e=!1}}let i=Object.create(null),a=[],o,s;return r.pending.forEach(e=>{let{provider:t,prefix:n}=e;if(n===s&&t===o)return;o=t,s=n,a.push(Ji(t,n));let r=i[t]||(i[t]=Object.create(null));r[n]||(r[n]=[])}),r.pending.forEach(e=>{let{provider:t,prefix:n,name:r}=e,a=Ji(t,n),o=a.pendingIcons||=new Set;o.has(r)||(o.add(r),i[t][n].push(r))}),a.forEach(e=>{let t=i[e.provider][e.prefix];t.length&&Ya(e,t)}),t?Pa(t,r,a):Wa};function Za(e,t){let n={...e};for(let e in t){let r=t[e],i=typeof r;e in na?(r===null||r&&(i===`string`||i===`number`))&&(n[e]=r):i===typeof n[e]&&(n[e]=e===`rotate`?r%4:r)}return n}var Qa=/[\s,]+/;function $a(e,t){t.split(Qa).forEach(t=>{switch(t.trim()){case`horizontal`:e.hFlip=!0;break;case`vertical`:e.vFlip=!0;break}})}function eo(e,t=0){let n=e.replace(/^-?[0-9.]*/,``);function r(e){for(;e<0;)e+=4;return e%4}if(n===``){let t=parseInt(e);return isNaN(t)?0:r(t)}else if(n!==e){let t=0;switch(n){case`%`:t=25;break;case`deg`:t=90}if(t){let i=parseFloat(e.slice(0,e.length-n.length));return isNaN(i)?0:(i/=t,i%1==0?r(i):0)}}return t}function to(e,t){let n=e.indexOf(`xlink:`)===-1?``:` xmlns:xlink="http://www.w3.org/1999/xlink"`;for(let e in t)n+=` `+e+`="`+t[e]+`"`;return`<svg xmlns="http://www.w3.org/2000/svg"`+n+`>`+e+`</svg>`}function no(e){return e.replace(/"/g,`'`).replace(/%/g,`%25`).replace(/#/g,`%23`).replace(/</g,`%3C`).replace(/>/g,`%3E`).replace(/\s+/g,` `)}function ro(e){return`data:image/svg+xml,`+no(e)}function io(e){return`url("`+ro(e)+`")`}var ao={...ra,inline:!1},oo={xmlns:`http://www.w3.org/2000/svg`,"xmlns:xlink":`http://www.w3.org/1999/xlink`,"aria-hidden":!0,role:`img`},so={display:`inline-block`},co={"background-color":`currentColor`},lo={"background-color":`transparent`},uo={image:`var(--svg)`,repeat:`no-repeat`,size:`100% 100%`},fo={"-webkit-mask":co,mask:co,background:lo};for(let e in fo){let t=fo[e];for(let n in uo)t[e+`-`+n]=uo[n]}function po(e){return e+(e.match(/^[-0-9.]+$/)?`px`:``)}function mo(e,t){let n=Za(ao,t),r=t.mode||`svg`,i=r===`svg`?{...oo}:{};e.body.indexOf(`xlink:`)===-1&&delete i[`xmlns:xlink`];let a=typeof t.style==`string`?t.style:``;for(let e in t){let r=t[e];if(r===void 0)continue;switch(e){case`icon`:case`style`:case`onLoad`:case`mode`:case`ssr`:break;case`inline`:case`hFlip`:case`vFlip`:n[e]=r===!0||r===`true`||r===1;break;case`flip`:typeof r==`string`&&$a(n,r);break;case`color`:a=a+(a.length>0&&a.trim().slice(-1)!==`;`?`;`:``)+`color: `+r+`; `;break;case`rotate`:typeof r==`string`?n[e]=eo(r):typeof r==`number`&&(n[e]=r);break;case`ariaHidden`:case`aria-hidden`:r!==!0&&r!==`true`&&delete i[`aria-hidden`];break;default:if(e.slice(0,3)===`on:`)break;ao[e]===void 0&&(i[e]=r)}}let o=da(e,n),s=o.attributes;if(n.inline&&(a=`vertical-align: -0.125em; `+a),r===`svg`){Object.assign(i,s),a!==``&&(i.style=a);let e=0,n=t.id;return typeof n==`string`&&(n=n.replace(/-/g,`_`)),{svg:!0,attributes:i,body:ha(o.body,n?()=>n+`ID`+ e++:`iconifySvelte`)}}let{body:c,width:l,height:u}=e,d=r===`mask`||(r===`bg`?!1:c.indexOf(`currentColor`)!==-1),f=to(c,{...s,width:l+``,height:u+``}),p=io(f),m={"--svg":p},h=e=>{let t=s[e];t&&(m[e]=po(t))};h(`width`),h(`height`),Object.assign(m,so,d?co:lo);let g=``;for(let e in m)g+=e+`: `+m[e]+`;`;return i.style=g+a,{svg:!1,attributes:i}}if(Qi(!0),_a(``,Aa),typeof document<`u`&&typeof window<`u`){let e=window;if(e.IconifyPreload!==void 0){let t=e.IconifyPreload,n=`Invalid IconifyPreload syntax.`;typeof t==`object`&&t&&(t instanceof Array?t:[t]).forEach(e=>{try{(typeof e!=`object`||!e||e instanceof Array||typeof e.icons!=`object`||typeof e.prefix!=`string`||!ta(e))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){let t=e.IconifyProviders;if(typeof t==`object`&&t)for(let e in t){let n=`IconifyProviders[`+e+`] is invalid.`;try{let r=t[e];if(typeof r!=`object`||!r||r.resources===void 0)continue;Ca(e,r)||console.error(n)}catch{console.error(n)}}}}function ho(e,t,n,r,i){function a(){t.loading&&=(t.loading.abort(),null)}if(typeof e==`object`&&e&&typeof e.body==`string`)return t.name=``,a(),{data:{...Li,...e}};let o;if(typeof e!=`string`||(o=Mi(e,!1,!0))===null)return a(),null;let s=$i(o);if(!s)return n&&(!t.loading||t.loading.name!==e)&&(a(),t.name=``,t.loading={name:e,abort:Xa([o],r)}),null;a(),t.name!==e&&(t.name=e,i&&!t.destroyed&&setTimeout(()=>{i(e)}));let c=[`iconify`];return o.prefix!==``&&c.push(`iconify--`+o.prefix),o.provider!==``&&c.push(`iconify--`+o.provider),{data:s,classes:c}}function go(e,t){return e?mo({...Li,...e},t):null}var _o=xr(`<svg><!></svg>`),vo=U(`<span></span>`);function yo(e,t){O(t,!0);let n={name:``,loading:null,destroyed:!1},r=Ei(t,[`$$slots`,`$$events`,`$$legacy`]),i=M(!1),a=M(0),o=j(()=>!!t.ssr||H(i)),s=j(()=>(H(a),ho(t.icon,n,H(o),l,t.onload))),c=j(()=>{let e=H(s)?go(H(s).data,r):null;return e&&H(s).classes&&(e.attributes.class=(typeof r.class==`string`?r.class+` `:``)+H(s).classes.join(` `)),e});function l(){jt(a)}ki(()=>{N(i,!0)}),Ai(()=>{n.destroyed=!0,n.loading&&=(n.loading.abort(),null)});var u=W(),d=I(u),f=e=>{var t=W(),n=I(t),r=e=>{var t=_o();pi(t,()=>({...H(c).attributes}));var n=F(t);Br(n,()=>H(c).body,!0),D(t),G(e,t)},i=e=>{var t=vo();pi(t,()=>({...H(c).attributes})),G(e,t)};q(n,e=>{H(c).svg?e(r):e(i,!1)}),G(e,t)};q(d,e=>{H(c)&&e(f)}),G(e,u),k()}var bo=U(`<span> </span>`),xo=U(`<button><!> <!></button>`);function Z(e,t){var n=xo();let r;n.__click=function(...e){t.onclick?.apply(this,e)};var i=F(n);yo(i,{get icon(){return t.icon}});var a=L(i,2),o=e=>{var n=bo(),r=F(n,!0);D(n),z(()=>K(r,t.label)),G(e,n)};q(a,e=>{t.label&&e(o)}),D(n),z(e=>r=Qr(n,1,Kr([t.class||`is-link is-light mr-2`,`button`]),null,r,e),[()=>({disabled:t.disabled})]),G(e,n)}hr([`click`]);var So=[`forEach`,`isDisjointFrom`,`isSubsetOf`,`isSupersetOf`],Co=[`difference`,`intersection`,`symmetricDifference`,`union`],wo=!1,To=class e extends Set{#sources=new Map;#version=M(0);#size=M(0);#update_version=Rn||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#size.v=super.size}wo||this.#init()}#source(e){return Rn===this.#update_version?M(e):Ot(e)}#init(){wo=!0;var t=e.prototype,n=Set.prototype;for(let e of So)t[e]=function(...t){return H(this.#version),n[e].apply(this,t)};for(let r of Co)t[r]=function(...t){H(this.#version);var i=n[r].apply(this,t);return new e(i)}}has(e){var t=super.has(e),n=this.#sources,r=n.get(e);if(r===void 0){if(!t)return H(this.#version),!1;r=this.#source(!0),n.set(e,r)}return H(r),t}add(e){return super.has(e)||(super.add(e),N(this.#size,super.size),Mt(this.#version)),this}delete(e){var t=super.delete(e),n=this.#sources,r=n.get(e);return r!==void 0&&(n.delete(e),N(r,!1)),t&&(N(this.#size,super.size),Mt(this.#version)),t}clear(){if(super.size!==0){super.clear();var e=this.#sources;for(var t of e.values())N(t,!1);e.clear(),N(this.#size,0),Mt(this.#version)}}keys(){return this.values()}values(){return H(this.#version),super.values()}entries(){return H(this.#version),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return H(this.#size)}},Eo=class extends Map{#sources=new Map;#version=M(0);#size=M(0);#update_version=Rn||-1;constructor(e){if(super(),e){for(var[t,n]of e)super.set(t,n);this.#size.v=super.size}}#source(e){return Rn===this.#update_version?M(e):Ot(e)}has(e){var t=this.#sources,n=t.get(e);if(n===void 0)if(super.get(e)!==void 0)n=this.#source(0),t.set(e,n);else return H(this.#version),!1;return H(n),!0}forEach(e,t){this.#read_all(),super.forEach(e,t)}get(e){var t=this.#sources,n=t.get(e);if(n===void 0)if(super.get(e)!==void 0)n=this.#source(0),t.set(e,n);else{H(this.#version);return}return H(n),super.get(e)}set(e,t){var n=this.#sources,r=n.get(e),i=super.get(e),a=super.set(e,t),o=this.#version;if(r===void 0)r=this.#source(0),n.set(e,r),N(this.#size,super.size),Mt(o);else if(i!==t){Mt(r);var s=o.reactions===null?null:new Set(o.reactions);(s===null||!r.reactions?.every(e=>s.has(e)))&&Mt(o)}return a}delete(e){var t=this.#sources,n=t.get(e),r=super.delete(e);return n!==void 0&&(t.delete(e),N(this.#size,super.size),N(n,-1),Mt(this.#version)),r}clear(){if(super.size!==0){super.clear();var e=this.#sources;N(this.#size,0);for(var t of e.values())N(t,-1);Mt(this.#version),e.clear()}}#read_all(){H(this.#version);var e=this.#sources;if(this.#size.v!==e.size){for(var t of super.keys())if(!e.has(t)){var n=this.#source(0);e.set(t,n)}}for([,n]of this.#sources)H(n)}keys(){return H(this.#version),super.keys()}values(){return this.#read_all(),super.values()}entries(){return this.#read_all(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return H(this.#size),super.size}};URLSearchParams,Symbol.iterator;var Do=class{#sources;get sources(){return H(this.#sources)}set sources(e){N(this.#sources,e,!0)}constructor(e){this.#sources=M(P({})),this.sources=e||{}}getImageName(e,t=!1){let n=e.document&&this.sources[e.document.uid]?.images[e.src||e.id]||e.id;return t&&(n=n.split(`.`).slice(0,-1).join(`.`),n.length>=16&&(n=n.slice(0,5)+`...`+n.slice(-10))),n}getSourceName(e){return e===void 0?``:this.sources[e.uid]?.name||e.name||e.uid||``}fetchIIIFNames(e){return new Promise(async(t,n)=>{for(let t of e){if(this.sources[t.uid])continue;fetch(t.src).then(e=>e.json()).then(e=>{if(e.metadata===void 0)return t;let n=Object.fromEntries(e.metadata.map(({label:e,value:t})=>[e.toLowerCase(),t]));n.title===void 0&&(n.title=t.name),n.classmark!==void 0&&(n.title=n.classmark+` `+n.title);let r=e.sequences&&e.sequences[0]?.canvases,i=r&&Object.fromEntries(r.map(e=>{let t=e.label||e.title||e.images&&e.images[0].label||e[`@id`]||e.id;return[e.images&&e.images[0].resource&&e.images[0].resource[`@id`]||e[`@id`]||e.id,t]}));this.sources[t.uid]={name:n.title,metadata:n,images:i}}),await new Promise(e=>setTimeout(e,300))}})}sortImages(e){return e.sort((e,t)=>{let n=this.getSourceName(e.document),r=this.getSourceName(t.document);return n===r?this.getImageName(e).localeCompare(this.getImageName(t)):(n||``).localeCompare(r||``)})}},Oo={sortImages:e=>e,getImageName:e=>e.name||e.id,getSourceName:e=>e?.name||e?.uid||``,fetchIIIFNames:async e=>{}};function ko(){return je(`name_provider`)||Oo}function Ao(e){Me(`name_provider`,e)}function jo(e){return e.map(e=>{let{tsf_url:t,...n}=e;return{...n,distance:e.num+10}})}var Mo=class{#editing;get editing(){return H(this.#editing)}set editing(e){N(this.#editing,e,!0)}#editingCluster;get editingCluster(){return H(this.#editingCluster)}set editingCluster(e){N(this.#editingCluster,e,!0)}#askingCluster;get askingCluster(){return H(this.#askingCluster)}set askingCluster(e){N(this.#askingCluster,e,!0)}#image_selection;get image_selection(){return H(this.#image_selection)}set image_selection(e){N(this.#image_selection,e,!0)}#viewer_sort;get viewer_sort(){return H(this.#viewer_sort)}set viewer_sort(e){N(this.#viewer_sort,e,!0)}#viewer_display;get viewer_display(){return H(this.#viewer_display)}set viewer_display(e){N(this.#viewer_display,e,!0)}#content;get content(){return H(this.#content)}set content(e){N(this.#content,e,!0)}constructor(e,t){this.#editing=M(!1),this.#editingCluster=M(null),this.#askingCluster=M(null),this.#image_selection=M(P(new To)),this.#viewer_sort=M(`id`),this.#viewer_display=M(`grid`),this.#content=M(P({clusters:e.clusters,background_urls:e.background_urls})),this.name_provider=new Do,this.base_url=t||``}select_images(e,t){switch(e){case`all`:this.image_selection=new To(this.content.clusters[this.editingCluster].images.map(e=>e.id));break;case`none`:this.image_selection.clear();break;case`invert`:this.image_selection=new To(this.content.clusters[this.editingCluster].images.filter(e=>!this.image_selection.has(e.id)).map(e=>e.id));break;case`toggle`:t&&(this.image_selection.has(t.id)?this.image_selection.delete(t.id):this.image_selection.add(t.id));break}}ask_cluster(e,t){this.askingCluster={exclude_cluster_id:t,for_action:e}}ask_cluster_choice(e){switch(this.askingCluster?.for_action){case`cluster_merge`:this.merge_clusters(this.askingCluster.exclude_cluster_id,e);break;case`selection_move`:this.move_images(this.askingCluster.exclude_cluster_id,e);break}this.askingCluster=null}merge_clusters(e,t){let n=this.content.clusters[e],r=this.content.clusters[t],i={...n,images:[...n.images,...jo(r.images)]};delete this.content.clusters[t],this.content.clusters[e]=i,this.editingCluster=e}move_images(e,t){let n=this.content.clusters[e],r=jo(n.images.filter(e=>this.image_selection.has(e.id)));n.images=n.images.filter(e=>!this.image_selection.has(e.id));let i;if(t==-1){let e=Math.max(...Object.keys(this.content.clusters).map(Number))+1;i={id:e,name:`Cluster `+e,images:r}}else i={...this.content.clusters[t]},i.images.push(...r);this.content.clusters={...this.content.clusters,[i.id]:i},this.editingCluster=null,this.image_selection.clear(),this.askingCluster=null}};function No(){return je(`editor_state`)}function Po(e){Me(`editor_state`,e)}var Fo=U(`<span class="has-text-danger"> </span>`),Io=U(`<div class="match-exporter"><!> <!></div>`);function Lo(e,t){O(t,!0);let n=M(!1),r=M(null);function i(e){return e?e.toString().replace(/"/g,`""`):``}async function a(){let e=t.iterRows(),n=[];for await(let t of e)n.push(t.map(e=>`"${i(e)}"`).join(`,`));return n.join(`
`)}let o=async()=>{N(n,!0);try{let e=await a(),n=new Blob([e],{type:`text/csv`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=t.filename,i.click()}catch(e){N(r,e.toString(),!0)}finally{N(n,!1)}};var s=Io(),c=F(s);Z(c,{icon:`mdi:download`,onclick:o,get disabled(){return H(n)},label:`Export to CSV`});var l=L(c,2),u=e=>{var t=Fo(),n=F(t,!0);D(t),z(()=>K(n,H(r))),G(e,t)};q(l,e=>{H(r)&&e(u)}),D(s),G(e,s),k()}function Ro(e,t){O(t,!0);let n=ko();async function*r(){let e=new Set;t.clusters.forEach(t=>{t.images.forEach(t=>{Object.keys(t.document?.metadata||{}).forEach(t=>e.add(t)),Object.keys(t.metadata||{}).forEach(t=>e.add(t))})}),yield[`Cluster`,`Cluster Name`,`Image`,`Source`,`Document`,`Document URL`,...Array.from(e).map(e=>(e.charAt(0).toUpperCase()+e.slice(1)).replace(/[^\w\s]/g,``))];for(let r of t.clusters)for(let t of r.images){let i=Array.from(e).map(e=>(t.metadata||t.document?.metadata||{})[e]||``);yield[r.id,r.name,n.getImageName(t),t.src||t.id,n.getSourceName(t.document),t.document?.src||``,...i]}}Lo(e,{iterRows:r,filename:`cluster.csv`}),k()}function zo(e){return typeof e==`function`}function Bo(e){return typeof e==`object`&&!!e}var Vo=[`string`,`number`,`bigint`,`boolean`];function Ho(e){return e==null||Vo.includes(typeof e)?!0:Array.isArray(e)?e.every(e=>Ho(e)):typeof e==`object`?Object.getPrototypeOf(e)===Object.prototype:!1}let Uo=Symbol(`box`),Wo=Symbol(`is-writable`);function Q(e,t){let n=j(e);return t?{[Uo]:!0,[Wo]:!0,get current(){return H(n)},set current(e){t(e)}}:{[Uo]:!0,get current(){return e()}}}function Go(e){return Bo(e)&&Uo in e}function Ko(e){return Go(e)?e:zo(e)?Q(e):qo(e)}function qo(e){let t=M(P(e));return{[Uo]:!0,[Wo]:!0,get current(){return H(t)},set current(e){N(t,e,!0)}}}function Jo(...e){return function(t){for(let n of e){if(!n)continue;if(t.defaultPrevented)return;typeof n==`function`?n.call(this,t):n.current?.call(this,t)}}}var Yo=o(((exports,t)=>{var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,r=/\n/g,i=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,d=`/`,f=`*`,p=``,m=`comment`,h=`declaration`;t.exports=function(e,t){if(typeof e!=`string`)throw TypeError(`First argument must be a string`);if(!e)return[];t||={};var l=1,_=1;function v(e){var t=e.match(r);t&&(l+=t.length);var n=e.lastIndexOf(u);_=~n?e.length-n:_+e.length}function y(){var e={line:l,column:_};return function(t){return t.position=new b(e),w(),t}}function b(e){this.start=e,this.end={line:l,column:_},this.source=t.source}b.prototype.content=e;var x=[];function S(n){var r=Error(t.source+`:`+l+`:`+_+`: `+n);if(r.reason=n,r.filename=t.source,r.line=l,r.column=_,r.source=e,t.silent)x.push(r);else throw r}function C(t){var n=t.exec(e);if(n){var r=n[0];return v(r),e=e.slice(r.length),n}}function w(){C(i)}function ee(e){var t;for(e||=[];t=te();)t!==!1&&e.push(t);return e}function te(){var t=y();if(!(d!=e.charAt(0)||f!=e.charAt(1))){for(var n=2;p!=e.charAt(n)&&(f!=e.charAt(n)||d!=e.charAt(n+1));)++n;if(n+=2,p===e.charAt(n-1))return S(`End of comment missing`);var r=e.slice(2,n-2);return _+=2,v(r),e=e.slice(n),_+=2,t({type:m,comment:r})}}function ne(){var e=y(),t=C(a);if(t){if(te(),!C(o))return S(`property missing ':'`);var r=C(s),i=e({type:h,property:g(t[0].replace(n,p)),value:r?g(r[0].replace(n,p)):p});return C(c),i}}function re(){var e=[];ee(e);for(var t;t=ne();)t!==!1&&(e.push(t),ee(e));return e}return w(),re()};function g(e){return e?e.replace(l,p):p}})),Xo=c(o((exports=>{var t=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.default=r;var n=t(Yo());function r(e,t){var r=null;if(!e||typeof e!=`string`)return r;var i=(0,n.default)(e),a=typeof t==`function`;return i.forEach(function(e){if(e.type===`declaration`){var n=e.property,i=e.value;a?t(n,i,e):i&&(r||={},r[n]=i)}}),r}}))(),1),Zo=Xo.default.default||Xo.default,Qo=/\d/,$o=[`-`,`_`,`/`,`.`];function es(e=``){if(!Qo.test(e))return e!==e.toLowerCase()}function ts(e){let t=[],n=``,r,i;for(let a of e){let e=$o.includes(a);if(e===!0){t.push(n),n=``,r=void 0;continue}let o=es(a);if(i===!1){if(r===!1&&o===!0){t.push(n),n=a,r=o;continue}if(r===!0&&o===!1&&n.length>1){let e=n.at(-1);t.push(n.slice(0,Math.max(0,n.length-1))),n=e+a,r=o;continue}}n+=a,r=o,i=e}return t.push(n),t}function ns(e){return e?ts(e).map(e=>os(e)).join(``):``}function rs(e){return ss(ns(e||``))}function os(e){return e?e[0].toUpperCase()+e.slice(1):``}function ss(e){return e?e[0].toLowerCase()+e.slice(1):``}function cs(e){if(!e)return{};let t={};function n(e,n){if(e.startsWith(`-moz-`)||e.startsWith(`-webkit-`)||e.startsWith(`-ms-`)||e.startsWith(`-o-`)){t[ns(e)]=n;return}if(e.startsWith(`--`)){t[e]=n;return}t[rs(e)]=n}return Zo(e,n),t}function ls(...e){return(...t)=>{for(let n of e)typeof n==`function`&&n(...t)}}function us(e,t){let n=RegExp(e,`g`);return e=>{if(typeof e!=`string`)throw TypeError(`expected an argument of type string, but got ${typeof e}`);return e.match(n)?e.replace(n,t):e}}var ds=us(/[A-Z]/,e=>`-${e.toLowerCase()}`);function fs(e){if(!e||typeof e!=`object`||Array.isArray(e))throw TypeError(`expected an argument of type object, but got ${typeof e}`);return Object.keys(e).map(t=>`${ds(t)}: ${e[t]};`).join(`
`)}function ps(e={}){return fs(e).replace(`
`,` `)}var ms=`onabort.onanimationcancel.onanimationend.onanimationiteration.onanimationstart.onauxclick.onbeforeinput.onbeforetoggle.onblur.oncancel.oncanplay.oncanplaythrough.onchange.onclick.onclose.oncompositionend.oncompositionstart.oncompositionupdate.oncontextlost.oncontextmenu.oncontextrestored.oncopy.oncuechange.oncut.ondblclick.ondrag.ondragend.ondragenter.ondragleave.ondragover.ondragstart.ondrop.ondurationchange.onemptied.onended.onerror.onfocus.onfocusin.onfocusout.onformdata.ongotpointercapture.oninput.oninvalid.onkeydown.onkeypress.onkeyup.onload.onloadeddata.onloadedmetadata.onloadstart.onlostpointercapture.onmousedown.onmouseenter.onmouseleave.onmousemove.onmouseout.onmouseover.onmouseup.onpaste.onpause.onplay.onplaying.onpointercancel.onpointerdown.onpointerenter.onpointerleave.onpointermove.onpointerout.onpointerover.onpointerup.onprogress.onratechange.onreset.onresize.onscroll.onscrollend.onsecuritypolicyviolation.onseeked.onseeking.onselect.onselectionchange.onselectstart.onslotchange.onstalled.onsubmit.onsuspend.ontimeupdate.ontoggle.ontouchcancel.ontouchend.ontouchmove.ontouchstart.ontransitioncancel.ontransitionend.ontransitionrun.ontransitionstart.onvolumechange.onwaiting.onwebkitanimationend.onwebkitanimationiteration.onwebkitanimationstart.onwebkittransitionend.onwheel`.split(`.`);let hs=new Set(ms);function gs(e){return hs.has(e)}function _s(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];if(r){for(let e of Object.keys(r)){let n=t[e],i=r[e],a=typeof n==`function`,o=typeof i==`function`;if(a&&typeof o&&gs(e))t[e]=Jo(n,i);else if(a&&o)t[e]=ls(n,i);else if(e===`class`){let r=Ho(n),a=Ho(i);r&&a?t[e]=Gr(n,i):r?t[e]=Gr(n):a&&(t[e]=Gr(i))}else if(e===`style`){let r=typeof n==`object`,a=typeof i==`object`,o=typeof n==`string`,s=typeof i==`string`;if(r&&a)t[e]={...n,...i};else if(r&&s){let r=cs(i);t[e]={...n,...r}}else if(o&&a)t[e]={...cs(n),...i};else if(o&&s){let r=cs(n),a=cs(i);t[e]={...r,...a}}else r?t[e]=n:a?t[e]=i:o?t[e]=n:s&&(t[e]=i)}else t[e]=i===void 0?n:i}for(let e of Object.getOwnPropertySymbols(r)){let n=t[e],i=r[e];t[e]=i===void 0?n:i}}}return typeof t.style==`object`&&(t.style=ps(t.style).replaceAll(`
`,` `)),t.hidden===!1&&(t.hidden=void 0,delete t.hidden),t.disabled===!1&&(t.disabled=void 0,delete t.disabled),t}function vs(e){R(()=>()=>{e()})}function ys(e){R(()=>Xn(()=>e()))}function bs(e,t){return setTimeout(t,e)}function xs(e){Jn().then(e)}var Ss=1,Cs=9,ws=11;function Ts(e){return Bo(e)&&e.nodeType===Ss&&typeof e.nodeName==`string`}function Es(e){return Bo(e)&&e.nodeType===Cs}function Ds(e){return Bo(e)&&e.constructor?.name===`VisualViewport`}function Os(e){return Bo(e)&&e.nodeType!==void 0}function ks(e){return Os(e)&&e.nodeType===ws&&`host`in e}function As(e,t){if(!e||!t||!Ts(e)||!Ts(t))return!1;let n=t.getRootNode?.();if(e===t||e.contains(t))return!0;if(n&&ks(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function js(e){return Es(e)?e:Ds(e)?e.document:e?.ownerDocument??document}function Ms(e){return ks(e)?Ms(e.host):Es(e)?e.defaultView??window:Ts(e)?e.ownerDocument?.defaultView??window:window}function Ns(e){let t=e.activeElement;for(;t?.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}var Ps=class{element;#root=j(()=>this.element.current?this.element.current.getRootNode()??document:document);get root(){return H(this.#root)}set root(e){N(this.#root,e)}constructor(e){typeof e==`function`?this.element=Q(e):this.element=e}getDocument=()=>js(this.root);getWindow=()=>this.getDocument().defaultView??window;getActiveElement=()=>Ns(this.root);isActiveElement=e=>e===this.getActiveElement();getElementById(e){return this.root.getElementById(e)}querySelector=e=>this.root?this.root.querySelector(e):null;querySelectorAll=e=>this.root?this.root.querySelectorAll(e):[];setTimeout=(e,t)=>this.getWindow().setTimeout(e,t);clearTimeout=e=>this.getWindow().clearTimeout(e)};function Fs(e,t){return{[$n()]:n=>Go(e)?(e.current=n,Xn(()=>t?.(n)),()=>{`isConnected`in n&&n.isConnected||(e.current=null,t?.(null))}):(e(n),Xn(()=>t?.(n)),()=>{`isConnected`in n&&n.isConnected||(e(null),t?.(null))})}}let Is=typeof window<`u`?window:void 0;typeof window<`u`&&window.document,typeof window<`u`&&window.navigator,typeof window<`u`&&window.location;function Ls(e){let t=e.activeElement;for(;t?.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}new class{#document;#subscribe;constructor(e={}){let{window:t=Is,document:n=t?.document}=e;t!==void 0&&(this.#document=n,this.#subscribe=ft(e=>{let n=pr(t,`focusin`,e),r=pr(t,`focusout`,e);return()=>{n(),r()}}))}get current(){return this.#subscribe?.(),this.#document?Ls(this.#document):null}};function Rs(e){return typeof e==`function`}var zs=class{#name;#key;constructor(e){this.#name=e,this.#key=Symbol(e)}get key(){return this.#key}exists(){return Ne(this.#key)}get(){let e=je(this.#key);if(e===void 0)throw Error(`Context "${this.#name}" not found`);return e}getOr(e){let t=je(this.#key);return t===void 0?e:t}set(e){return Me(this.#key,e)}};function Bs(e,t){switch(e){case`post`:R(t);break;case`pre`:rn(t);break}}function Vs(e,t,n,r={}){let{lazy:i=!1}=r,a=!i,o=Array.isArray(e)?[]:void 0;Bs(t,()=>{let t=Array.isArray(e)?e.map(e=>e()):e();if(!a){a=!0,o=t;return}let r=Xn(()=>n(t,o));return o=t,r})}function Hs(e,t,n){let r=an(()=>{let i=!1;Vs(e,t,(e,t)=>{if(i){r();return}let a=n(e,t);return i=!0,a},{lazy:!0})});R(()=>r)}function Us(e,t,n){Vs(e,`post`,t,n)}function Ws(e,t,n){Vs(e,`pre`,t,n)}Us.pre=Ws;function Gs(e,t){Hs(e,`post`,t)}function Ks(e,t){Hs(e,`pre`,t)}Gs.pre=Ks;function qs(e){return Rs(e)?e():e}var Js=class{#size={width:0,height:0};#observed=!1;#options;#node;#window;#width=j(()=>(H(this.#subscribe)?.(),this.getSize().width));#height=j(()=>(H(this.#subscribe)?.(),this.getSize().height));#subscribe=j(()=>{let e=qs(this.#node);if(e)return ft(t=>{if(!this.#window)return;let n=new this.#window.ResizeObserver(e=>{this.#observed=!0;for(let t of e){let e=this.#options.box===`content-box`?t.contentBoxSize:t.borderBoxSize,n=Array.isArray(e)?e:[e];this.#size.width=n.reduce((e,t)=>Math.max(e,t.inlineSize),0),this.#size.height=n.reduce((e,t)=>Math.max(e,t.blockSize),0)}t()});return n.observe(e),()=>{this.#observed=!1,n.disconnect()}})});constructor(e,t={box:`border-box`}){this.#window=t.window??Is,this.#options=t,this.#node=e,this.#size={width:0,height:0}}calculateSize(){let e=qs(this.#node);if(!e||!this.#window)return;let t=e.offsetWidth,n=e.offsetHeight;if(this.#options.box===`border-box`)return{width:t,height:n};let r=this.#window.getComputedStyle(e),i=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),a=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),o=parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),s=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),c=t-i-o,l=n-a-s;return{width:c,height:l}}getSize(){return this.#observed?this.#size:this.calculateSize()??this.#size}get current(){return H(this.#subscribe)?.(),this.getSize()}get width(){return H(this.#width)}get height(){return H(this.#height)}},Ys=class{#previous=M(void 0);constructor(e,t){t!==void 0&&N(this.#previous,t,!0),Us(()=>e(),(e,t)=>{N(this.#previous,t,!0)})}get current(){return H(this.#previous)}};function Xs(e,t){let n,r=null;return(...i)=>new Promise(a=>{r&&r(void 0),r=a,clearTimeout(n),n=setTimeout(async()=>{let t=await e(...i);r&&=(r(t),null)},t)})}function Zs(e,t){let n=0,r=null;return(...i)=>{let a=Date.now();return n&&a-n<t?r??Promise.resolve(void 0):(n=a,r=e(...i),r)}}function Qs(e,t,n={},r){let{lazy:i=!1,once:a=!1,initialValue:o,debounce:s,throttle:c}=n,l=M(P(o)),u=M(!1),d=M(void 0),f=M(P([])),p=()=>{H(f).forEach(e=>e()),N(f,[],!0)},m=e=>{N(f,[...H(f),e],!0)},h=async(e,n,r=!1)=>{try{N(u,!0),N(d,void 0),p();let i=new AbortController;m(()=>i.abort());let a=await t(e,n,{data:H(l),refetching:r,onCleanup:m,signal:i.signal});return N(l,a,!0),a}catch(e){e instanceof DOMException&&e.name===`AbortError`||N(d,e,!0);return}finally{N(u,!1)}},g=s?Xs(h,s):c?Zs(h,c):h,_=Array.isArray(e)?e:[e],v;return r((t,n)=>{a&&v||(v=t,g(Array.isArray(e)?t:t[0],Array.isArray(e)?n:n?.[0]))},{lazy:i}),{get current(){return H(l)},get loading(){return H(u)},get error(){return H(d)},mutate:e=>{N(l,e,!0)},refetch:t=>{let n=_.map(e=>e());return g(Array.isArray(e)?n:n[0],Array.isArray(e)?n:n[0],t??!0)}}}function $s(e,t,n){return Qs(e,t,n,(t,n)=>{let r=Array.isArray(e)?e:[e];Us(()=>r.map(e=>e()),(e,n)=>{t(e,n??[])},n)})}function ec(e,t,n){return Qs(e,t,n,(t,n)=>{let r=Array.isArray(e)?e:[e];Us.pre(()=>r.map(e=>e()),(e,n)=>{t(e,n??[])},n)})}$s.pre=ec;function tc(e){return e?``:void 0}function nc(e){return e?`open`:`closed`}var rc=class{#variant;#prefix;attrs;constructor(e){this.#variant=e.getVariant?e.getVariant():null,this.#prefix=this.#variant?`data-${this.#variant}-`:`data-${e.component}-`,this.getAttr=this.getAttr.bind(this),this.selector=this.selector.bind(this),this.attrs=Object.fromEntries(e.parts.map(e=>[e,this.getAttr(e)]))}getAttr(e,t){return t?`data-${t}-${e}`:`${this.#prefix}${e}`}selector(e,t){return`[${this.getAttr(e,t)}]`}};function ic(e){let t=new rc(e);return{...t.attrs,selector:t.selector,getAttr:t.getAttr}}function ac(e){return window.getComputedStyle(e).getPropertyValue(`direction`)}let oc=[`ArrowDown`,`PageUp`,`Home`],sc=[`ArrowUp`,`PageDown`,`End`];[...oc,...sc];function cc(e=`ltr`,t=`horizontal`){return{horizontal:e===`rtl`?`ArrowLeft`:`ArrowRight`,vertical:`ArrowDown`}[t]}function lc(e=`ltr`,t=`horizontal`){return{horizontal:e===`rtl`?`ArrowRight`:`ArrowLeft`,vertical:`ArrowUp`}[t]}function uc(e=`ltr`,t=`horizontal`){return[`ltr`,`rtl`].includes(e)||(e=`ltr`),[`horizontal`,`vertical`].includes(t)||(t=`horizontal`),{nextKey:cc(e,t),prevKey:lc(e,t)}}let dc=typeof document<`u`,fc=pc();function pc(){return dc&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function mc(e){return e instanceof HTMLElement}function hc(e){return e instanceof Element}function gc(e){return e.matches(`:focus-visible`)}function _c(e){return e!==null}function $(){}function vc(e,t){return t===void 0?`bits-${e}`:`bits-${e}-${t}`}var yc=class{state;#machine;constructor(e,t){this.state=qo(e),this.#machine=t,this.dispatch=this.dispatch.bind(this)}#reducer(e){return this.#machine[this.state.current][e]??this.state.current}dispatch(e){this.state.current=this.#reducer(e)}},bc={mounted:{UNMOUNT:`unmounted`,ANIMATION_OUT:`unmountSuspended`},unmountSuspended:{MOUNT:`mounted`,ANIMATION_END:`unmounted`},unmounted:{MOUNT:`mounted`}},xc=class{opts;#prevAnimationNameState=M(`none`);get prevAnimationNameState(){return H(this.#prevAnimationNameState)}set prevAnimationNameState(e){N(this.#prevAnimationNameState,e,!0)}#styles=M(P({}));get styles(){return H(this.#styles)}set styles(e){N(this.#styles,e,!0)}initialStatus;previousPresent;machine;present;constructor(e){this.opts=e,this.present=this.opts.open,this.initialStatus=e.open.current?`mounted`:`unmounted`,this.previousPresent=new Ys(()=>this.present.current),this.machine=new yc(this.initialStatus,bc),this.handleAnimationEnd=this.handleAnimationEnd.bind(this),this.handleAnimationStart=this.handleAnimationStart.bind(this),Sc(this),Cc(this),wc(this)}handleAnimationEnd(e){if(!this.opts.ref.current)return;let t=Tc(this.opts.ref.current),n=t.includes(e.animationName)||t===`none`;e.target===this.opts.ref.current&&n&&this.machine.dispatch(`ANIMATION_END`)}handleAnimationStart(e){this.opts.ref.current&&e.target===this.opts.ref.current&&(this.prevAnimationNameState=Tc(this.opts.ref.current))}#isPresent=j(()=>[`mounted`,`unmountSuspended`].includes(this.machine.state.current));get isPresent(){return H(this.#isPresent)}set isPresent(e){N(this.#isPresent,e)}};function Sc(e){Us(()=>e.present.current,()=>{if(!e.opts.ref.current||e.present.current===e.previousPresent.current)return;let t=e.prevAnimationNameState,n=Tc(e.opts.ref.current);if(e.present.current)e.machine.dispatch(`MOUNT`);else if(n===`none`||e.styles.display===`none`)e.machine.dispatch(`UNMOUNT`);else{let r=t!==n;e.previousPresent.current&&r?e.machine.dispatch(`ANIMATION_OUT`):e.machine.dispatch(`UNMOUNT`)}})}function Cc(e){Us(()=>e.machine.state.current,()=>{if(!e.opts.ref.current)return;let t=Tc(e.opts.ref.current);e.prevAnimationNameState=e.machine.state.current===`mounted`?t:`none`})}function wc(e){Us(()=>e.opts.ref.current,()=>{if(e.opts.ref.current)return e.styles=getComputedStyle(e.opts.ref.current),ls(pr(e.opts.ref.current,`animationstart`,e.handleAnimationStart),pr(e.opts.ref.current,`animationcancel`,e.handleAnimationEnd),pr(e.opts.ref.current,`animationend`,e.handleAnimationEnd))})}function Tc(e){return e&&getComputedStyle(e).animationName||`none`}function Ec(e,t){O(t,!0);let n=new xc({open:Q(()=>t.open),ref:t.ref});var r=W(),i=I(r),a=e=>{var r=W(),i=I(r);J(i,()=>t.presence??b,()=>({present:n.isPresent})),G(e,r)};q(i,e=>{(t.forceMount||t.open||n.isPresent)&&e(a)}),G(e,r),k()}var Dc=class{#opts;#currentFrame=void 0;#isRunning=!1;constructor(e){this.#opts=e,vs(()=>this.#cleanup())}#cleanup(){this.#currentFrame&&=(window.cancelAnimationFrame(this.#currentFrame),void 0),this.#isRunning=!1}run(e){if(this.#isRunning)return;this.#cleanup(),this.#isRunning=!0;let t=this.#opts.ref.current;if(!t){this.#isRunning=!1;return}if(typeof t.getAnimations!=`function`){this.#executeCallback(e);return}this.#currentFrame=window.requestAnimationFrame(()=>{let n=t.getAnimations();if(n.length===0){this.#executeCallback(e);return}Promise.allSettled(n.map(e=>e.finished)).then(()=>{this.#executeCallback(e)})})}#executeCallback(e){let t=()=>{e(),this.#isRunning=!1};this.#opts.afterTick?xs(t):t()}},Oc=class{#opts;#enabled;#afterAnimations;constructor(e){this.#opts=e,this.#enabled=e.enabled??!0,this.#afterAnimations=new Dc({ref:this.#opts.ref,afterTick:this.#opts.open}),Us([()=>this.#opts.open.current],([e])=>{this.#enabled&&this.#afterAnimations.run(()=>{e===this.#opts.open.current&&this.#opts.onComplete()})})}},kc=ic({component:`dialog`,parts:[`content`,`trigger`,`overlay`,`title`,`description`,`close`,`cancel`,`action`]}),Ac=new zs(`Dialog.Root | AlertDialog.Root`),jc=class e{static create(t){return Ac.set(new e(t))}opts;#triggerNode=M(null);get triggerNode(){return H(this.#triggerNode)}set triggerNode(e){N(this.#triggerNode,e,!0)}#contentNode=M(null);get contentNode(){return H(this.#contentNode)}set contentNode(e){N(this.#contentNode,e,!0)}#descriptionNode=M(null);get descriptionNode(){return H(this.#descriptionNode)}set descriptionNode(e){N(this.#descriptionNode,e,!0)}#contentId=M(void 0);get contentId(){return H(this.#contentId)}set contentId(e){N(this.#contentId,e,!0)}#titleId=M(void 0);get titleId(){return H(this.#titleId)}set titleId(e){N(this.#titleId,e,!0)}#triggerId=M(void 0);get triggerId(){return H(this.#triggerId)}set triggerId(e){N(this.#triggerId,e,!0)}#descriptionId=M(void 0);get descriptionId(){return H(this.#descriptionId)}set descriptionId(e){N(this.#descriptionId,e,!0)}#cancelNode=M(null);get cancelNode(){return H(this.#cancelNode)}set cancelNode(e){N(this.#cancelNode,e,!0)}constructor(e){this.opts=e,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),new Oc({ref:Q(()=>this.contentNode),open:this.opts.open,enabled:!0,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}getBitsAttr=e=>kc.getAttr(e,this.opts.variant.current);#sharedProps=j(()=>({"data-state":nc(this.opts.open.current)}));get sharedProps(){return H(this.#sharedProps)}set sharedProps(e){N(this.#sharedProps,e)}},Mc=class e{static create(t){return new e(t,Ac.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=Fs(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||(e.key===` `||e.key===`Enter`)&&(e.preventDefault(),this.root.handleClose())}#props=j(()=>({id:this.opts.id.current,[this.root.getBitsAttr(this.opts.variant.current)]:``,onclick:this.onclick,onkeydown:this.onkeydown,disabled:this.opts.disabled.current?!0:void 0,tabindex:0,...this.root.sharedProps,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}},Nc=class e{static create(t){return new e(t,Ac.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.root.titleId=this.opts.id.current,this.attachment=Fs(this.opts.ref),Us.pre(()=>this.opts.id.current,e=>{this.root.titleId=e})}#props=j(()=>({id:this.opts.id.current,role:`heading`,"aria-level":this.opts.level.current,[this.root.getBitsAttr(`title`)]:``,...this.root.sharedProps,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}},Pc=class e{static create(t){return new e(t,Ac.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=Fs(this.opts.ref,e=>{this.root.contentNode=e,this.root.contentId=e?.id})}#snippetProps=j(()=>({open:this.root.opts.open.current}));get snippetProps(){return H(this.#snippetProps)}set snippetProps(e){N(this.#snippetProps,e)}#props=j(()=>({id:this.opts.id.current,role:this.root.opts.variant.current===`alert-dialog`?`alertdialog`:`dialog`,"aria-modal":`true`,"aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.getBitsAttr(`content`)]:``,style:{pointerEvents:`auto`,outline:this.root.opts.variant.current===`alert-dialog`?`none`:void 0},tabindex:this.root.opts.variant.current===`alert-dialog`?-1:void 0,...this.root.sharedProps,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}},Fc=class e{static create(t){return new e(t,Ac.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=Fs(this.opts.ref)}#snippetProps=j(()=>({open:this.root.opts.open.current}));get snippetProps(){return H(this.#snippetProps)}set snippetProps(e){N(this.#snippetProps,e)}#props=j(()=>({id:this.opts.id.current,[this.root.getBitsAttr(`overlay`)]:``,style:{pointerEvents:`auto`},...this.root.sharedProps,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}},Ic=U(`<div><!></div>`);function Lc(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`ref`,15,null),a=X(t,`level`,3,2),o=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`id`,`ref`,`child`,`children`,`level`]),s=Nc.create({id:Q(()=>r()),level:Q(()=>a()),ref:Q(()=>i(),e=>i(e))}),c=j(()=>_s(o,s.props));var l=W(),u=I(l),d=e=>{var n=W(),r=I(n);J(r,()=>t.child,()=>({props:H(c)})),G(e,n)},f=e=>{var n=Ic();pi(n,()=>({...H(c)}));var r=F(n);J(r,()=>t.children??b),D(n),G(e,n)};q(u,e=>{t.child?e(d):e(f,!1)}),G(e,l),k()}function Rc(e,t){var n=W(),r=I(n);kr(r,()=>t.children,e=>{var n=W(),r=I(n);J(r,()=>t.children??b),G(e,n)}),G(e,n)}let zc=new zs(`BitsConfig`);function Bc(){let e=new Vc(null,{});return zc.getOr(e).opts}var Vc=class{opts;constructor(e,t){let n=Hc(e,t);this.opts={defaultPortalTo:n(e=>e.defaultPortalTo),defaultLocale:n(e=>e.defaultLocale)}}};function Hc(e,t){return n=>Q(()=>{let r=n(t)?.current;if(r!==void 0)return r;if(e!==null)return n(e.opts)?.current})}function Uc(e,t){return n=>{let r=Bc();return Q(()=>{let i=n();if(i!==void 0)return i;let a=e(r).current;return a===void 0?t:a})}}let Wc=Uc(e=>e.defaultPortalTo,`body`);function Gc(e,t){O(t,!0);let n=Wc(()=>t.to),r=Pe(),i=j(a);function a(){if(!dc||t.disabled)return null;let e=null;return e=typeof n.current==`string`?document.querySelector(n.current):n.current,e}let o;function s(){o&&=(Or(o),null)}Us([()=>H(i),()=>t.disabled],([e,n])=>{if(!e||n){s();return}return o=wr(Rc,{target:e,props:{children:t.children},context:r}),()=>{s()}});var c=W(),l=I(c),u=e=>{var n=W(),r=I(n);J(r,()=>t.children??b),G(e,n)};q(l,e=>{t.disabled&&e(u)}),G(e,c),k()}function Kc(e,t=500){let n=null,r=(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)};return r.destroy=()=>{n!==null&&(clearTimeout(n),n=null)},r}function qc(e,t){return e===t||e.contains(t)}function Jc(e){return e?.ownerDocument??document}function Yc(e,t){let{clientX:n,clientY:r}=e,i=t.getBoundingClientRect();return n<i.left||n>i.right||r<i.top||r>i.bottom}globalThis.bitsDismissableLayers??=new Map;var Xc=class e{static create(t){return new e(t)}opts;#interactOutsideProp;#behaviorType;#interceptedEvents={pointerdown:!1};#isResponsibleLayer=!1;#isFocusInsideDOMTree=!1;#documentObj=void 0;#onFocusOutside;#unsubClickListener=$;constructor(e){this.opts=e,this.#behaviorType=e.interactOutsideBehavior,this.#interactOutsideProp=e.onInteractOutside,this.#onFocusOutside=e.onFocusOutside,R(()=>{this.#documentObj=Jc(this.opts.ref.current)});let t=$,n=()=>{this.#resetState(),globalThis.bitsDismissableLayers.delete(this),this.#handleInteractOutside.destroy(),t()};Us([()=>this.opts.enabled.current,()=>this.opts.ref.current],()=>{if(!(!this.opts.enabled.current||!this.opts.ref.current))return bs(1,()=>{this.opts.ref.current&&(globalThis.bitsDismissableLayers.set(this,this.#behaviorType),t(),t=this.#addEventListeners())}),n}),vs(()=>{this.#resetState.destroy(),globalThis.bitsDismissableLayers.delete(this),this.#handleInteractOutside.destroy(),this.#unsubClickListener(),t()})}#handleFocus=e=>{e.defaultPrevented||this.opts.ref.current&&xs(()=>{!this.opts.ref.current||this.#isTargetWithinLayer(e.target)||e.target&&!this.#isFocusInsideDOMTree&&this.#onFocusOutside.current?.(e)})};#addEventListeners(){return ls(pr(this.#documentObj,`pointerdown`,ls(this.#markInterceptedEvent,this.#markResponsibleLayer),{capture:!0}),pr(this.#documentObj,`pointerdown`,ls(this.#markNonInterceptedEvent,this.#handleInteractOutside)),pr(this.#documentObj,`focusin`,this.#handleFocus))}#handleDismiss=e=>{let t=e;t.defaultPrevented&&(t=el(e)),this.#interactOutsideProp.current(e)};#handleInteractOutside=Kc(e=>{if(!this.opts.ref.current){this.#unsubClickListener();return}let t=this.opts.isValidEvent.current(e,this.opts.ref.current)||$c(e,this.opts.ref.current);if(!this.#isResponsibleLayer||this.#isAnyEventIntercepted()||!t){this.#unsubClickListener();return}let n=e;if(n.defaultPrevented&&(n=el(n)),this.#behaviorType.current!==`close`&&this.#behaviorType.current!==`defer-otherwise-close`){this.#unsubClickListener();return}e.pointerType===`touch`?(this.#unsubClickListener(),this.#unsubClickListener=pr(this.#documentObj,`click`,this.#handleDismiss,{once:!0})):this.#interactOutsideProp.current(n)},10);#markInterceptedEvent=e=>{this.#interceptedEvents[e.type]=!0};#markNonInterceptedEvent=e=>{this.#interceptedEvents[e.type]=!1};#markResponsibleLayer=()=>{this.opts.ref.current&&(this.#isResponsibleLayer=Qc(this.opts.ref.current))};#isTargetWithinLayer=e=>this.opts.ref.current?qc(this.opts.ref.current,e):!1;#resetState=Kc(()=>{for(let e in this.#interceptedEvents)this.#interceptedEvents[e]=!1;this.#isResponsibleLayer=!1},20);#isAnyEventIntercepted(){return Object.values(this.#interceptedEvents).some(Boolean)}#onfocuscapture=()=>{this.#isFocusInsideDOMTree=!0};#onblurcapture=()=>{this.#isFocusInsideDOMTree=!1};props={onfocuscapture:this.#onfocuscapture,onblurcapture:this.#onblurcapture}};function Zc(e=[...globalThis.bitsDismissableLayers]){return e.findLast(([e,{current:t}])=>t===`close`||t===`ignore`)}function Qc(e){let t=[...globalThis.bitsDismissableLayers],n=Zc(t);if(n)return n[0].opts.ref.current===e;let[r]=t[0];return r.opts.ref.current===e}function $c(e,t){if(`button`in e&&e.button>0)return!1;let n=e.target;return hc(n)?Jc(n).documentElement.contains(n)&&!qc(t,n)&&Yc(e,t):!1}function el(e){let t=e.currentTarget,n=e.target,r;r=e instanceof PointerEvent?new PointerEvent(e.type,e):new PointerEvent(`pointerdown`,e);let i=!1;return new Proxy(r,{get:(r,a)=>a===`currentTarget`?t:a===`target`?n:a===`preventDefault`?()=>{i=!0,typeof r.preventDefault==`function`&&r.preventDefault()}:a===`defaultPrevented`?i:a in r?r[a]:e[a]})}function tl(e,t){O(t,!0);let n=X(t,`interactOutsideBehavior`,3,`close`),r=X(t,`onInteractOutside`,3,$),i=X(t,`onFocusOutside`,3,$),a=X(t,`isValidEvent`,3,()=>!1),o=Xc.create({id:Q(()=>t.id),interactOutsideBehavior:Q(()=>n()),onInteractOutside:Q(()=>r()),enabled:Q(()=>t.enabled),onFocusOutside:Q(()=>i()),isValidEvent:Q(()=>a()),ref:t.ref});var s=W(),c=I(s);J(c,()=>t.children??b,()=>({props:o.props})),G(e,s),k()}globalThis.bitsEscapeLayers??=new Map;var nl=class e{static create(t){return new e(t)}opts;domContext;constructor(e){this.opts=e,this.domContext=new Ps(this.opts.ref);let t=$;Us(()=>e.enabled.current,n=>(n&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=this.#addEventListener()),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}#addEventListener=()=>pr(this.domContext.getDocument(),`keydown`,this.#onkeydown,{passive:!1});#onkeydown=e=>{if(e.key!==`Escape`||!rl(this))return;let t=new KeyboardEvent(e.type,e);e.preventDefault();let n=this.opts.escapeKeydownBehavior.current;n!==`close`&&n!==`defer-otherwise-close`||this.opts.onEscapeKeydown.current(t)}};function rl(e){let t=[...globalThis.bitsEscapeLayers],n=t.findLast(([e,{current:t}])=>t===`close`||t===`ignore`);if(n)return n[0]===e;let[r]=t[0];return r===e}function il(e,t){O(t,!0);let n=X(t,`escapeKeydownBehavior`,3,`close`),r=X(t,`onEscapeKeydown`,3,$);nl.create({escapeKeydownBehavior:Q(()=>n()),onEscapeKeydown:Q(()=>r()),enabled:Q(()=>t.enabled),ref:t.ref});var i=W(),a=I(i);J(a,()=>t.children??b),G(e,i),k()}var al=class e{static instance;#scopeStack=qo([]);#focusHistory=new WeakMap;#preFocusHistory=new WeakMap;static getInstance(){return this.instance||=new e,this.instance}register(e){let t=this.getActive();t&&t!==e&&t.pause();let n=document.activeElement;n&&n!==document.body&&this.#preFocusHistory.set(e,n),this.#scopeStack.current=this.#scopeStack.current.filter(t=>t!==e),this.#scopeStack.current.unshift(e)}unregister(e){this.#scopeStack.current=this.#scopeStack.current.filter(t=>t!==e);let t=this.getActive();t&&t.resume()}getActive(){return this.#scopeStack.current[0]}setFocusMemory(e,t){this.#focusHistory.set(e,t)}getFocusMemory(e){return this.#focusHistory.get(e)}isActiveScope(e){return this.getActive()===e}setPreFocusMemory(e,t){this.#preFocusHistory.set(e,t)}getPreFocusMemory(e){return this.#preFocusHistory.get(e)}clearPreFocusMemory(e){this.#preFocusHistory.delete(e)}},ol=[`input:not([inert])`,`select:not([inert])`,`textarea:not([inert])`,`a[href]:not([inert])`,`button:not([inert])`,`[tabindex]:not(slot):not([inert])`,`audio[controls]:not([inert])`,`video[controls]:not([inert])`,`[contenteditable]:not([contenteditable="false"]):not([inert])`,`details>summary:first-of-type:not([inert])`,`details:not([inert])`],sl=ol.join(`,`),cl=typeof Element>`u`,ll=cl?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ul=!cl&&Element.prototype.getRootNode?function(e){return e?.getRootNode?.call(e)}:function(e){return e?.ownerDocument},dl=function e(t,n){n===void 0&&(n=!0);var r=t?.getAttribute?.call(t,`inert`);return r===``||r===`true`||n&&t&&e(t.parentNode)},fl=function(e){var t=e?.getAttribute?.call(e,`contenteditable`);return t===``||t===`true`},pl=function(e,t,n){if(dl(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(sl));return t&&ll.call(e,sl)&&r.unshift(e),r=r.filter(n),r},ml=function e(t,n,r){for(var i=[],a=Array.from(t);a.length;){var o=a.shift();if(!dl(o,!1))if(o.tagName===`SLOT`){var s=o.assignedElements(),c=s.length?s:o.children,l=e(c,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:o,candidates:l})}else{ll.call(o,sl)&&r.filter(o)&&(n||!t.includes(o))&&i.push(o);var u=o.shadowRoot||typeof r.getShadowRoot==`function`&&r.getShadowRoot(o),d=!dl(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(u&&d){var f=e(u===!0?o.children:u.children,!0,r);r.flatten?i.push.apply(i,f):i.push({scopeParent:o,candidates:f})}else a.unshift.apply(a,o.children)}}return i},hl=function(e){return!isNaN(parseInt(e.getAttribute(`tabindex`),10))},gl=function(e){if(!e)throw Error(`No node provided`);return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||fl(e))&&!hl(e)?0:e.tabIndex},_l=function(e,t){var n=gl(e);return n<0&&t&&!hl(e)?0:n},vl=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},yl=function(e){return e.tagName===`INPUT`},bl=function(e){return yl(e)&&e.type===`hidden`},xl=function(e){return e.tagName===`DETAILS`&&Array.prototype.slice.apply(e.children).some(function(e){return e.tagName===`SUMMARY`})},Sl=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},Cl=function(e){if(!e.name)return!0;var t=e.form||ul(e),n=function(e){return t.querySelectorAll(`input[type="radio"][name="`+e+`"]`)},r;if(typeof window<`u`&&window.CSS!==void 0&&typeof window.CSS.escape==`function`)r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(e){return console.error(`Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s`,e.message),!1}var i=Sl(r,e.form);return!i||i===e},wl=function(e){return yl(e)&&e.type===`radio`},Tl=function(e){return wl(e)&&!Cl(e)},El=function(e){var t=e&&ul(e),n=t?.host,r=!1;if(t&&t!==e){var i,a,o;for(r=!!((i=n)!=null&&(a=i.ownerDocument)!=null&&a.contains(n)||e!=null&&(o=e.ownerDocument)!=null&&o.contains(e));!r&&n;){var s,c;t=ul(n),n=t?.host,r=!!((s=n)!=null&&(c=s.ownerDocument)!=null&&c.contains(n))}}return r},Dl=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return n===0&&r===0},Ol=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if(getComputedStyle(e).visibility===`hidden`)return!0;var i=ll.call(e,`details>summary:first-of-type`)?e.parentElement:e;if(ll.call(i,`details:not([open]) *`))return!0;if(!n||n===`full`||n===`legacy-full`){if(typeof r==`function`){for(var a=e;e;){var o=e.parentElement,s=ul(e);if(o&&!o.shadowRoot&&r(o)===!0)return Dl(e);e=e.assignedSlot?e.assignedSlot:!o&&s!==e.ownerDocument?s.host:o}e=a}if(El(e))return!e.getClientRects().length;if(n!==`legacy-full`)return!0}else if(n===`non-zero-area`)return Dl(e);return!1},kl=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName===`FIELDSET`&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if(r.tagName===`LEGEND`)return ll.call(t,`fieldset[disabled] *`)?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},Al=function(e,t){return!(t.disabled||dl(t)||bl(t)||Ol(t,e)||xl(t)||kl(t))},jl=function(e,t){return!(Tl(t)||gl(t)<0||!Al(e,t))},Ml=function(e){var t=parseInt(e.getAttribute(`tabindex`),10);return!!(isNaN(t)||t>=0)},Nl=function e(t){var n=[],r=[];return t.forEach(function(t,i){var a=!!t.scopeParent,o=a?t.scopeParent:t,s=_l(o,a),c=a?e(t.candidates):o;s===0?a?n.push.apply(n,c):n.push(o):r.push({documentOrder:i,tabIndex:s,item:t,isScope:a,content:c})}),r.sort(vl).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(n)},Pl=function(e,t){t||={};var n=t.getShadowRoot?ml([e],t.includeContainer,{filter:jl.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Ml}):pl(e,t.includeContainer,jl.bind(null,t));return Nl(n)},Fl=function(e,t){return t||={},t.getShadowRoot?ml([e],t.includeContainer,{filter:Al.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):pl(e,t.includeContainer,Al.bind(null,t))},Il=ol.concat(`iframe`).join(`,`),Ll=function(e,t){if(t||={},!e)throw Error(`No node provided`);return ll.call(e,Il)===!1?!1:Al(t,e)},Rl=class e{#paused=!1;#container=null;#manager=al.getInstance();#cleanupFns=[];#opts;constructor(e){this.#opts=e}get paused(){return this.#paused}pause(){this.#paused=!0}resume(){this.#paused=!1}#cleanup(){for(let e of this.#cleanupFns)e();this.#cleanupFns=[]}mount(e){this.#container&&this.unmount(),this.#container=e,this.#manager.register(this),this.#setupEventListeners(),this.#handleOpenAutoFocus()}unmount(){this.#container&&=(this.#cleanup(),this.#handleCloseAutoFocus(),this.#manager.unregister(this),this.#manager.clearPreFocusMemory(this),null)}#handleOpenAutoFocus(){if(!this.#container)return;let e=new CustomEvent(`focusScope.onOpenAutoFocus`,{bubbles:!1,cancelable:!0});this.#opts.onOpenAutoFocus.current(e),e.defaultPrevented||requestAnimationFrame(()=>{if(!this.#container)return;let e=this.#getFirstTabbable();e?(e.focus(),this.#manager.setFocusMemory(this,e)):this.#container.focus()})}#handleCloseAutoFocus(){let e=new CustomEvent(`focusScope.onCloseAutoFocus`,{bubbles:!1,cancelable:!0});if(this.#opts.onCloseAutoFocus.current?.(e),!e.defaultPrevented){let e=this.#manager.getPreFocusMemory(this);if(e&&document.contains(e))try{e.focus()}catch{document.body.focus()}}}#setupEventListeners(){if(!this.#container||!this.#opts.trap.current)return;let e=this.#container,t=e.ownerDocument;this.#cleanupFns.push(pr(t,`focusin`,t=>{if(this.#paused||!this.#manager.isActiveScope(this))return;let n=t.target;if(n)if(e.contains(n))this.#manager.setFocusMemory(this,n);else{let n=this.#manager.getFocusMemory(this);if(n&&e.contains(n)&&Ll(n))t.preventDefault(),n.focus();else{let t=this.#getFirstTabbable(),n=this.#getAllFocusables()[0];(t||n||e).focus()}}},{capture:!0}),pr(e,`keydown`,e=>{if(!this.#opts.loop||this.#paused||e.key!==`Tab`||!this.#manager.isActiveScope(this))return;let n=this.#getTabbables();if(n.length<2)return;let r=n[0],i=n[n.length-1];!e.shiftKey&&t.activeElement===i?(e.preventDefault(),r.focus()):e.shiftKey&&t.activeElement===r&&(e.preventDefault(),i.focus())}));let n=new MutationObserver(()=>{let t=this.#manager.getFocusMemory(this);if(t&&!e.contains(t)){let t=this.#getFirstTabbable(),n=this.#getAllFocusables()[0],r=t||n;r?(r.focus(),this.#manager.setFocusMemory(this,r)):e.focus()}});n.observe(e,{childList:!0,subtree:!0}),this.#cleanupFns.push(()=>n.disconnect())}#getTabbables(){return this.#container?Pl(this.#container,{includeContainer:!1,getShadowRoot:!0}):[]}#getFirstTabbable(){return this.#getTabbables()[0]||null}#getAllFocusables(){return this.#container?Fl(this.#container,{includeContainer:!1,getShadowRoot:!0}):[]}static use(t){let n=null;return Us([()=>t.ref.current,()=>t.enabled.current],([r,i])=>{r&&i?(n||=new e(t),n.mount(r)):n&&=(n.unmount(),null)}),vs(()=>{n?.unmount()}),{get props(){return{tabindex:-1}}}}};function zl(e,t){O(t,!0);let n=X(t,`enabled`,3,!1),r=X(t,`trapFocus`,3,!1),i=X(t,`loop`,3,!1),a=X(t,`onCloseAutoFocus`,3,$),o=X(t,`onOpenAutoFocus`,3,$),s=Rl.use({enabled:Q(()=>n()),trap:Q(()=>r()),loop:i(),onCloseAutoFocus:Q(()=>a()),onOpenAutoFocus:Q(()=>o()),ref:t.ref});var c=W(),l=I(c);J(l,()=>t.focusScope??b,()=>({props:s.props})),G(e,c),k()}globalThis.bitsTextSelectionLayers??=new Map;var Bl=class e{static create(t){return new e(t)}opts;domContext;#unsubSelectionLock=$;constructor(e){this.opts=e,this.domContext=new Ps(e.ref);let t=$;Us(()=>this.opts.enabled.current,e=>(e&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=this.#addEventListeners()),()=>{t(),this.#resetSelectionLock(),globalThis.bitsTextSelectionLayers.delete(this)}))}#addEventListeners(){return ls(pr(this.domContext.getDocument(),`pointerdown`,this.#pointerdown),pr(this.domContext.getDocument(),`pointerup`,Jo(this.#resetSelectionLock,this.opts.onPointerUp.current)))}#pointerdown=e=>{let t=this.opts.ref.current,n=e.target;!mc(t)||!mc(n)||!this.opts.enabled.current||!Wl(this)||!As(t,n)||(this.opts.onPointerDown.current(e),!e.defaultPrevented&&(this.#unsubSelectionLock=Hl(t,this.domContext.getDocument().body)))};#resetSelectionLock=()=>{this.#unsubSelectionLock(),this.#unsubSelectionLock=$}},Vl=e=>e.style.userSelect||e.style.webkitUserSelect;function Hl(e,t){let n=Vl(t),r=Vl(e);return Ul(t,`none`),Ul(e,`text`),()=>{Ul(t,n),Ul(e,r)}}function Ul(e,t){e.style.userSelect=t,e.style.webkitUserSelect=t}function Wl(e){let t=[...globalThis.bitsTextSelectionLayers];if(!t.length)return!1;let n=t.at(-1);return n?n[0]===e:!1}function Gl(e,t){O(t,!0);let n=X(t,`preventOverflowTextSelection`,3,!0),r=X(t,`onPointerDown`,3,$),i=X(t,`onPointerUp`,3,$);Bl.create({id:Q(()=>t.id),onPointerDown:Q(()=>r()),onPointerUp:Q(()=>i()),enabled:Q(()=>t.enabled&&n()),ref:t.ref});var a=W(),o=I(a);J(o,()=>t.children??b),G(e,a),k()}globalThis.bitsIdCounter??={current:0};function Kl(e=`bits`){return globalThis.bitsIdCounter.current++,`${e}-${globalThis.bitsIdCounter.current}`}var ql=class{#factory;#subscribers=0;#state=M();#scope;constructor(e){this.#factory=e}#dispose(){--this.#subscribers,this.#scope&&this.#subscribers<=0&&(this.#scope(),N(this.#state,void 0),this.#scope=void 0)}get(...e){return this.#subscribers+=1,H(this.#state)===void 0&&(this.#scope=an(()=>{N(this.#state,this.#factory(...e),!0)})),R(()=>()=>{this.#dispose()}),H(this.#state)}},Jl=new Eo,Yl=M(null),Xl=null,Zl=null,Ql=!1,$l=Q(()=>{for(let e of Jl.values())if(e)return!0;return!1}),eu=null,tu=new ql(()=>{function e(){document.body.setAttribute(`style`,H(Yl)??``),document.body.style.removeProperty(`--scrollbar-width`),fc&&Xl?.(),N(Yl,null)}function t(){Zl!==null&&(window.clearTimeout(Zl),Zl=null)}function n(e,n){t(),Ql=!0,eu=Date.now();let r=eu,i=()=>{Zl=null,eu===r&&(ru(Jl)?Ql=!1:(Ql=!1,n()))},a=e===null?24:e;Zl=window.setTimeout(i,a)}function r(){H(Yl)===null&&Jl.size===0&&!Ql&&N(Yl,document.body.getAttribute(`style`),!0)}return Us(()=>$l.current,()=>{if(!$l.current)return;r(),Ql=!1;let e=getComputedStyle(document.body),t=window.innerWidth-document.documentElement.clientWidth,n={padding:Number.parseInt(e.paddingRight??`0`,10)+t,margin:Number.parseInt(e.marginRight??`0`,10)};t>0&&(document.body.style.paddingRight=`${n.padding}px`,document.body.style.marginRight=`${n.margin}px`,document.body.style.setProperty(`--scrollbar-width`,`${t}px`),document.body.style.overflow=`hidden`),fc&&(Xl=pr(document,`touchmove`,e=>{e.target===document.documentElement&&(e.touches.length>1||e.preventDefault())},{passive:!1})),xs(()=>{document.body.style.pointerEvents=`none`,document.body.style.overflow=`hidden`})}),vs(()=>()=>{Xl?.()}),{get lockMap(){return Jl},resetBodyStyle:e,scheduleCleanupIfNoNewLocks:n,cancelPendingCleanup:t,ensureInitialStyleCaptured:r}}),nu=class{#id=Kl();#initialState;#restoreScrollDelay=()=>null;#countState;locked;constructor(e,t=()=>null){this.#initialState=e,this.#restoreScrollDelay=t,this.#countState=tu.get(),this.#countState&&(this.#countState.cancelPendingCleanup(),this.#countState.ensureInitialStyleCaptured(),this.#countState.lockMap.set(this.#id,this.#initialState??!1),this.locked=Q(()=>this.#countState.lockMap.get(this.#id)??!1,e=>this.#countState.lockMap.set(this.#id,e)),vs(()=>{if(this.#countState.lockMap.delete(this.#id),ru(this.#countState.lockMap))return;let e=this.#restoreScrollDelay();this.#countState.scheduleCleanupIfNoNewLocks(e,()=>{this.#countState.resetBodyStyle()})}))}};function ru(e){for(let[t,n]of e)if(n)return!0;return!1}function iu(e,t){O(t,!0);let n=X(t,`preventScroll`,3,!0),r=X(t,`restoreScrollDelay`,3,null);n()&&new nu(n(),()=>r()),k()}function au({forceMount:e,present:t,open:n}){return(e||t)&&n}var ou=U(`<div><!></div>`);function su(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`forceMount`,3,!1),a=X(t,`ref`,15,null),o=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`id`,`forceMount`,`child`,`children`,`ref`]),s=Fc.create({id:Q(()=>r()),ref:Q(()=>a(),e=>a(e))}),c=j(()=>_s(o,s.props));{let n=e=>{var n=W(),r=I(n),i=e=>{var n=W(),r=I(n);{let e=j(()=>({props:_s(H(c)),...s.snippetProps}));J(r,()=>t.child,()=>H(e))}G(e,n)},a=e=>{var n=ou();pi(n,e=>({...e}),[()=>_s(H(c))]);var r=F(n);J(r,()=>t.children??b,()=>s.snippetProps),D(n),G(e,n)};q(r,e=>{t.child?e(i):e(a,!1)}),G(e,n)},r=j(()=>s.root.opts.open.current||i());Ec(e,{get open(){return H(r)},get ref(){return s.opts.ref},presence:n,$$slots:{presence:!0}})}k()}var cu=[`top`,`right`,`bottom`,`left`],lu=Math.min,uu=Math.max,du=Math.round,fu=Math.floor,pu=e=>({x:e,y:e}),mu={left:`right`,right:`left`,bottom:`top`,top:`bottom`},hu={start:`end`,end:`start`};function gu(e,t,n){return uu(e,lu(t,n))}function _u(e,t){return typeof e==`function`?e(t):e}function vu(e){return e.split(`-`)[0]}function yu(e){return e.split(`-`)[1]}function bu(e){return e===`x`?`y`:`x`}function xu(e){return e===`y`?`height`:`width`}var Su=new Set([`top`,`bottom`]);function Cu(e){return Su.has(vu(e))?`y`:`x`}function wu(e){return bu(Cu(e))}function Tu(e,t,n){n===void 0&&(n=!1);let r=yu(e),i=wu(e),a=xu(i),o=i===`x`?r===(n?`end`:`start`)?`right`:`left`:r===`start`?`bottom`:`top`;return t.reference[a]>t.floating[a]&&(o=Pu(o)),[o,Pu(o)]}function Eu(e){let t=Pu(e);return[Du(e),t,Du(t)]}function Du(e){return e.replace(/start|end/g,e=>hu[e])}var Ou=[`left`,`right`],ku=[`right`,`left`],Au=[`top`,`bottom`],ju=[`bottom`,`top`];function Mu(e,t,n){switch(e){case`top`:case`bottom`:return n?t?ku:Ou:t?Ou:ku;case`left`:case`right`:return t?Au:ju;default:return[]}}function Nu(e,t,n,r){let i=yu(e),a=Mu(vu(e),n===`start`,r);return i&&(a=a.map(e=>e+`-`+i),t&&(a=a.concat(a.map(Du)))),a}function Pu(e){return e.replace(/left|right|bottom|top/g,e=>mu[e])}function Fu(e){return{top:0,right:0,bottom:0,left:0,...e}}function Iu(e){return typeof e==`number`?{top:e,right:e,bottom:e,left:e}:Fu(e)}function Lu(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ru(e,t,n){let{reference:r,floating:i}=e,a=Cu(t),o=wu(t),s=xu(o),c=vu(t),l=a===`y`,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2,p;switch(c){case`top`:p={x:u,y:r.y-i.height};break;case`bottom`:p={x:u,y:r.y+r.height};break;case`right`:p={x:r.x+r.width,y:d};break;case`left`:p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(yu(t)){case`start`:p[o]-=f*(n&&l?-1:1);break;case`end`:p[o]+=f*(n&&l?-1:1);break}return p}var zu=async(e,t,n)=>{let{placement:r=`bottom`,strategy:i=`absolute`,middleware:a=[],platform:o}=n,s=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t)),l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=Ru(l,r,c),f=r,p={},m=0;for(let n=0;n<s.length;n++){let{name:a,fn:h}=s[n],{x:g,y:_,data:v,reset:y}=await h({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:e,floating:t}});u=g??u,d=_??d,p={...p,[a]:{...p[a],...v}},y&&m<=50&&(m++,typeof y==`object`&&(y.placement&&(f=y.placement),y.rects&&(l=y.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):y.rects),{x:u,y:d}=Ru(l,f,c)),n=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function Bu(e,t){t===void 0&&(t={});let{x:n,y:r,platform:i,rects:a,elements:o,strategy:s}=e,{boundary:c=`clippingAncestors`,rootBoundary:l=`viewport`,elementContext:u=`floating`,altBoundary:d=!1,padding:f=0}=_u(t,e),p=Iu(f),m=o[d?u===`floating`?`reference`:`floating`:u],h=Lu(await i.getClippingRect({element:await(i.isElement==null?void 0:i.isElement(m))??!0?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:l,strategy:s})),g=u===`floating`?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),v=await(i.isElement==null?void 0:i.isElement(_))&&await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1},y=Lu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:_,strategy:s}):g);return{top:(h.top-y.top+p.top)/v.y,bottom:(y.bottom-h.bottom+p.bottom)/v.y,left:(h.left-y.left+p.left)/v.x,right:(y.right-h.right+p.right)/v.x}}var Vu=e=>({name:`arrow`,options:e,async fn(t){let{x:n,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=_u(e,t)||{};if(l==null)return{};let d=Iu(u),f={x:n,y:r},p=wu(i),m=xu(p),h=await o.getDimensions(l),g=p===`y`,_=g?`top`:`left`,v=g?`bottom`:`right`,y=g?`clientHeight`:`clientWidth`,b=a.reference[m]+a.reference[p]-f[p]-a.floating[m],x=f[p]-a.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l)),C=S?S[y]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=s.floating[y]||a.floating[m]);let w=b/2-x/2,ee=C/2-h[m]/2-1,te=lu(d[_],ee),ne=lu(d[v],ee),re=te,ie=C-h[m]-ne,ae=C/2-h[m]/2+w,oe=gu(re,ae,ie),se=!c.arrow&&yu(i)!=null&&ae!==oe&&a.reference[m]/2-(ae<re?te:ne)-h[m]/2<0,ce=se?ae<re?ae-re:ae-ie:0;return{[p]:f[p]+ce,data:{[p]:oe,centerOffset:ae-oe-ce,...se&&{alignmentOffset:ce}},reset:se}}}),Hu=function(e){return e===void 0&&(e={}),{name:`flip`,options:e,async fn(t){var n;let{placement:r,middlewareData:i,rects:a,initialPlacement:o,platform:s,elements:c}=t,{mainAxis:l=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f=`bestFit`,fallbackAxisSideDirection:p=`none`,flipAlignment:m=!0,...h}=_u(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};let g=vu(r),_=Cu(o),v=vu(o)===o,y=await(s.isRTL==null?void 0:s.isRTL(c.floating)),b=d||(v||!m?[Pu(o)]:Eu(o)),x=p!==`none`;!d&&x&&b.push(...Nu(o,m,p,y));let S=[o,...b],C=await Bu(t,h),w=[],ee=i.flip?.overflows||[];if(l&&w.push(C[g]),u){let e=Tu(r,a,y);w.push(C[e[0]],C[e[1]])}if(ee=[...ee,{placement:r,overflows:w}],!w.every(e=>e<=0)){let e=(i.flip?.index||0)+1,t=S[e];if(t&&(!(u===`alignment`&&_!==Cu(t))||ee.every(e=>Cu(e.placement)===_?e.overflows[0]>0:!0)))return{data:{index:e,overflows:ee},reset:{placement:t}};let n=ee.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0]?.placement;if(!n)switch(f){case`bestFit`:{let e=ee.filter(e=>{if(x){let t=Cu(e.placement);return t===_||t===`y`}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0]?.[0];e&&(n=e);break}case`initialPlacement`:n=o;break}if(r!==n)return{reset:{placement:n}}}return{}}}};function Uu(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Wu(e){return cu.some(t=>e[t]>=0)}var Gu=function(e){return e===void 0&&(e={}),{name:`hide`,options:e,async fn(t){let{rects:n}=t,{strategy:r=`referenceHidden`,...i}=_u(e,t);switch(r){case`referenceHidden`:{let e=await Bu(t,{...i,elementContext:`reference`}),r=Uu(e,n.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:Wu(r)}}}case`escaped`:{let e=await Bu(t,{...i,altBoundary:!0}),r=Uu(e,n.floating);return{data:{escapedOffsets:r,escaped:Wu(r)}}}default:return{}}}}},Ku=new Set([`left`,`top`]);async function qu(e,t){let{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=vu(n),s=yu(n),c=Cu(n)===`y`,l=Ku.has(o)?-1:1,u=a&&c?-1:1,d=_u(t,e),{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d==`number`?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof m==`number`&&(p=s===`end`?m*-1:m),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}var Ju=function(e){return e===void 0&&(e=0),{name:`offset`,options:e,async fn(t){var n;let{x:r,y:i,placement:a,middlewareData:o}=t,s=await qu(t,e);return a===o.offset?.placement&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:r+s.x,y:i+s.y,data:{...s,placement:a}}}}},Yu=function(e){return e===void 0&&(e={}),{name:`shift`,options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=_u(e,t),l={x:n,y:r},u=await Bu(t,c),d=Cu(vu(i)),f=bu(d),p=l[f],m=l[d];if(a){let e=f===`y`?`top`:`left`,t=f===`y`?`bottom`:`right`,n=p+u[e],r=p-u[t];p=gu(n,p,r)}if(o){let e=d===`y`?`top`:`left`,t=d===`y`?`bottom`:`right`,n=m+u[e],r=m-u[t];m=gu(n,m,r)}let h=s.fn({...t,[f]:p,[d]:m});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[f]:a,[d]:o}}}}}},Xu=function(e){return e===void 0&&(e={}),{options:e,fn(t){let{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=_u(e,t),u={x:n,y:r},d=Cu(i),f=bu(d),p=u[f],m=u[d],h=_u(s,t),g=typeof h==`number`?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(c){let e=f===`y`?`height`:`width`,t=a.reference[f]-a.floating[e]+g.mainAxis,n=a.reference[f]+a.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(l){let e=f===`y`?`width`:`height`,t=Ku.has(vu(i)),n=a.reference[d]-a.floating[e]+(t&&o.offset?.[d]||0)+(t?0:g.crossAxis),r=a.reference[d]+a.reference[e]+(t?0:o.offset?.[d]||0)-(t?g.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[f]:p,[d]:m}}}},Zu=function(e){return e===void 0&&(e={}),{name:`size`,options:e,async fn(t){var n,r;let{placement:i,rects:a,platform:o,elements:s}=t,{apply:c=()=>{},...l}=_u(e,t),u=await Bu(t,l),d=vu(i),f=yu(i),p=Cu(i)===`y`,{width:m,height:h}=a.floating,g,_;d===`top`||d===`bottom`?(g=d,_=f===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?`start`:`end`)?`left`:`right`):(_=d,g=f===`end`?`top`:`bottom`);let v=h-u.top-u.bottom,y=m-u.left-u.right,b=lu(h-u[g],v),x=lu(m-u[_],y),S=!t.middlewareData.shift,C=b,w=x;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(w=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=v),S&&!f){let e=uu(u.left,0),t=uu(u.right,0),n=uu(u.top,0),r=uu(u.bottom,0);p?w=m-2*(e!==0||t!==0?e+t:uu(u.left,u.right)):C=h-2*(n!==0||r!==0?n+r:uu(u.top,u.bottom))}await c({...t,availableWidth:w,availableHeight:C});let ee=await o.getDimensions(s.floating);return m!==ee.width||h!==ee.height?{reset:{rects:!0}}:{}}}};function Qu(){return typeof window<`u`}function $u(e){return nd(e)?(e.nodeName||``).toLowerCase():`#document`}function ed(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function td(e){return((nd(e)?e.ownerDocument:e.document)||window.document)?.documentElement}function nd(e){return Qu()?e instanceof Node||e instanceof ed(e).Node:!1}function rd(e){return Qu()?e instanceof Element||e instanceof ed(e).Element:!1}function id(e){return Qu()?e instanceof HTMLElement||e instanceof ed(e).HTMLElement:!1}function ad(e){return!Qu()||typeof ShadowRoot>`u`?!1:e instanceof ShadowRoot||e instanceof ed(e).ShadowRoot}var od=new Set([`inline`,`contents`]);function sd(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=bd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!od.has(i)}var cd=new Set([`table`,`td`,`th`]);function ld(e){return cd.has($u(e))}var ud=[`:popover-open`,`:modal`];function dd(e){return ud.some(t=>{try{return e.matches(t)}catch{return!1}})}var fd=[`transform`,`translate`,`scale`,`rotate`,`perspective`],pd=[`transform`,`translate`,`scale`,`rotate`,`perspective`,`filter`],md=[`paint`,`layout`,`strict`,`content`];function hd(e){let t=_d(),n=rd(e)?bd(e):e;return fd.some(e=>n[e]?n[e]!==`none`:!1)||(n.containerType?n.containerType!==`normal`:!1)||!t&&(n.backdropFilter?n.backdropFilter!==`none`:!1)||!t&&(n.filter?n.filter!==`none`:!1)||pd.some(e=>(n.willChange||``).includes(e))||md.some(e=>(n.contain||``).includes(e))}function gd(e){let t=Sd(e);for(;id(t)&&!yd(t);){if(hd(t))return t;if(dd(t))return null;t=Sd(t)}return null}function _d(){return typeof CSS>`u`||!CSS.supports?!1:CSS.supports(`-webkit-backdrop-filter`,`none`)}var vd=new Set([`html`,`body`,`#document`]);function yd(e){return vd.has($u(e))}function bd(e){return ed(e).getComputedStyle(e)}function xd(e){return rd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Sd(e){if($u(e)===`html`)return e;let t=e.assignedSlot||e.parentNode||ad(e)&&e.host||td(e);return ad(t)?t.host:t}function Cd(e){let t=Sd(e);return yd(t)?e.ownerDocument?e.ownerDocument.body:e.body:id(t)&&sd(t)?t:Cd(t)}function wd(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=!0);let r=Cd(e),i=r===e.ownerDocument?.body,a=ed(r);if(i){let e=Td(a);return t.concat(a,a.visualViewport||[],sd(r)?r:[],e&&n?wd(e):[])}return t.concat(r,wd(r,[],n))}function Td(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ed(e){let t=bd(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=id(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=du(n)!==a||du(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function Dd(e){return rd(e)?e:e.contextElement}function Od(e){let t=Dd(e);if(!id(t))return pu(1);let n=t.getBoundingClientRect(),{width:r,height:i,$:a}=Ed(t),o=(a?du(n.width):n.width)/r,s=(a?du(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}var kd=pu(0);function Ad(e){let t=ed(e);return!_d()||!t.visualViewport?kd:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function jd(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ed(e)?!1:t}function Md(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);let i=e.getBoundingClientRect(),a=Dd(e),o=pu(1);t&&(r?rd(r)&&(o=Od(r)):o=Od(e));let s=jd(a,n,r)?Ad(a):pu(0),c=(i.left+s.x)/o.x,l=(i.top+s.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(a){let e=ed(a),t=r&&rd(r)?ed(r):r,n=e,i=Td(n);for(;i&&r&&t!==n;){let e=Od(i),t=i.getBoundingClientRect(),r=bd(i),a=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,u*=e.x,d*=e.y,c+=a,l+=o,n=ed(i),i=Td(n)}}return Lu({width:u,height:d,x:c,y:l})}function Nd(e,t){let n=xd(e).scrollLeft;return t?t.left+n:Md(td(e)).left+n}function Pd(e,t){let n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Nd(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function Fd(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e,a=i===`fixed`,o=td(r),s=t?dd(t.floating):!1;if(r===o||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=pu(1),u=pu(0),d=id(r);if((d||!d&&!a)&&(($u(r)!==`body`||sd(o))&&(c=xd(r)),id(r))){let e=Md(r);l=Od(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}let f=o&&!d&&!a?Pd(o,c):pu(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function Id(e){return Array.from(e.getClientRects())}function Ld(e){let t=td(e),n=xd(e),r=e.ownerDocument.body,i=uu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=uu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),o=-n.scrollLeft+Nd(e),s=-n.scrollTop;return bd(r).direction===`rtl`&&(o+=uu(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}var Rd=25;function zd(e,t){let n=ed(e),r=td(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,c=0;if(i){a=i.width,o=i.height;let e=_d();(!e||e&&t===`fixed`)&&(s=i.offsetLeft,c=i.offsetTop)}let l=Nd(r);if(l<=0){let e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i=e.compatMode===`CSS1Compat`&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-i);o<=Rd&&(a-=o)}else l<=Rd&&(a+=l);return{width:a,height:o,x:s,y:c}}var Bd=new Set([`absolute`,`fixed`]);function Vd(e,t){let n=Md(e,!0,t===`fixed`),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=id(e)?Od(e):pu(1),o=e.clientWidth*a.x,s=e.clientHeight*a.y,c=i*a.x,l=r*a.y;return{width:o,height:s,x:c,y:l}}function Hd(e,t,n){let r;if(t===`viewport`)r=zd(e,n);else if(t===`document`)r=Ld(td(e));else if(rd(t))r=Vd(t,n);else{let n=Ad(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Lu(r)}function Ud(e,t){let n=Sd(e);return n===t||!rd(n)||yd(n)?!1:bd(n).position===`fixed`||Ud(n,t)}function Wd(e,t){let n=t.get(e);if(n)return n;let r=wd(e,[],!1).filter(e=>rd(e)&&$u(e)!==`body`),i=null,a=bd(e).position===`fixed`,o=a?Sd(e):e;for(;rd(o)&&!yd(o);){let t=bd(o),n=hd(o);!n&&t.position===`fixed`&&(i=null),(a?!n&&!i:!n&&t.position===`static`&&i&&Bd.has(i.position)||sd(o)&&!n&&Ud(e,o))?r=r.filter(e=>e!==o):i=t,o=Sd(o)}return t.set(e,r),r}function Gd(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,a=[...n===`clippingAncestors`?dd(t)?[]:Wd(t,this._c):[].concat(n),r],o=a[0],s=a.reduce((e,n)=>{let r=Hd(t,n,i);return e.top=uu(r.top,e.top),e.right=lu(r.right,e.right),e.bottom=lu(r.bottom,e.bottom),e.left=uu(r.left,e.left),e},Hd(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function Kd(e){let{width:t,height:n}=Ed(e);return{width:t,height:n}}function qd(e,t,n){let r=id(t),i=td(t),a=n===`fixed`,o=Md(e,!0,a,t),s={scrollLeft:0,scrollTop:0},c=pu(0);function l(){c.x=Nd(i)}if(r||!r&&!a)if(($u(t)!==`body`||sd(i))&&(s=xd(t)),r){let e=Md(t,!0,a,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&l();a&&!r&&i&&l();let u=i&&!r&&!a?Pd(i,s):pu(0),d=o.left+s.scrollLeft-c.x-u.x,f=o.top+s.scrollTop-c.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Jd(e){return bd(e).position===`static`}function Yd(e,t){if(!id(e)||bd(e).position===`fixed`)return null;if(t)return t(e);let n=e.offsetParent;return td(e)===n&&(n=n.ownerDocument.body),n}function Xd(e,t){let n=ed(e);if(dd(e))return n;if(!id(e)){let t=Sd(e);for(;t&&!yd(t);){if(rd(t)&&!Jd(t))return t;t=Sd(t)}return n}let r=Yd(e,t);for(;r&&ld(r)&&Jd(r);)r=Yd(r,t);return r&&yd(r)&&Jd(r)&&!hd(r)?n:r||gd(e)||n}var Zd=async function(e){let t=this.getOffsetParent||Xd,n=this.getDimensions,r=await n(e.floating);return{reference:qd(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Qd(e){return bd(e).direction===`rtl`}var $d={convertOffsetParentRelativeRectToViewportRelativeRect:Fd,getDocumentElement:td,getClippingRect:Gd,getOffsetParent:Xd,getElementRects:Zd,getClientRects:Id,getDimensions:Kd,getScale:Od,isElement:rd,isRTL:Qd};function ef(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function tf(e,t){let n=null,r,i=td(e);function a(){var e;clearTimeout(r),(e=n)==null||e.disconnect(),n=null}function o(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();let l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=l;if(s||t(),!f||!p)return;let m=fu(d),h=fu(i.clientWidth-(u+f)),g=fu(i.clientHeight-(d+p)),_=fu(u),v={rootMargin:-m+`px `+-h+`px `+-g+`px `+-_+`px`,threshold:uu(0,lu(1,c))||1},y=!0;function b(t){let n=t[0].intersectionRatio;if(n!==c){if(!y)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}n===1&&!ef(l,e.getBoundingClientRect())&&o(),y=!1}try{n=new IntersectionObserver(b,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,v)}n.observe(e)}return o(!0),a}function nf(e,t,n,r){r===void 0&&(r={});let{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver==`function`,layoutShift:s=typeof IntersectionObserver==`function`,animationFrame:c=!1}=r,l=Dd(e),u=i||a?[...l?wd(l):[],...wd(t)]:[];u.forEach(e=>{i&&e.addEventListener(`scroll`,n,{passive:!0}),a&&e.addEventListener(`resize`,n)});let d=l&&s?tf(l,n):null,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;(e=p)==null||e.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let m,h=c?Md(e):null;c&&g();function g(){let t=Md(e);h&&!ef(h,t)&&n(),h=t,m=requestAnimationFrame(g)}return n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener(`scroll`,n),a&&e.removeEventListener(`resize`,n)}),d?.(),(e=p)==null||e.disconnect(),p=null,c&&cancelAnimationFrame(m)}}var rf=Ju,af=Yu,sf=Hu,cf=Zu,lf=Gu,uf=Vu,df=Xu,ff=(e,t,n)=>{let r=new Map,i={platform:$d,...n},a={...i.platform,_c:r};return zu(e,t,{...i,platform:a})};function pf(e){return typeof e==`function`?e():e}function mf(e){return typeof window>`u`?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function hf(e,t){let n=mf(e);return Math.round(t*n)/n}function gf(e){return{[`--bits-${e}-content-transform-origin`]:`var(--bits-floating-transform-origin)`,[`--bits-${e}-content-available-width`]:`var(--bits-floating-available-width)`,[`--bits-${e}-content-available-height`]:`var(--bits-floating-available-height)`,[`--bits-${e}-anchor-width`]:`var(--bits-floating-anchor-width)`,[`--bits-${e}-anchor-height`]:`var(--bits-floating-anchor-height)`}}function _f(e){let t=e.whileElementsMounted,n=j(()=>pf(e.open)??!0),r=j(()=>pf(e.middleware)),i=j(()=>pf(e.transform)??!0),a=j(()=>pf(e.placement)??`bottom`),o=j(()=>pf(e.strategy)??`absolute`),s=j(()=>pf(e.sideOffset)??0),c=j(()=>pf(e.alignOffset)??0),l=e.reference,u=M(0),d=M(0),f=qo(null),p=M(P(H(o))),m=M(P(H(a))),h=M(P({})),g=M(!1),_=j(()=>{let e=f.current?hf(f.current,H(u)):H(u),t=f.current?hf(f.current,H(d)):H(d);return H(i)?{position:H(p),left:`0`,top:`0`,transform:`translate(${e}px, ${t}px)`,...f.current&&mf(f.current)>=1.5&&{willChange:`transform`}}:{position:H(p),left:`${e}px`,top:`${t}px`}}),v;function y(){l.current===null||f.current===null||ff(l.current,f.current,{middleware:H(r),placement:H(a),strategy:H(o)}).then(e=>{if(!H(n)&&H(u)!==0&&H(d)!==0){let t=Math.max(Math.abs(H(s)),Math.abs(H(c)),15);if(e.x<=t&&e.y<=t)return}N(u,e.x,!0),N(d,e.y,!0),N(p,e.strategy,!0),N(m,e.placement,!0),N(h,e.middlewareData,!0),N(g,!0)})}function b(){typeof v==`function`&&(v(),v=void 0)}function x(){if(b(),t===void 0){y();return}l.current===null||f.current===null||(v=t(l.current,f.current,y))}function S(){H(n)||N(g,!1)}return R(y),R(x),R(S),R(()=>b),{floating:f,reference:l,get strategy(){return H(p)},get placement(){return H(m)},get middlewareData(){return H(h)},get isPositioned(){return H(g)},get floatingStyles(){return H(_)},get update(){return y}}}var vf={top:`bottom`,right:`left`,bottom:`top`,left:`right`},yf=new zs(`Floating.Root`),bf=new zs(`Floating.Content`),xf=new zs(`Floating.Root`),Sf=class e{static create(t=!1){return t?xf.set(new e):yf.set(new e)}anchorNode=qo(null);customAnchorNode=qo(null);triggerNode=qo(null);constructor(){R(()=>{this.customAnchorNode.current?typeof this.customAnchorNode.current==`string`?this.anchorNode.current=document.querySelector(this.customAnchorNode.current):this.anchorNode.current=this.customAnchorNode.current:this.anchorNode.current=this.triggerNode.current})}},Cf=class e{static create(t,n=!1){return n?bf.set(new e(t,xf.get())):bf.set(new e(t,yf.get()))}opts;root;contentRef=qo(null);wrapperRef=qo(null);arrowRef=qo(null);contentAttachment=Fs(this.contentRef);wrapperAttachment=Fs(this.wrapperRef);arrowAttachment=Fs(this.arrowRef);arrowId=qo(Kl());#transformedStyle=j(()=>{if(typeof this.opts.style==`string`)return cs(this.opts.style);if(!this.opts.style)return{}});#updatePositionStrategy=void 0;#arrowSize=new Js(()=>this.arrowRef.current??void 0);#arrowWidth=j(()=>this.#arrowSize?.width??0);#arrowHeight=j(()=>this.#arrowSize?.height??0);#desiredPlacement=j(()=>this.opts.side?.current+(this.opts.align.current===`center`?``:`-${this.opts.align.current}`));#boundary=j(()=>Array.isArray(this.opts.collisionBoundary.current)?this.opts.collisionBoundary.current:[this.opts.collisionBoundary.current]);#hasExplicitBoundaries=j(()=>H(this.#boundary).length>0);get hasExplicitBoundaries(){return H(this.#hasExplicitBoundaries)}set hasExplicitBoundaries(e){N(this.#hasExplicitBoundaries,e)}#detectOverflowOptions=j(()=>({padding:this.opts.collisionPadding.current,boundary:H(this.#boundary).filter(_c),altBoundary:this.hasExplicitBoundaries}));get detectOverflowOptions(){return H(this.#detectOverflowOptions)}set detectOverflowOptions(e){N(this.#detectOverflowOptions,e)}#availableWidth=M(void 0);#availableHeight=M(void 0);#anchorWidth=M(void 0);#anchorHeight=M(void 0);#middleware=j(()=>[rf({mainAxis:this.opts.sideOffset.current+H(this.#arrowHeight),alignmentAxis:this.opts.alignOffset.current}),this.opts.avoidCollisions.current&&af({mainAxis:!0,crossAxis:!1,limiter:this.opts.sticky.current===`partial`?df():void 0,...this.detectOverflowOptions}),this.opts.avoidCollisions.current&&sf({...this.detectOverflowOptions}),cf({...this.detectOverflowOptions,apply:({rects:e,availableWidth:t,availableHeight:n})=>{let{width:r,height:i}=e.reference;N(this.#availableWidth,t,!0),N(this.#availableHeight,n,!0),N(this.#anchorWidth,r,!0),N(this.#anchorHeight,i,!0)}}),this.arrowRef.current&&uf({element:this.arrowRef.current,padding:this.opts.arrowPadding.current}),Tf({arrowWidth:H(this.#arrowWidth),arrowHeight:H(this.#arrowHeight)}),this.opts.hideWhenDetached.current&&lf({strategy:`referenceHidden`,...this.detectOverflowOptions})].filter(Boolean));get middleware(){return H(this.#middleware)}set middleware(e){N(this.#middleware,e)}floating;#placedSide=j(()=>Df(this.floating.placement));get placedSide(){return H(this.#placedSide)}set placedSide(e){N(this.#placedSide,e)}#placedAlign=j(()=>Of(this.floating.placement));get placedAlign(){return H(this.#placedAlign)}set placedAlign(e){N(this.#placedAlign,e)}#arrowX=j(()=>this.floating.middlewareData.arrow?.x??0);get arrowX(){return H(this.#arrowX)}set arrowX(e){N(this.#arrowX,e)}#arrowY=j(()=>this.floating.middlewareData.arrow?.y??0);get arrowY(){return H(this.#arrowY)}set arrowY(e){N(this.#arrowY,e)}#cannotCenterArrow=j(()=>this.floating.middlewareData.arrow?.centerOffset!==0);get cannotCenterArrow(){return H(this.#cannotCenterArrow)}set cannotCenterArrow(e){N(this.#cannotCenterArrow,e)}#contentZIndex=M();get contentZIndex(){return H(this.#contentZIndex)}set contentZIndex(e){N(this.#contentZIndex,e,!0)}#arrowBaseSide=j(()=>vf[this.placedSide]);get arrowBaseSide(){return H(this.#arrowBaseSide)}set arrowBaseSide(e){N(this.#arrowBaseSide,e)}#wrapperProps=j(()=>({id:this.opts.wrapperId.current,"data-bits-floating-content-wrapper":``,style:{...this.floating.floatingStyles,transform:this.floating.isPositioned?this.floating.floatingStyles.transform:`translate(0, -200%)`,minWidth:`max-content`,zIndex:this.contentZIndex,"--bits-floating-transform-origin":`${this.floating.middlewareData.transformOrigin?.x} ${this.floating.middlewareData.transformOrigin?.y}`,"--bits-floating-available-width":`${H(this.#availableWidth)}px`,"--bits-floating-available-height":`${H(this.#availableHeight)}px`,"--bits-floating-anchor-width":`${H(this.#anchorWidth)}px`,"--bits-floating-anchor-height":`${H(this.#anchorHeight)}px`,...this.floating.middlewareData.hide?.referenceHidden&&{visibility:`hidden`,"pointer-events":`none`},...H(this.#transformedStyle)},dir:this.opts.dir.current,...this.wrapperAttachment}));get wrapperProps(){return H(this.#wrapperProps)}set wrapperProps(e){N(this.#wrapperProps,e)}#props=j(()=>({"data-side":this.placedSide,"data-align":this.placedAlign,style:ps({...H(this.#transformedStyle)}),...this.contentAttachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}#arrowStyle=j(()=>({position:`absolute`,left:this.arrowX?`${this.arrowX}px`:void 0,top:this.arrowY?`${this.arrowY}px`:void 0,[this.arrowBaseSide]:0,"transform-origin":{top:``,right:`0 0`,bottom:`center 0`,left:`100% 0`}[this.placedSide],transform:{top:`translateY(100%)`,right:`translateY(50%) rotate(90deg) translateX(-50%)`,bottom:`rotate(180deg)`,left:`translateY(50%) rotate(-90deg) translateX(50%)`}[this.placedSide],visibility:this.cannotCenterArrow?`hidden`:void 0}));get arrowStyle(){return H(this.#arrowStyle)}set arrowStyle(e){N(this.#arrowStyle,e)}constructor(e,t){this.opts=e,this.root=t,e.customAnchor&&(this.root.customAnchorNode.current=e.customAnchor.current),Us(()=>e.customAnchor.current,e=>{this.root.customAnchorNode.current=e}),this.floating=_f({strategy:()=>this.opts.strategy.current,placement:()=>H(this.#desiredPlacement),middleware:()=>this.middleware,reference:this.root.anchorNode,whileElementsMounted:(...e)=>nf(...e,{animationFrame:this.#updatePositionStrategy?.current===`always`}),open:()=>this.opts.enabled.current,sideOffset:()=>this.opts.sideOffset.current,alignOffset:()=>this.opts.alignOffset.current}),R(()=>{this.floating.isPositioned&&this.opts.onPlaced?.current()}),Us(()=>this.contentRef.current,e=>{e&&(this.contentZIndex=Ms(e).getComputedStyle(e).zIndex)}),R(()=>{this.floating.floating.current=this.wrapperRef.current})}},wf=class e{static create(t,n=!1){return n?new e(t,xf.get()):new e(t,yf.get())}opts;root;constructor(e,t){this.opts=e,this.root=t,e.virtualEl&&e.virtualEl.current?t.triggerNode=Ko(e.virtualEl.current):t.triggerNode=e.ref}};function Tf(e){return{name:`transformOrigin`,options:e,fn(t){let{placement:n,rects:r,middlewareData:i}=t,a=i.arrow?.centerOffset!==0,o=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[c,l]=Ef(n),u={start:`0%`,center:`50%`,end:`100%`}[l],d=(i.arrow?.x??0)+o/2,f=(i.arrow?.y??0)+s/2,p=``,m=``;return c===`bottom`?(p=a?u:`${d}px`,m=`${-s}px`):c===`top`?(p=a?u:`${d}px`,m=`${r.floating.height+s}px`):c===`right`?(p=`${-s}px`,m=a?u:`${f}px`):c===`left`&&(p=`${r.floating.width+s}px`,m=a?u:`${f}px`),{data:{x:p,y:m}}}}}function Ef(e){let[t,n=`center`]=e.split(`-`);return[t,n]}function Df(e){return Ef(e)[0]}function Of(e){return Ef(e)[1]}function kf(e,t){O(t,!0);let n=X(t,`tooltip`,3,!1);Sf.create(n());var r=W(),i=I(r);J(i,()=>t.children??b),G(e,r),k()}var Af={afterMs:1e4,onChange:$};function jf(e,t){let{afterMs:n,onChange:r,getWindow:i}={...Af,...t},a=null,o=M(P(e));function s(){return i().setTimeout(()=>{N(o,e,!0),r?.(e)},n)}return R(()=>()=>{a&&i().clearTimeout(a)}),Q(()=>H(o),e=>{N(o,e,!0),r?.(e),a&&i().clearTimeout(a),a=s()})}function Mf(e,t){O(t,!0);let n=X(t,`tooltip`,3,!1);wf.create({id:Q(()=>t.id),virtualEl:Q(()=>t.virtualEl),ref:t.ref},n());var r=W(),i=I(r);J(i,()=>t.children??b),G(e,r),k()}function Nf(e,t){O(t,!0);let n=X(t,`side`,3,`bottom`),r=X(t,`sideOffset`,3,0),i=X(t,`align`,3,`center`),a=X(t,`alignOffset`,3,0),o=X(t,`arrowPadding`,3,0),s=X(t,`avoidCollisions`,3,!0),c=X(t,`collisionBoundary`,19,()=>[]),l=X(t,`collisionPadding`,3,0),u=X(t,`hideWhenDetached`,3,!1),d=X(t,`onPlaced`,3,()=>{}),f=X(t,`sticky`,3,`partial`),p=X(t,`updatePositionStrategy`,3,`optimized`),m=X(t,`strategy`,3,`fixed`),h=X(t,`dir`,3,`ltr`),g=X(t,`style`,19,()=>({})),_=X(t,`wrapperId`,19,Kl),v=X(t,`customAnchor`,3,null),y=X(t,`tooltip`,3,!1),x=Cf.create({side:Q(()=>n()),sideOffset:Q(()=>r()),align:Q(()=>i()),alignOffset:Q(()=>a()),id:Q(()=>t.id),arrowPadding:Q(()=>o()),avoidCollisions:Q(()=>s()),collisionBoundary:Q(()=>c()),collisionPadding:Q(()=>l()),hideWhenDetached:Q(()=>u()),onPlaced:Q(()=>d()),sticky:Q(()=>f()),updatePositionStrategy:Q(()=>p()),strategy:Q(()=>m()),dir:Q(()=>h()),style:Q(()=>g()),enabled:Q(()=>t.enabled),wrapperId:Q(()=>_()),customAnchor:Q(()=>v())},y()),S=j(()=>_s(x.wrapperProps,{style:{pointerEvents:`auto`}}));var C=W(),w=I(C);J(w,()=>t.content??b,()=>({props:x.props,wrapperProps:H(S)})),G(e,C),k()}function Pf(e,t){O(t,!0),ki(()=>{t.onPlaced?.()});var n=W(),r=I(n);J(r,()=>t.content??b,()=>({props:{},wrapperProps:{}})),G(e,n),k()}function Ff(e,t){let n=X(t,`isStatic`,3,!1),r=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`content`,`isStatic`,`onPlaced`]);var i=W(),a=I(i),o=e=>{Pf(e,{get content(){return t.content},get onPlaced(){return t.onPlaced}})},s=e=>{Nf(e,Oi({get content(){return t.content},get onPlaced(){return t.onPlaced}},()=>r))};q(a,e=>{n()?e(o):e(s,!1)}),G(e,i)}var If=U(`<!> <!>`,1);function Lf(e,t){O(t,!0);let n=X(t,`interactOutsideBehavior`,3,`close`),r=X(t,`trapFocus`,3,!0),i=X(t,`isValidEvent`,3,()=>!1),a=X(t,`customAnchor`,3,null),o=X(t,`isStatic`,3,!1),s=X(t,`tooltip`,3,!1),c=Ei(t,`$$slots.$$events.$$legacy.popper.onEscapeKeydown.escapeKeydownBehavior.preventOverflowTextSelection.id.onPointerDown.onPointerUp.side.sideOffset.align.alignOffset.arrowPadding.avoidCollisions.collisionBoundary.collisionPadding.sticky.hideWhenDetached.updatePositionStrategy.strategy.dir.preventScroll.wrapperId.style.onPlaced.onInteractOutside.onCloseAutoFocus.onOpenAutoFocus.onFocusOutside.interactOutsideBehavior.loop.trapFocus.isValidEvent.customAnchor.isStatic.enabled.ref.tooltip`.split(`.`));Ff(e,{get isStatic(){return o()},get id(){return t.id},get side(){return t.side},get sideOffset(){return t.sideOffset},get align(){return t.align},get alignOffset(){return t.alignOffset},get arrowPadding(){return t.arrowPadding},get avoidCollisions(){return t.avoidCollisions},get collisionBoundary(){return t.collisionBoundary},get collisionPadding(){return t.collisionPadding},get sticky(){return t.sticky},get hideWhenDetached(){return t.hideWhenDetached},get updatePositionStrategy(){return t.updatePositionStrategy},get strategy(){return t.strategy},get dir(){return t.dir},get wrapperId(){return t.wrapperId},get style(){return t.style},get onPlaced(){return t.onPlaced},get customAnchor(){return a()},get enabled(){return t.enabled},get tooltip(){return s()},content:(e,a)=>{let o=()=>a?.().props,s=()=>a?.().wrapperProps;var l=If(),u=I(l),d=e=>{iu(e,{get preventScroll(){return t.preventScroll}})},f=e=>{var n=W(),r=I(n),i=e=>{iu(e,{get preventScroll(){return t.preventScroll}})};q(r,e=>{t.forceMount||e(i)},!0),G(e,n)};q(u,e=>{t.forceMount&&t.enabled?e(d):e(f,!1)});var p=L(u,2);zl(p,{get onOpenAutoFocus(){return t.onOpenAutoFocus},get onCloseAutoFocus(){return t.onCloseAutoFocus},get loop(){return t.loop},get enabled(){return t.enabled},get trapFocus(){return r()},get forceMount(){return t.forceMount},get ref(){return t.ref},focusScope:(e,r)=>{let a=()=>r?.().props;il(e,{get onEscapeKeydown(){return t.onEscapeKeydown},get escapeKeydownBehavior(){return t.escapeKeydownBehavior},get enabled(){return t.enabled},get ref(){return t.ref},children:(e,r)=>{tl(e,{get id(){return t.id},get onInteractOutside(){return t.onInteractOutside},get onFocusOutside(){return t.onFocusOutside},get interactOutsideBehavior(){return n()},get isValidEvent(){return i()},get enabled(){return t.enabled},get ref(){return t.ref},children:(e,n)=>{let r=()=>n?.().props;Gl(e,{get id(){return t.id},get preventOverflowTextSelection(){return t.preventOverflowTextSelection},get onPointerDown(){return t.onPointerDown},get onPointerUp(){return t.onPointerUp},get enabled(){return t.enabled},get ref(){return t.ref},children:(e,n)=>{var i=W(),l=I(i);{let e=j(()=>({props:_s(c,o(),r(),a(),{style:{pointerEvents:`auto`}}),wrapperProps:s()}));J(l,()=>t.popper??b,()=>H(e))}G(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{focusScope:!0}}),G(e,l)},$$slots:{content:!0}}),k()}function Rf(e,t){let n=X(t,`interactOutsideBehavior`,3,`close`),r=X(t,`trapFocus`,3,!0),i=X(t,`isValidEvent`,3,()=>!1),a=X(t,`customAnchor`,3,null),o=X(t,`isStatic`,3,!1),s=Ei(t,`$$slots.$$events.$$legacy.popper.open.onEscapeKeydown.escapeKeydownBehavior.preventOverflowTextSelection.id.onPointerDown.onPointerUp.side.sideOffset.align.alignOffset.arrowPadding.avoidCollisions.collisionBoundary.collisionPadding.sticky.hideWhenDetached.updatePositionStrategy.strategy.dir.preventScroll.wrapperId.style.onPlaced.onInteractOutside.onCloseAutoFocus.onOpenAutoFocus.onFocusOutside.interactOutsideBehavior.loop.trapFocus.isValidEvent.customAnchor.isStatic.ref`.split(`.`));Ec(e,{get open(){return t.open},get ref(){return t.ref},presence:e=>{Lf(e,Oi({get popper(){return t.popper},get onEscapeKeydown(){return t.onEscapeKeydown},get escapeKeydownBehavior(){return t.escapeKeydownBehavior},get preventOverflowTextSelection(){return t.preventOverflowTextSelection},get id(){return t.id},get onPointerDown(){return t.onPointerDown},get onPointerUp(){return t.onPointerUp},get side(){return t.side},get sideOffset(){return t.sideOffset},get align(){return t.align},get alignOffset(){return t.alignOffset},get arrowPadding(){return t.arrowPadding},get avoidCollisions(){return t.avoidCollisions},get collisionBoundary(){return t.collisionBoundary},get collisionPadding(){return t.collisionPadding},get sticky(){return t.sticky},get hideWhenDetached(){return t.hideWhenDetached},get updatePositionStrategy(){return t.updatePositionStrategy},get strategy(){return t.strategy},get dir(){return t.dir},get preventScroll(){return t.preventScroll},get wrapperId(){return t.wrapperId},get style(){return t.style},get onPlaced(){return t.onPlaced},get customAnchor(){return a()},get isStatic(){return o()},get enabled(){return t.open},get onInteractOutside(){return t.onInteractOutside},get onCloseAutoFocus(){return t.onCloseAutoFocus},get onOpenAutoFocus(){return t.onOpenAutoFocus},get interactOutsideBehavior(){return n()},get loop(){return t.loop},get trapFocus(){return r()},get isValidEvent(){return i()},get onFocusOutside(){return t.onFocusOutside},forceMount:!1,get ref(){return t.ref}},()=>s))},$$slots:{presence:!0}})}function zf(e,t){let n=X(t,`interactOutsideBehavior`,3,`close`),r=X(t,`trapFocus`,3,!0),i=X(t,`isValidEvent`,3,()=>!1),a=X(t,`customAnchor`,3,null),o=X(t,`isStatic`,3,!1),s=Ei(t,`$$slots.$$events.$$legacy.popper.onEscapeKeydown.escapeKeydownBehavior.preventOverflowTextSelection.id.onPointerDown.onPointerUp.side.sideOffset.align.alignOffset.arrowPadding.avoidCollisions.collisionBoundary.collisionPadding.sticky.hideWhenDetached.updatePositionStrategy.strategy.dir.preventScroll.wrapperId.style.onPlaced.onInteractOutside.onCloseAutoFocus.onOpenAutoFocus.onFocusOutside.interactOutsideBehavior.loop.trapFocus.isValidEvent.customAnchor.isStatic.enabled`.split(`.`));Lf(e,Oi({get popper(){return t.popper},get onEscapeKeydown(){return t.onEscapeKeydown},get escapeKeydownBehavior(){return t.escapeKeydownBehavior},get preventOverflowTextSelection(){return t.preventOverflowTextSelection},get id(){return t.id},get onPointerDown(){return t.onPointerDown},get onPointerUp(){return t.onPointerUp},get side(){return t.side},get sideOffset(){return t.sideOffset},get align(){return t.align},get alignOffset(){return t.alignOffset},get arrowPadding(){return t.arrowPadding},get avoidCollisions(){return t.avoidCollisions},get collisionBoundary(){return t.collisionBoundary},get collisionPadding(){return t.collisionPadding},get sticky(){return t.sticky},get hideWhenDetached(){return t.hideWhenDetached},get updatePositionStrategy(){return t.updatePositionStrategy},get strategy(){return t.strategy},get dir(){return t.dir},get preventScroll(){return t.preventScroll},get wrapperId(){return t.wrapperId},get style(){return t.style},get onPlaced(){return t.onPlaced},get customAnchor(){return a()},get isStatic(){return o()},get enabled(){return t.enabled},get onInteractOutside(){return t.onInteractOutside},get onCloseAutoFocus(){return t.onCloseAutoFocus},get onOpenAutoFocus(){return t.onOpenAutoFocus},get interactOutsideBehavior(){return n()},get loop(){return t.loop},get trapFocus(){return r()},get isValidEvent(){return i()},get onFocusOutside(){return t.onFocusOutside}},()=>s,{forceMount:!0}))}var Bf=class{#opts;#enabled;#isPointerInTransit;#pointerGraceArea=M(null);constructor(e){this.#opts=e,this.#enabled=j(()=>this.#opts.enabled()),this.#isPointerInTransit=jf(!1,{afterMs:e.transitTimeout??300,onChange:e=>{H(this.#enabled)&&this.#opts.setIsPointerInTransit?.(e)},getWindow:()=>Ms(this.#opts.triggerNode())}),Us([e.triggerNode,e.contentNode,e.enabled],([e,t,n])=>!e||!t||!n?void 0:ls(pr(e,`pointerleave`,e=>{this.#createGraceArea(e,t)}),pr(t,`pointerleave`,t=>{this.#createGraceArea(t,e)}))),Us(()=>H(this.#pointerGraceArea),()=>{let t=t=>{if(!H(this.#pointerGraceArea))return;let n=t.target;if(!hc(n))return;let r={x:t.clientX,y:t.clientY},i=e.triggerNode()?.contains(n)||e.contentNode()?.contains(n),a=!Wf(r,H(this.#pointerGraceArea));i?this.#removeGraceArea():a&&(this.#removeGraceArea(),e.onPointerExit())},n=js(e.triggerNode()??e.contentNode());if(n)return pr(n,`pointermove`,t)})}#removeGraceArea(){N(this.#pointerGraceArea,null),this.#isPointerInTransit.current=!1}#createGraceArea(e,t){let n=e.currentTarget;if(!mc(n))return;let r={x:e.clientX,y:e.clientY},i=Vf(r,n.getBoundingClientRect()),a=Hf(r,i),o=Uf(t.getBoundingClientRect()),s=Gf([...a,...o]);N(this.#pointerGraceArea,s,!0),this.#isPointerInTransit.current=!0}};function Vf(e,t){let n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return`left`;case i:return`right`;case n:return`top`;case r:return`bottom`;default:throw Error(`unreachable`)}}function Hf(e,t,n=5){let r=n*1.5;switch(t){case`top`:return[{x:e.x-n,y:e.y+n},{x:e.x,y:e.y-r},{x:e.x+n,y:e.y+n}];case`bottom`:return[{x:e.x-n,y:e.y-n},{x:e.x,y:e.y+r},{x:e.x+n,y:e.y-n}];case`left`:return[{x:e.x+n,y:e.y-n},{x:e.x-r,y:e.y},{x:e.x+n,y:e.y+n}];case`right`:return[{x:e.x-n,y:e.y-n},{x:e.x+r,y:e.y},{x:e.x-n,y:e.y+n}]}}function Uf(e){let{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function Wf(e,t){let{x:n,y:r}=e,i=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e].x,s=t[e].y,c=t[a].x,l=t[a].y;s>r!=l>r&&n<(c-o)*(r-s)/(l-s)+o&&(i=!i)}return i}function Gf(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),Kf(t)}function Kf(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let r=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x))t.pop();else break}t.push(r)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let r=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}function qf(e,t){O(t,!0);let n=X(t,`open`,15,!1),r=X(t,`onOpenChange`,3,$),i=X(t,`onOpenChangeComplete`,3,$);jc.create({variant:Q(()=>`dialog`),open:Q(()=>n(),e=>{n(e),r()(e)}),onOpenChangeComplete:Q(()=>i())});var a=W(),o=I(a);J(o,()=>t.children??b),G(e,a),k()}var Jf=U(`<button><!></button>`);function Yf(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`ref`,15,null),a=X(t,`disabled`,3,!1),o=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`children`,`child`,`id`,`ref`,`disabled`]),s=Mc.create({variant:Q(()=>`close`),id:Q(()=>r()),ref:Q(()=>i(),e=>i(e)),disabled:Q(()=>!!a())}),c=j(()=>_s(o,s.props));var l=W(),u=I(l),d=e=>{var n=W(),r=I(n);J(r,()=>t.child,()=>({props:H(c)})),G(e,n)},f=e=>{var n=Jf();pi(n,()=>({...H(c)}));var r=F(n);J(r,()=>t.children??b),D(n),G(e,n)};q(u,e=>{t.child?e(d):e(f,!1)}),G(e,l),k()}var Xf=U(`<!> <!>`,1),Zf=U(`<!> <div><!></div>`,1);function Qf(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`ref`,15,null),a=X(t,`forceMount`,3,!1),o=X(t,`onCloseAutoFocus`,3,$),s=X(t,`onOpenAutoFocus`,3,$),c=X(t,`onEscapeKeydown`,3,$),l=X(t,`onInteractOutside`,3,$),u=X(t,`trapFocus`,3,!0),d=X(t,`preventScroll`,3,!0),f=X(t,`restoreScrollDelay`,3,null),p=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`id`,`children`,`child`,`ref`,`forceMount`,`onCloseAutoFocus`,`onOpenAutoFocus`,`onEscapeKeydown`,`onInteractOutside`,`trapFocus`,`preventScroll`,`restoreScrollDelay`]),m=Pc.create({id:Q(()=>r()),ref:Q(()=>i(),e=>i(e))}),h=j(()=>_s(p,m.props));{let n=e=>{{let n=(e,n)=>{let r=()=>n?.().props;il(e,Oi(()=>H(h),{get enabled(){return m.root.opts.open.current},get ref(){return m.opts.ref},onEscapeKeydown:e=>{c()(e),!e.defaultPrevented&&m.root.handleClose()},children:(e,n)=>{tl(e,Oi(()=>H(h),{get ref(){return m.opts.ref},get enabled(){return m.root.opts.open.current},onInteractOutside:e=>{l()(e),!e.defaultPrevented&&m.root.handleClose()},children:(e,n)=>{Gl(e,Oi(()=>H(h),{get ref(){return m.opts.ref},get enabled(){return m.root.opts.open.current},children:(e,n)=>{var i=W(),a=I(i),o=e=>{var n=Xf(),i=I(n),a=e=>{iu(e,{get preventScroll(){return d()},get restoreScrollDelay(){return f()}})};q(i,e=>{m.root.opts.open.current&&e(a)});var o=L(i,2);{let e=j(()=>({props:_s(H(h),r()),...m.snippetProps}));J(o,()=>t.child,()=>H(e))}G(e,n)},s=e=>{var n=Zf(),i=I(n);iu(i,{get preventScroll(){return d()}});var a=L(i,2);pi(a,e=>({...e}),[()=>_s(H(h),r())]);var o=F(a);J(o,()=>t.children??b),D(a),G(e,n)};q(a,e=>{t.child?e(o):e(s,!1)}),G(e,i)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))},r=j(()=>au({forceMount:a(),present:m.root.opts.open.current,open:m.root.opts.open.current}));zl(e,{get ref(){return m.opts.ref},loop:!0,get trapFocus(){return u()},get enabled(){return H(r)},get onOpenAutoFocus(){return s()},get onCloseAutoFocus(){return o()},focusScope:n,$$slots:{focusScope:!0}})}},r=j(()=>m.root.opts.open.current||a());Ec(e,Oi(()=>H(h),{get forceMount(){return a()},get open(){return H(r)},get ref(){return m.opts.ref},presence:n,$$slots:{presence:!0}}))}k()}var $f=ic({component:`pagination`,parts:[`root`,`page`,`prev`,`next`]}),ep=new zs(`Pagination.Root`),tp=class e{static create(t){return ep.set(new e(t))}opts;attachment;#totalPages=j(()=>this.opts.count.current===0?1:Math.ceil(this.opts.count.current/this.opts.perPage.current));get totalPages(){return H(this.#totalPages)}set totalPages(e){N(this.#totalPages,e)}#range=j(()=>{let e=(this.opts.page.current-1)*this.opts.perPage.current,t=Math.min(e+this.opts.perPage.current,this.opts.count.current);return{start:e+1,end:t}});get range(){return H(this.#range)}set range(e){N(this.#range,e)}#pages=j(()=>ap({page:this.opts.page.current,totalPages:this.totalPages,siblingCount:this.opts.siblingCount.current}));get pages(){return H(this.#pages)}set pages(e){N(this.#pages,e)}#hasPrevPage=j(()=>this.opts.page.current>1);get hasPrevPage(){return H(this.#hasPrevPage)}set hasPrevPage(e){N(this.#hasPrevPage,e)}#hasNextPage=j(()=>this.opts.page.current<this.totalPages);get hasNextPage(){return H(this.#hasNextPage)}set hasNextPage(e){N(this.#hasNextPage,e)}constructor(e){this.opts=e,this.attachment=Fs(this.opts.ref)}setPage(e){this.opts.page.current=e}getPageTriggerNodes(){let e=this.opts.ref.current;return e?Array.from(e.querySelectorAll(`[data-pagination-page]`)):[]}getButtonNode(e){let t=this.opts.ref.current;if(t)return t.querySelector($f.selector(e))}prevPage(){this.opts.page.current=Math.max(this.opts.page.current-1,1)}nextPage(){this.opts.page.current=Math.min(this.opts.page.current+1,this.totalPages)}#snippetProps=j(()=>({pages:this.pages,range:this.range,currentPage:this.opts.page.current}));get snippetProps(){return H(this.#snippetProps)}set snippetProps(e){N(this.#snippetProps,e)}#props=j(()=>({id:this.opts.id.current,"data-orientation":this.opts.orientation.current,[$f.root]:``,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}},np=class e{static create(t){return new e(t,ep.get())}opts;root;attachment;#isSelected=j(()=>this.opts.page.current.value===this.root.opts.page.current);constructor(e,t){this.opts=e,this.root=t,this.attachment=Fs(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button===0&&this.root.setPage(this.opts.page.current.value)}onkeydown(e){e.key===` `||e.key===`Enter`?(e.preventDefault(),this.root.setPage(this.opts.page.current.value)):ip(e,this.opts.ref.current,this.root)}#props=j(()=>({id:this.opts.id.current,"aria-label":`Page ${this.opts.page.current.value}`,"data-value":`${this.opts.page.current.value}`,"data-selected":H(this.#isSelected)?``:void 0,[$f.page]:``,onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}},rp=class e{static create(t){return new e(t,ep.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=Fs(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}#action(){this.opts.type===`prev`?this.root.prevPage():this.root.nextPage()}#isDisabled=j(()=>this.opts.disabled.current?!0:this.opts.type===`prev`?!this.root.hasPrevPage:this.opts.type===`next`?!this.root.hasNextPage:!1);onclick(e){this.opts.disabled.current||e.button===0&&this.#action()}onkeydown(e){e.key===` `||e.key===`Enter`?(e.preventDefault(),this.#action()):ip(e,this.opts.ref.current,this.root)}#props=j(()=>({id:this.opts.id.current,[$f[this.opts.type]]:``,disabled:H(this.#isDisabled),onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}};function ip(e,t,n){if(!t||!n.opts.ref.current)return;let r=n.getPageTriggerNodes(),i=n.getButtonNode(`next`),a=n.getButtonNode(`prev`);a&&r.unshift(a),i&&r.push(i);let o=r.indexOf(t),s=ac(n.opts.ref.current),{nextKey:c,prevKey:l}=uc(s,n.opts.orientation.current),u=n.opts.loop.current,d={[c]:o+1,[l]:o-1,Home:0,End:r.length-1}[e.key];if(d===void 0)return;e.preventDefault(),d<0&&u?d=r.length-1:d===r.length&&u&&(d=0);let f=r[d];f&&f.focus()}function ap({page:e=1,totalPages:t,siblingCount:n=1}){let r=[],i=new Set([1,t]),a=3+n,o=t-2-n;if(a>o)for(let e=2;e<=t-1;e++)i.add(e);else if(e<a)for(let e=2;e<=Math.min(a,t);e++)i.add(e);else if(e>o)for(let e=t-1;e>=Math.max(o,2);e--)i.add(e);else for(let r=Math.max(e-n,2);r<=Math.min(e+n,t);r++)i.add(r);function s(e){r.push({type:`page`,value:e,key:`page-${e}`})}function c(){let e=Kl();r.push({type:`ellipsis`,key:`ellipsis-${e}`})}let l=0;for(let e of Array.from(i).sort((e,t)=>e-t))e-l>1&&c(),s(e),l=e;return r}var op=U(`<div><!></div>`);function sp(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`perPage`,3,1),a=X(t,`page`,15,1),o=X(t,`ref`,15,null),s=X(t,`siblingCount`,3,1),c=X(t,`onPageChange`,3,$),l=X(t,`loop`,3,!1),u=X(t,`orientation`,3,`horizontal`),d=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`id`,`count`,`perPage`,`page`,`ref`,`siblingCount`,`onPageChange`,`loop`,`orientation`,`child`,`children`]),f=tp.create({id:Q(()=>r()),count:Q(()=>t.count),perPage:Q(()=>i()),page:Q(()=>a(),e=>{a(e),c()?.(e)}),loop:Q(()=>l()),siblingCount:Q(()=>s()),orientation:Q(()=>u()),ref:Q(()=>o(),e=>o(e))}),p=j(()=>_s(d,f.props));var m=W(),h=I(m),g=e=>{var n=W(),r=I(n);{let e=j(()=>({props:H(p),...f.snippetProps}));J(r,()=>t.child,()=>H(e))}G(e,n)},_=e=>{var n=op();pi(n,()=>({...H(p)}));var r=F(n);J(r,()=>t.children??b,()=>f.snippetProps),D(n),G(e,n)};q(h,e=>{t.child?e(g):e(_,!1)}),G(e,m),k()}var cp=U(`<button><!></button>`);function lp(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`ref`,15,null),a=X(t,`type`,3,`button`),o=X(t,`disabled`,3,!1),s=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`id`,`child`,`children`,`ref`,`type`,`disabled`]),c=rp.create({type:`prev`,id:Q(()=>r()),ref:Q(()=>i(),e=>i(e)),disabled:Q(()=>!!o())}),l=j(()=>_s(s,c.props,{type:a()}));var u=W(),d=I(u),f=e=>{var n=W(),r=I(n);J(r,()=>t.child,()=>({props:H(l)})),G(e,n)},p=e=>{var n=cp();pi(n,()=>({...H(l)}));var r=F(n);J(r,()=>t.children??b),D(n),G(e,n)};q(d,e=>{t.child?e(f):e(p,!1)}),G(e,u),k()}var up=U(`<button><!></button>`);function dp(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`ref`,15,null),a=X(t,`type`,3,`button`),o=X(t,`disabled`,3,!1),s=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`id`,`child`,`children`,`ref`,`type`,`disabled`]),c=rp.create({type:`next`,id:Q(()=>r()),ref:Q(()=>i(),e=>i(e)),disabled:Q(()=>!!o())}),l=j(()=>_s(s,c.props,{type:a()}));var u=W(),d=I(u),f=e=>{var n=W(),r=I(n);J(r,()=>t.child,()=>({props:H(l)})),G(e,n)},p=e=>{var n=up();pi(n,()=>({...H(l)}));var r=F(n);J(r,()=>t.children??b),D(n),G(e,n)};q(d,e=>{t.child?e(f):e(p,!1)}),G(e,u),k()}var fp=U(`<button><!></button>`);function pp(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`type`,3,`button`),a=X(t,`ref`,15,null),o=X(t,`disabled`,3,!1),s=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`id`,`page`,`child`,`children`,`type`,`ref`,`disabled`]),c=np.create({id:Q(()=>r()),page:Q(()=>t.page),ref:Q(()=>a(),e=>a(e)),disabled:Q(()=>!!o())}),l=j(()=>_s(s,c.props,{type:i()}));var u=W(),d=I(u),f=e=>{var n=W(),r=I(n);J(r,()=>t.child,()=>({props:H(l)})),G(e,n)},p=e=>{var n=fp();pi(n,()=>({...H(l)}));var r=F(n),i=e=>{var n=W(),r=I(n);J(r,()=>t.children??b),G(e,n)},a=e=>{var n=Sr();z(()=>K(n,t.page.value)),G(e,n)};q(r,e=>{t.children?e(i):e(a,!1)}),D(n),G(e,n)};q(d,e=>{t.child?e(f):e(p,!1)}),G(e,u),k()}var mp={immediate:!0},hp=class{#opts;#interval;#cb;#timer=null;constructor(e,t,n={}){this.#cb=e,this.#interval=t,this.#opts={...mp,...n},this.stop=this.stop.bind(this),this.start=this.start.bind(this),this.#opts.immediate&&this.start(),vs(this.stop)}#clear(){this.#timer!==null&&(window.clearTimeout(this.#timer),this.#timer=null)}stop(){this.#clear()}start(...e){this.#clear(),this.#timer=window.setTimeout(()=>{this.#timer=null,this.#cb(...e)},this.#interval)}};let gp=ic({component:`tooltip`,parts:[`content`,`trigger`]});var _p=new zs(`Tooltip.Provider`),vp=new zs(`Tooltip.Root`),yp=class e{static create(t){return _p.set(new e(t))}opts;#isOpenDelayed=M(!0);get isOpenDelayed(){return H(this.#isOpenDelayed)}set isOpenDelayed(e){N(this.#isOpenDelayed,e,!0)}isPointerInTransit=qo(!1);#timerFn;#openTooltip=M(null);constructor(e){this.opts=e,this.#timerFn=new hp(()=>{this.isOpenDelayed=!0},this.opts.skipDelayDuration.current,{immediate:!1})}#startTimer=()=>{this.opts.skipDelayDuration.current!==0&&this.#timerFn.start()};#clearTimer=()=>{this.#timerFn.stop()};onOpen=e=>{H(this.#openTooltip)&&H(this.#openTooltip)!==e&&H(this.#openTooltip).handleClose(),this.#clearTimer(),this.isOpenDelayed=!1,N(this.#openTooltip,e,!0)};onClose=e=>{H(this.#openTooltip)===e&&N(this.#openTooltip,null),this.#startTimer()};isTooltipOpen=e=>H(this.#openTooltip)===e},bp=class e{static create(t){return vp.set(new e(t,_p.get()))}opts;provider;#delayDuration=j(()=>this.opts.delayDuration.current??this.provider.opts.delayDuration.current);get delayDuration(){return H(this.#delayDuration)}set delayDuration(e){N(this.#delayDuration,e)}#disableHoverableContent=j(()=>this.opts.disableHoverableContent.current??this.provider.opts.disableHoverableContent.current);get disableHoverableContent(){return H(this.#disableHoverableContent)}set disableHoverableContent(e){N(this.#disableHoverableContent,e)}#disableCloseOnTriggerClick=j(()=>this.opts.disableCloseOnTriggerClick.current??this.provider.opts.disableCloseOnTriggerClick.current);get disableCloseOnTriggerClick(){return H(this.#disableCloseOnTriggerClick)}set disableCloseOnTriggerClick(e){N(this.#disableCloseOnTriggerClick,e)}#disabled=j(()=>this.opts.disabled.current??this.provider.opts.disabled.current);get disabled(){return H(this.#disabled)}set disabled(e){N(this.#disabled,e)}#ignoreNonKeyboardFocus=j(()=>this.opts.ignoreNonKeyboardFocus.current??this.provider.opts.ignoreNonKeyboardFocus.current);get ignoreNonKeyboardFocus(){return H(this.#ignoreNonKeyboardFocus)}set ignoreNonKeyboardFocus(e){N(this.#ignoreNonKeyboardFocus,e)}#contentNode=M(null);get contentNode(){return H(this.#contentNode)}set contentNode(e){N(this.#contentNode,e,!0)}#triggerNode=M(null);get triggerNode(){return H(this.#triggerNode)}set triggerNode(e){N(this.#triggerNode,e,!0)}#wasOpenDelayed=M(!1);#timerFn;#stateAttr=j(()=>this.opts.open.current?H(this.#wasOpenDelayed)?`delayed-open`:`instant-open`:`closed`);get stateAttr(){return H(this.#stateAttr)}set stateAttr(e){N(this.#stateAttr,e)}constructor(e,t){this.opts=e,this.provider=t,this.#timerFn=new hp(()=>{N(this.#wasOpenDelayed,!0),this.opts.open.current=!0},this.delayDuration??0,{immediate:!1}),new Oc({open:this.opts.open,ref:Q(()=>this.contentNode),onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),Us(()=>this.delayDuration,()=>{this.delayDuration!==void 0&&(this.#timerFn=new hp(()=>{N(this.#wasOpenDelayed,!0),this.opts.open.current=!0},this.delayDuration,{immediate:!1}))}),Us(()=>this.opts.open.current,e=>{e?this.provider.onOpen(this):this.provider.onClose(this)})}handleOpen=()=>{this.#timerFn.stop(),N(this.#wasOpenDelayed,!1),this.opts.open.current=!0};handleClose=()=>{this.#timerFn.stop(),this.opts.open.current=!1};#handleDelayedOpen=()=>{this.#timerFn.stop();let e=!this.provider.isOpenDelayed,t=this.delayDuration??0;e||t===0?(N(this.#wasOpenDelayed,t>0&&e,!0),this.opts.open.current=!0):this.#timerFn.start()};onTriggerEnter=()=>{this.#handleDelayedOpen()};onTriggerLeave=()=>{this.disableHoverableContent?this.handleClose():this.#timerFn.stop()}},xp=class e{static create(t){return new e(t,vp.get())}opts;root;attachment;#isPointerDown=qo(!1);#hasPointerMoveOpened=M(!1);#isDisabled=j(()=>this.opts.disabled.current||this.root.disabled);domContext;constructor(e,t){this.opts=e,this.root=t,this.domContext=new Ps(e.ref),this.attachment=Fs(this.opts.ref,e=>this.root.triggerNode=e)}handlePointerUp=()=>{this.#isPointerDown.current=!1};#onpointerup=()=>{H(this.#isDisabled)||(this.#isPointerDown.current=!1)};#onpointerdown=()=>{H(this.#isDisabled)||(this.#isPointerDown.current=!0,this.domContext.getDocument().addEventListener(`pointerup`,()=>{this.handlePointerUp()},{once:!0}))};#onpointermove=e=>{H(this.#isDisabled)||e.pointerType!==`touch`&&(H(this.#hasPointerMoveOpened)||this.root.provider.isPointerInTransit.current||(this.root.onTriggerEnter(),N(this.#hasPointerMoveOpened,!0)))};#onpointerleave=()=>{H(this.#isDisabled)||(this.root.onTriggerLeave(),N(this.#hasPointerMoveOpened,!1))};#onfocus=e=>{this.#isPointerDown.current||H(this.#isDisabled)||this.root.ignoreNonKeyboardFocus&&!gc(e.currentTarget)||this.root.handleOpen()};#onblur=()=>{H(this.#isDisabled)||this.root.handleClose()};#onclick=()=>{this.root.disableCloseOnTriggerClick||H(this.#isDisabled)||this.root.handleClose()};#props=j(()=>({id:this.opts.id.current,"aria-describedby":this.root.opts.open.current?this.root.contentNode?.id:void 0,"data-state":this.root.stateAttr,"data-disabled":tc(H(this.#isDisabled)),"data-delay-duration":`${this.root.delayDuration}`,[gp.trigger]:``,tabindex:H(this.#isDisabled)?void 0:0,disabled:this.opts.disabled.current,onpointerup:this.#onpointerup,onpointerdown:this.#onpointerdown,onpointermove:this.#onpointermove,onpointerleave:this.#onpointerleave,onfocus:this.#onfocus,onblur:this.#onblur,onclick:this.#onclick,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}},Sp=class e{static create(t){return new e(t,vp.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=Fs(this.opts.ref,e=>this.root.contentNode=e),new Bf({triggerNode:()=>this.root.triggerNode,contentNode:()=>this.root.contentNode,enabled:()=>this.root.opts.open.current&&!this.root.disableHoverableContent,onPointerExit:()=>{this.root.provider.isTooltipOpen(this.root)&&this.root.handleClose()},setIsPointerInTransit:e=>{this.root.provider.isPointerInTransit.current=e},transitTimeout:this.root.provider.opts.skipDelayDuration.current}),ys(()=>pr(window,`scroll`,e=>{let t=e.target;t&&t.contains(this.root.triggerNode)&&this.root.handleClose()}))}onInteractOutside=e=>{if(hc(e.target)&&this.root.triggerNode?.contains(e.target)&&this.root.disableCloseOnTriggerClick){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current?.(e),!e.defaultPrevented&&this.root.handleClose()};onOpenAutoFocus=e=>{e.preventDefault()};onCloseAutoFocus=e=>{e.preventDefault()};#snippetProps=j(()=>({open:this.root.opts.open.current}));get snippetProps(){return H(this.#snippetProps)}set snippetProps(e){N(this.#snippetProps,e)}#props=j(()=>({id:this.opts.id.current,"data-state":this.root.stateAttr,"data-disabled":tc(this.root.disabled),style:{pointerEvents:`auto`,outline:`none`},[gp.content]:``,...this.attachment}));get props(){return H(this.#props)}set props(e){N(this.#props,e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus}};function Cp(e,t){O(t,!0);let n=X(t,`open`,15,!1),r=X(t,`onOpenChange`,3,$),i=X(t,`onOpenChangeComplete`,3,$);bp.create({open:Q(()=>n(),e=>{n(e),r()(e)}),delayDuration:Q(()=>t.delayDuration),disableCloseOnTriggerClick:Q(()=>t.disableCloseOnTriggerClick),disableHoverableContent:Q(()=>t.disableHoverableContent),ignoreNonKeyboardFocus:Q(()=>t.ignoreNonKeyboardFocus),disabled:Q(()=>t.disabled),onOpenChangeComplete:Q(()=>i())}),kf(e,{tooltip:!0,children:(e,n)=>{var r=W(),i=I(r);J(i,()=>t.children??b),G(e,r)},$$slots:{default:!0}}),k()}var wp=U(`<div><div><!></div></div>`),Tp=U(`<div><div><!></div></div>`);function Ep(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`ref`,15,null),a=X(t,`side`,3,`top`),o=X(t,`sideOffset`,3,0),s=X(t,`align`,3,`center`),c=X(t,`avoidCollisions`,3,!0),l=X(t,`arrowPadding`,3,0),u=X(t,`sticky`,3,`partial`),d=X(t,`hideWhenDetached`,3,!1),f=X(t,`collisionPadding`,3,0),p=X(t,`onInteractOutside`,3,$),m=X(t,`onEscapeKeydown`,3,$),h=X(t,`forceMount`,3,!1),g=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`children`,`child`,`id`,`ref`,`side`,`sideOffset`,`align`,`avoidCollisions`,`arrowPadding`,`sticky`,`strategy`,`hideWhenDetached`,`collisionPadding`,`onInteractOutside`,`onEscapeKeydown`,`forceMount`]),_=Sp.create({id:Q(()=>r()),ref:Q(()=>i(),e=>i(e)),onInteractOutside:Q(()=>p()),onEscapeKeydown:Q(()=>m())}),v=j(()=>({side:a(),sideOffset:o(),align:s(),avoidCollisions:c(),arrowPadding:l(),sticky:u(),hideWhenDetached:d(),collisionPadding:f(),strategy:t.strategy})),y=j(()=>_s(g,H(v),_.props));var x=W(),S=I(x),C=e=>{zf(e,Oi(()=>H(y),()=>_.popperProps,{get enabled(){return _.root.opts.open.current},get id(){return r()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,get ref(){return _.opts.ref},tooltip:!0,popper:(e,n)=>{let r=()=>n?.().props,i=()=>n?.().wrapperProps,a=j(()=>_s(r(),{style:gf(`tooltip`)}));var o=W(),s=I(o),c=e=>{var n=W(),r=I(n);{let e=j(()=>({props:H(a),wrapperProps:i(),..._.snippetProps}));J(r,()=>t.child,()=>H(e))}G(e,n)},l=e=>{var n=wp();pi(n,()=>({...i()}));var r=F(n);pi(r,()=>({...H(a)}));var o=F(r);J(o,()=>t.children??b),D(r),D(n),G(e,n)};q(s,e=>{t.child?e(c):e(l,!1)}),G(e,o)},$$slots:{popper:!0}}))},w=e=>{var n=W(),i=I(n),a=e=>{Rf(e,Oi(()=>H(y),()=>_.popperProps,{get open(){return _.root.opts.open.current},get id(){return r()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,get ref(){return _.opts.ref},tooltip:!0,popper:(e,n)=>{let r=()=>n?.().props,i=()=>n?.().wrapperProps,a=j(()=>_s(r(),{style:gf(`tooltip`)}));var o=W(),s=I(o),c=e=>{var n=W(),r=I(n);{let e=j(()=>({props:H(a),wrapperProps:i(),..._.snippetProps}));J(r,()=>t.child,()=>H(e))}G(e,n)},l=e=>{var n=Tp();pi(n,()=>({...i()}));var r=F(n);pi(r,()=>({...H(a)}));var o=F(r);J(o,()=>t.children??b),D(r),D(n),G(e,n)};q(s,e=>{t.child?e(c):e(l,!1)}),G(e,o)},$$slots:{popper:!0}}))};q(i,e=>{h()||e(a)},!0),G(e,n)};q(S,e=>{h()?e(C):e(w,!1)}),G(e,x),k()}var Dp=U(`<button><!></button>`);function Op(e,t){let n=Cr();O(t,!0);let r=X(t,`id`,19,()=>vc(n)),i=X(t,`disabled`,3,!1),a=X(t,`type`,3,`button`),o=X(t,`ref`,15,null),s=Ei(t,[`$$slots`,`$$events`,`$$legacy`,`children`,`child`,`id`,`disabled`,`type`,`ref`]),c=xp.create({id:Q(()=>r()),disabled:Q(()=>i()??!1),ref:Q(()=>o(),e=>o(e))}),l=j(()=>_s(s,c.props,{type:a()}));Mf(e,{get id(){return r()},get ref(){return c.opts.ref},tooltip:!0,children:(e,n)=>{var r=W(),i=I(r),a=e=>{var n=W(),r=I(n);J(r,()=>t.child,()=>({props:H(l)})),G(e,n)},o=e=>{var n=Dp();pi(n,()=>({...H(l)}));var r=F(n);J(r,()=>t.children??b),D(n),G(e,n)};q(i,e=>{t.child?e(a):e(o,!1)}),G(e,r)},$$slots:{default:!0}}),k()}function kp(e,t){O(t,!0);let n=X(t,`delayDuration`,3,700),r=X(t,`disableCloseOnTriggerClick`,3,!1),i=X(t,`disableHoverableContent`,3,!1),a=X(t,`disabled`,3,!1),o=X(t,`ignoreNonKeyboardFocus`,3,!1),s=X(t,`skipDelayDuration`,3,300);yp.create({delayDuration:Q(()=>n()),disableCloseOnTriggerClick:Q(()=>r()),disableHoverableContent:Q(()=>i()),disabled:Q(()=>a()),ignoreNonKeyboardFocus:Q(()=>o()),skipDelayDuration:Q(()=>s())});var c=W(),l=I(c);J(l,()=>t.children??b),G(e,c),k()}function Ap(e){if(e.link)return e.link;if(e.metadata?.page&&e.document?.name.startsWith(`cudllibcamacuk`))return`${e.document.src.replace(`/iiif/`,`/view/`)}/${e.metadata.page}`}function jp(e,t){return t<0||e.length<=t?e:t<12?e.slice(0,t)+`...`:e.slice(0,Math.max(5,t-12))+`...`+e.slice(-Math.min(9,t-5))}var Mp=U(`<br/> <span> </span>`,1),Np=U(`<span class="tag is-light is-bold mb-3"> </span> <!>`,1),Pp=U(`<p> </p>`),Fp=U(`<!> <!>`,1);function Ip(e,t){O(t,!0);let n=X(t,`isTitle`,3,!1),r=X(t,`prefix`,3,``),i=X(t,`filenameDisplay`,3,!0),a=j(()=>n()?`h4`:`span`),o=ko();var s=Fp(),c=I(s);Hr(c,()=>H(a),!1,(e,a)=>{pi(e,(e,t)=>({class:`title-identification`,title:e,[ai]:t}),[()=>o.getImageName(t.image),()=>({"mt-2":n()})]);var s=Np(),c=I(s),l=F(c);D(c);var u=L(c,2),d=e=>{var n=Mp(),r=L(I(n),2),i=F(r,!0);D(r),z(e=>K(i,e),[()=>jp(o.getImageName(t.image),16)]),G(e,n)};q(u,e=>{i()&&e(d)}),z(()=>K(l,`${(r()||``)??``}
        Image #${t.image.num??``}`)),G(a,s)});var l=L(c,2),u=e=>{var n=Pp(),r=F(n,!0);D(n),z(e=>K(r,e),[()=>o.getSourceName(t.image.document)||t.image.document?.name||t.image.subtitle||``]),G(e,n)};q(l,e=>{n()&&e(u)}),G(e,s),k()}function Lp(){return je(`magnify`)}function Rp(e){Me(`magnify`,e)}var zp=e=>e.stopPropagation(),Bp=U(`<p><a target="_blank">See in context</a></p>`),Vp=U(`<div class="magnifying-item"><div class="display-image"><img class="display-img"/></div> <div class="magnifying-info"><!> <!></div></div>`),Hp=e=>e.stopPropagation(),Up=U(`<p><a target="_blank">See in context</a></p>`),Wp=U(`<div class="magnifying-content"><!>  <div class="magnifying-item"><div class="display-image"><img/></div> <div class="magnifying-info"><!> <p class="actions my-2"><!> <!> <!></p> <!></div></div></div>`),Gp=U(`<div><!> <!> <!></div>`);function Kp(e,t){O(t,!0);let n=j(Lp),r=j(()=>H(n).image),i=j(()=>H(n).comparison),a=j(()=>H(n).transpositions),o=j(()=>H(a)||[]),s=j(()=>H(r)&&Ap(H(r))),c=j(()=>H(i)&&Ap(H(i)));function l(){return H(r)!==void 0}function u(e){e||(H(n).image=void 0)}function d(e,t){let n=H(o).find(e=>e&&e.startsWith(`rot`)),r=H(o).includes(`hflip`),i=n?parseInt(n.slice(3)):0,a=i;t&&i%180&&(a+=180),a=(a+e+360)%360;let s=[];a&&s.push(`rot${a}`),t!==r&&s.push(`hflip`),N(o,s)}var f=W(),p=I(f),m=e=>{var t=W(),n=I(t),a=l,f=u;Vr(n,()=>qf,(e,t)=>{t(e,{get open(){return a()},set open(e){f(e)},onOpenChange:u,children:(e,t)=>{var n=W(),a=I(n);Vr(a,()=>Gc,(e,t)=>{t(e,{children:(e,t)=>{var n=Gp();let a;var f=F(n);Vr(f,()=>su,(e,t)=>{t(e,{class:`modal-background`})});var p=L(f,2);Z(p,{icon:`mdi:close`,class:`dialog-close`,onclick:()=>u(!1)});var m=L(p,2);Vr(m,()=>Qf,(e,t)=>{t(e,{class:`magnifier modal-content`,children:(e,t)=>{var n=Wp(),a=F(n),l=e=>{var t=Vp();t.__click=[zp];var n=F(t),r=F(n);D(n);var a=L(n,2),o=F(a);Ip(o,{get image(){return H(i)},isTitle:!0,prefix:`Query`});var s=L(o,2),l=e=>{var t=Bp(),n=F(t);D(t),z(()=>Y(n,`href`,H(c))),G(e,t)};q(s,e=>{H(c)&&e(l)}),D(a),D(t),z(()=>{Y(r,`src`,H(i).url),Y(r,`alt`,H(i).id)}),G(e,t)};q(a,e=>{H(i)&&e(l)});var u=L(a,2);u.__click=[Hp];var f=F(u),p=F(f);D(f);var m=L(f,2),h=F(m);Ip(h,{get image(){return H(r)},isTitle:!0});var g=L(h,2),_=F(g);Z(_,{icon:`mdi:rotate-left`,onclick:()=>d(-90,!1)});var v=L(_,2);Z(v,{icon:`mdi:rotate-right`,onclick:()=>d(90,!1)});var y=L(v,2);Z(y,{icon:`mdi:flip-horizontal`,onclick:()=>d(0,!0)}),D(g);var b=L(g,2),x=e=>{var t=Up(),n=F(t);D(t),z(()=>Y(n,`href`,H(s))),G(e,t)};q(b,e=>{H(s)&&e(x)}),D(m),D(u),D(n),z(e=>{Y(p,`src`,H(r).url),Y(p,`alt`,H(r).id),Qr(p,1,e)},[()=>`display-img `+H(o).join(` `)]),G(e,n)},$$slots:{default:!0}})}),D(n),z(e=>a=Qr(n,1,`modal content`,null,a,e),[()=>({"is-active":l()})]),G(e,n)},$$slots:{default:!0}})}),G(e,n)},$$slots:{default:!0}})}),G(e,t)};q(p,e=>{H(r)&&e(m)}),G(e,f),k()}hr([`click`]);var qp=e=>e.stopPropagation(),Jp=U(`<a class="image-source" target="_blank" title="See in context"><!></a>`),Yp=U(`<a href="javascript:void(0)" class="image-pin" title="Pin as comparison"><!></a>`),Xp=U(`<a href="javascript:void(0)" class="image-pin always-visible" title="Pin as comparison"><!></a>`),Zp=U(`<a href="javascript:void(0)" class="image-magnify" title="Magnify"><!></a>`),Qp=U(`<a class="image-focus" title="Show detail"><!></a>`),$p=U(`<div class="display-tools"><!> <!> <!> <!></div>`),em=U(`<span class="similarity"> </span>`),tm=U(`<div class="display-image"><img/></div> <!> <!>`,1),nm=U(`<div class="display-image"><img/></div> <!>`,1),rm=U(`<!> <!>`,1);function im(e,t){O(t,!0);let n=Lp(),r=j(()=>n.comparison?.id===t.image.id);function i(){n.comparison=H(r)?void 0:t.image}function a(){n.image=t.image,n.transpositions=t.transpositions,t.comparison&&(n.comparison=t.comparison)}var o=W(),s=I(o);Vr(s,()=>kp,(e,o)=>{o(e,{delayDuration:0,children:(e,o)=>{var s=W(),c=I(s);Vr(c,()=>Cp,(e,o)=>{o(e,{children:(e,o)=>{var s=rm(),c=I(s);Vr(c,()=>Op,(e,o)=>{o(e,{class:`not-button display-item`,children:(e,o)=>{var s=tm(),c=I(s),l=F(c);l.__click=function(...e){(!t.disable_magnify&&!t.disable_all?a:void 0)?.apply(this,e)},D(c);var u=L(c,2),d=e=>{var o=$p();o.__click=[qp];var s=F(o),c=e=>{var n=Jp(),r=F(n);yo(r,{icon:`mdi:book-open-blank-variant`}),D(n),z(()=>Y(n,`href`,t.image.link)),G(e,n)};q(s,e=>{t.image.link&&e(c)});var l=L(s,2),u=e=>{var t=W(),n=I(t),a=e=>{var t=Yp(),n=F(t);yo(n,{icon:`mdi:pin`,onclick:i}),D(t),G(e,t)},o=e=>{var t=Xp(),n=F(t);yo(n,{icon:`mdi:pin-off`,onclick:i}),D(t),G(e,t)};q(n,e=>{H(r)?e(o,!1):e(a)}),G(e,t)};q(l,e=>{n&&!t.disable_pin&&e(u)});var d=L(l,2),f=e=>{var t=Zp();t.__click=a;var n=F(t);yo(n,{icon:`mdi:arrow-expand`}),D(t),G(e,t)};q(d,e=>{n&&e(f)});var p=L(d,2),m=e=>{var n=Qp(),r=F(n);yo(r,{icon:`mdi:image-search`}),D(n),z(()=>Y(n,`href`,t.href)),G(e,n)};q(p,e=>{t.href&&e(m)}),D(o),G(e,o)};q(u,e=>{t.disable_all||e(d)});var f=L(u,2),p=e=>{var n=em(),r=F(n,!0);D(n),z(()=>K(r,t.similarity)),G(e,n)};q(f,e=>{t.similarity&&e(p)}),z(e=>{Y(l,`src`,t.image.url),Y(l,`alt`,t.image.id),Qr(l,1,e)},[()=>`image display-img `+(t.transpositions||[]).join(` `)]),G(e,s)},$$slots:{default:!0}})});var l=L(c,2);Vr(l,()=>Ep,(e,n)=>{n(e,{class:`tooltip`,children:(e,n)=>{var r=nm(),i=I(r),a=F(i);D(i);var o=L(i,2);Ip(o,{get image(){return t.image},isTitle:!0}),z(e=>{Y(a,`src`,t.image.url),Y(a,`alt`,t.image.id),Qr(a,1,e)},[()=>Kr([`display-img`,...t.transpositions||[]])]),G(e,r)},$$slots:{default:!0}})}),G(e,s)},$$slots:{default:!0}})}),G(e,s)},$$slots:{default:!0}})}),G(e,o),k()}hr([`click`]);var am=(e,t,n)=>t(H(n)),om=U(`<a href="javascript:void(0)" class="cl-selecter" aria-label="Select image"></a>`),sm=U(`<div><!> <!></div>`),cm=U(`<p>â</p>`),lm=(e,t,n)=>{t(!t()),t()&&n.onexpand?.()},um=U(`<a class="cl-more card cl-placeholder" href="javascript:void(0)"> </a>`),dm=U(`<div><!> <!></div>`);function fm(e,t){O(t,!0);let n=X(t,`selectable`,3,!1),r=X(t,`expanded`,15,!1),i=No();function a(e){i.select_images(`toggle`,e)}var o=dm();let s;var c=F(o);Pr(c,17,()=>t.images.slice(0,t.limit),e=>e.id,(e,r)=>{var o=sm();let s;var c=F(o);{let e=j(()=>({...H(r),id:H(r).num.toString(),url:(i.base_url||``)+(t.dti_transformed&&H(r).tsf_url?H(r).tsf_url:H(r).url)}));im(c,{get image(){return H(e)},get disable_magnify(){return n()},get disable_all(){return t.disable_all}})}var l=L(c,2),u=e=>{var t=om();t.__click=[am,a,r],G(e,t)};q(l,e=>{n()&&e(u)}),D(o),z(e=>s=Qr(o,1,`cl-image card`,null,s,e),[()=>({"cl-selected":n()&&i.image_selection.has(H(r).id)})]),G(e,o)},e=>{var t=cm();G(e,t)});var l=L(c,2),u=e=>{var n=um();n.__click=[lm,r,t];var i=F(n);D(n),z(()=>K(i,`${r()?`â`:`+`}${t.images.length-t.limit}`)),G(e,n)};q(l,e=>{n()&&t.limit&&t.images.length>t.limit&&e(u)}),D(o),z(e=>s=Qr(o,1,`cl-images`,null,s,e),[()=>({"cl-selectable":n()})]),G(e,o),k()}hr([`click`]);var pm=U(`<h3> </h3> <p><!></p>`,1),mm=U(`<form><input type="text"/> <a href="javascript:void(0)" class="btn"><!></a></form>`),hm=(e,t)=>{N(t,!0)},gm=U(`<a href="javascript:void(0)" class="btn is-edit" title="Rename"><!></a>`),_m=U(`<span> </span> <!>`,1),vm=U(`<!> <!>`,1),ym=U(`<p><!></p>`),bm=U(`<p><!></p>`),xm=U(`<div class="cl-propinfo"><div class="cl-cluster-title"><!></div> <p> </p> <!></div>`),Sm=U(`<img alt="mask" class="mask"/>`),Cm=U(`<div class="cl-protoinfo"><p><!></p> <div class="cl-proto"><img alt="cl-proto" class="prototype"/> <!></div></div>`),wm=(e,t)=>t(!0),Tm=U(`<a class="cl-overlay cl-hoveroptions" href="javascript:void(0)"><!> <!></a>`),Em=U(`<div><div class="cl-anchor"></div> <div class="cl-props"><div class="cl-propcontent"><!> <!></div> <!></div> <div class="cl-samples"><!></div></div>`);function Dm(e,t){O(t,!0);let n=X(t,`cluster`,7),r=X(t,`expanded`,7,!1),i=X(t,`editing`,15,!1),a=X(t,`editable`,3,!1),o=X(t,`dti_transformed`,15,!1),s=X(t,`thumbnail`,3,!1),c=X(t,`selected`,3,!1),l=M(!1),u=M(void 0),d=M(void 0),f=No(),p=ko(),m={grid:8,rows:18},h=j(()=>m[f.viewer_display]),g=M(P([]));function _(e){e.preventDefault();let t=H(d)?.value;t&&(n().name=t),N(l,!1)}function v(){f.ask_cluster(`cluster_merge`,n().id)}let y=()=>{setTimeout(()=>H(u)?.scrollIntoView({behavior:`smooth`,block:`center`}),100)};R(()=>{i()&&y()}),R(()=>{n().images.length,N(g,p.sortImages(n().images),!0)});var b=Em();let x;var S=F(b);Si(S,e=>N(u,e),()=>H(u));var C=L(S,2),w=F(C),ee=F(w),te=e=>{var t=pm(),r=I(t),i=F(r,!0);D(r);var a=L(r,2),o=F(a),s=e=>{var t=Sr();z(()=>K(t,`Cluster #${n().id??``}, ${n().images.length??``} images`)),G(e,t)};q(o,e=>{n().id>=0&&e(s)}),D(a),z(()=>K(i,n().name)),G(e,t)},ne=e=>{var t=xm(),r=F(t),o=F(r),s=e=>{var t=mm(),r=F(t);Kt(r,!0),Si(r,e=>N(d,e),()=>H(d));var i=L(r,2);i.__click=_;var a=F(i);yo(a,{icon:`mdi:check-bold`}),D(i),D(t),z(()=>r.defaultValue=n().name),mr(`submit`,t,_),G(e,t)},c=e=>{var t=_m(),r=I(t),a=F(r,!0);D(r);var o=L(r,2),s=e=>{var t=gm();t.__click=[hm,l];var n=F(t);yo(n,{icon:`mdi:edit`}),D(t),G(e,t)};q(o,e=>{i()&&e(s)}),z(()=>K(a,n().name)),G(e,t)};q(o,e=>{H(l)&&i()?e(s):e(c,!1)}),D(r);var u=L(r,2),f=F(u,!0);D(u);var p=L(u,2),m=e=>{var t=ym(),n=F(t),r=e=>{var t=vm(),n=I(t);Z(n,{icon:`mdi:merge`,label:`Merge cluster with...`,onclick:v});var r=L(n,2);Z(r,{icon:`mdi:check-bold`,label:`End edition`,onclick:()=>i(!1)}),G(e,t)},a=e=>{Z(e,{icon:`mdi:edit`,label:`Edit cluster`,onclick:()=>i(!0)})};q(n,e=>{i()?e(r):e(a,!1)}),D(t),G(e,t)},h=e=>{var t=bm(),r=F(t);{let e=j(()=>[n()]);Ro(r,{get clusters(){return H(e)}})}D(t),G(e,t)};q(p,e=>{a()?e(m):e(h,!1)}),D(t),z(()=>K(f,n().id>=0&&`Cluster #${n().id}, ${n().images.length} images`)),G(e,t)};q(ee,e=>{s()?e(te):e(ne,!1)});var re=L(ee,2),ie=e=>{var t=Cm(),r=F(t),i=F(r),a=e=>{Z(e,{icon:`mdi:image`,class:`is-outline`,label:`Show images`,onclick:()=>{o(!1)}})},s=e=>{Z(e,{icon:`mdi:panorama-variant`,class:`is-outline`,label:`Show protos`,onclick:()=>{o(!0)}})};q(i,e=>{o()?e(a):e(s,!1)}),D(r);var c=L(r,2),l=F(c),u=L(l,2),d=e=>{var t=Sm();z(()=>Y(t,`src`,(f.base_url||``)+n().mask_url)),G(e,t)};q(u,e=>{n().mask_url&&e(d)}),D(c),D(t),z(()=>Y(l,`src`,(f.base_url||``)+n().proto_url)),G(e,t)};q(re,e=>{!s()&&n().proto_url&&e(ie)}),D(w);var ae=L(w,2),oe=e=>{var t=Tm();t.__click=[wm,i];var n=F(t);Z(n,{icon:`mdi:edit`,label:`Edit cluster`});var r=L(n,2);Z(r,{icon:`mdi:merge`,label:`Merge with...`,onclick:e=>{e.stopPropagation(),v()}}),D(t),G(e,t)};q(ae,e=>{a()&&!i()&&e(oe)}),D(C);var se=L(C,2),ce=F(se);{let e=j(()=>r()&&!i()?void 0:H(h));fm(ce,{get selectable(){return i()},get images(){return H(g)},get dti_transformed(){return o()},get limit(){return H(e)},onexpand:()=>y(),get disable_all(){return s()},get expanded(){return r()},set expanded(e){r(e)}})}D(se),D(b),z(e=>x=Qr(b,1,`cl-cluster box`,null,x,e),[()=>({"cl-expanded":r()||i(),"cl-selected":c()||i()})]),G(e,b),k()}hr([`click`]);var Om=(e,t,n)=>N(t,H(n),!0),km=U(`<div class="cl-ask-cluster"><a href="javascript:void(0)"><!></a></div>`),Am=U(`<div class="modal-card-head"><!> <!></div> <div class="modal-card-body"><div class="cl-ask-cluster"><!></div> <div class="cl-ask-select"><div class="cl-ask-list"></div></div></div> <div class="modal-card-foot cl-modale-actions"><p><!> <!></p></div>`,1),jm=U(`<div><!> <!></div>`);function Mm(e,t){O(t,!0);let n=M(null),r=M(!0),i=No(),a=j(()=>i.content.clusters[t.exclude_cluster_id]),o=j(()=>t.for_action==`cluster_merge`?{action_icon:`mdi:merge`,action_label:`Merge whole clusters`,action_title:`Select target cluster to merge with:`,action_cluster:{...H(a),name:`Selected cluster: `+H(a)?.name}}:{action_icon:`mdi:folder-move`,action_label:`Move selected images to...`,action_title:`Select target cluster to move images:`,action_cluster:{id:-1,name:`Selected images`,images:i.content.clusters[t.exclude_cluster_id]?.images.filter(e=>i.image_selection.has(e.id))??[]}}),s=j(()=>H(o).action_icon),c=j(()=>H(o).action_label),l=j(()=>H(o).action_title),u=j(()=>H(o).action_cluster),d=j(()=>[...t.clusters.filter(e=>e.id!=t.exclude_cluster_id),...t.for_action==`selection_move`?[{id:-1,name:`New cluster`,images:[]}]:[]]);function f(){i.ask_cluster_choice(H(n).id)}function p(){return i.askingCluster!==null}function m(e){i.askingCluster=e?i.askingCluster:null}var h=W(),g=I(h),_=p,v=m;Vr(g,()=>qf,(e,t)=>{t(e,{get open(){return _()},set open(e){v(e)},children:(e,t)=>{var a=W(),o=I(a);Vr(o,()=>Gc,(e,t)=>{t(e,{children:(e,t)=>{var a=jm();let o;var m=F(a);Vr(m,()=>su,(e,t)=>{t(e,{class:`modal-background`})});var h=L(m,2);Vr(h,()=>Qf,(e,t)=>{t(e,{class:`modal-card cl-ask-modal`,children:(e,t)=>{var a=Am(),o=I(a),p=F(o);Vr(p,()=>Lc,(e,t)=>{t(e,{class:`modal-card-title`,children:(e,t)=>{Se();var n=Sr();z(()=>K(n,H(l))),G(e,n)},$$slots:{default:!0}})});var m=L(p,2);Vr(m,()=>Yf,(e,t)=>{t(e,{class:`modal-card-close`,children:(e,t)=>{yo(e,{icon:`mdi:close`,onclick:()=>N(r,!1)})},$$slots:{default:!0}})}),D(o);var h=L(o,2),g=F(h),_=F(g),v=e=>{Dm(e,{thumbnail:!0,get cluster(){return H(u)},selected:!0})};q(_,e=>{H(u).id!==void 0&&e(v)}),D(g);var y=L(g,2),b=F(y);Pr(b,21,()=>H(d),e=>e.id,(e,t,r,i)=>{var a=km(),o=F(a);o.__click=[Om,n,t];var s=F(o);{let e=j(()=>H(n)?.id==H(t).id);Dm(s,{thumbnail:!0,get cluster(){return H(t)},get selected(){return H(e)}})}D(o),D(a),G(e,a)}),D(b),D(y),D(h);var x=L(h,2),S=F(x),C=F(S);Z(C,{onclick:()=>{i.askingCluster=null},icon:`mdi:close`,label:`Cancel`,class:`is-outline`});var w=L(C,2);{let e=j(()=>H(n)===null);Z(w,{onclick:f,get icon(){return H(s)},get label(){return H(c)},get disabled(){return H(e)}})}D(S),D(x),G(e,a)},$$slots:{default:!0}})}),D(a),z(e=>o=Qr(a,1,`modal`,null,o,e),[()=>({"is-active":p()})]),G(e,a)},$$slots:{default:!0}})}),G(e,a)},$$slots:{default:!0}})}),G(e,h),k()}hr([`click`]);var Nm=U(`<!> <!>`,1),Pm=U(`<div class="toolbar-item toolbar-btn"><label class="label">Actions on selection:</label> <!></div>`),Fm=U(`<div class="toolbar-item cl-select-tools"><label class="label"> </label> <div class="field"><!></div></div> <!>`,1),Im=U(`<div class="toolbar-content cl-editor-tools"><!> <div class="toolbar-item toolbar-btn"><!></div> <div class="toolbar-item toolbar-btn"><!></div></div>`),Lm=U(`<div><div class="toolbar cl-editor-toolbar"><div class="toolbar-content"><h2> </h2> <div class="toolbar-item"><label class="label">Sort by:</label> <div class="field is-narrow"><div class="select"><select><option>Size</option><option>ID</option><option>Name</option></select></div></div></div> <div class="toolbar-item"><label class="label">Display:</label> <div class="field is-narrow"><div class="select"><select><option>Grid</option><option>Rows</option></select></div></div></div> <!></div></div> <div><!> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div></div> <!></div> <!>`,1);function Rm(e,t){O(t,!0);let n=X(t,`formfield`,7),r=P(new Mo(t.clustering_data,t.base_url));Po(r);let i=P({});Lp()||Rp(i);let a=j(()=>({size:(e,t)=>t.images.length-e.images.length,id:(e,t)=>e.id-t.id,name:(e,t)=>e.name.localeCompare(t.name)})[r.viewer_sort]),o=j(()=>Object.values(r.content.clusters).sort(H(a)));function s(){n()&&(n().value=JSON.stringify(r.content),n().form?.submit()),r.editing=!1}var c=Lm(),l=I(c);let u;var d=F(l),f=F(d),p=F(f),m=F(p);D(p);var h=L(p,2),g=L(F(h),2),_=F(g),v=F(_),y=F(v);y.value=y.__value=`size`;var b=L(y);b.value=b.__value=`id`;var x=L(b);x.value=x.__value=`name`,D(v),D(_),D(g),D(h);var S=L(h,2),C=L(F(S),2),w=F(C),ee=F(w),te=F(ee);te.value=te.__value=`grid`;var ne=L(te);ne.value=ne.__value=`rows`,D(ee),D(w),D(C),D(S);var re=L(S,2),ie=e=>{var t=Im(),i=F(t),a=e=>{var t=Fm(),n=I(t),i=F(n),a=F(i);D(i);var o=L(i,2),s=F(o),c=e=>{Z(e,{onclick:()=>{r.select_images(`all`)},icon:`mdi:select-all`,label:`All`})},l=e=>{var t=Nm(),n=I(t);Z(n,{onclick:()=>{r.select_images(`none`)},icon:`mdi:close`,label:`Clear`});var i=L(n,2);Z(i,{onclick:()=>{r.select_images(`invert`)},icon:`mdi:select-inverse`,label:`Invert`}),G(e,t)};q(s,e=>{r.image_selection.size==0?e(c):e(l,!1)}),D(o),D(n);var u=L(n,2),d=e=>{var t=Pm(),n=L(F(t),2);Z(n,{onclick:()=>{r.ask_cluster(`selection_move`,r.editingCluster)},icon:`mdi:folder-move`,label:`Move to cluster...`}),D(t),G(e,t)};q(u,e=>{r.image_selection.size>0&&e(d)}),z(()=>K(a,`Selection (${r.image_selection.size??``}):`)),G(e,t)};q(i,e=>{r.editingCluster!==null&&e(a)});var c=L(i,2),l=F(c),u=e=>{{let t=j(()=>n()?`Save`:`Apply`);Z(e,{onclick:s,icon:`mdi:content-save`,class:`big is-link`,get label(){return H(t)}})}},d=e=>{Z(e,{onclick:()=>{r.editing=!0},class:`big is-link`,icon:`mdi:edit`,label:`Edit`})};q(l,e=>{r.editing?e(u):e(d,!1)}),D(c);var f=L(c,2),p=F(f);Ro(p,{get clusters(){return H(o)}}),D(f),D(t),G(e,t)};q(re,e=>{t.editable&&e(ie)}),D(f),D(d);var ae=L(d,2),oe=F(ae);Pr(oe,17,()=>H(o),e=>e.id,(e,t)=>{var n=()=>r.editingCluster==H(t).id,i=e=>r.editingCluster=e?H(t).id:null;Dm(e,{get editing(){return n()},set editing(e){i(e)},get cluster(){return H(t)},get editable(){return r.editing}})}),Se(10),D(ae);var se=L(ae,2),ce=e=>{Mm(e,Oi(()=>r.askingCluster,{get clusters(){return H(o)}}))};q(se,e=>{r.askingCluster!==null&&e(ce)}),D(l);var le=L(l,2);Kp(le,{}),z(e=>{u=Qr(l,1,``,null,u,e),K(m,`Cluster ${r.editing?`Editor`:`Viewer`}`),Qr(ae,1,`cl-cluster-list cl-display-`+r.viewer_display)},[()=>({"cl-editor":r.editing})]),ri(v,()=>r.viewer_sort,e=>r.viewer_sort=e),ri(ee,()=>r.viewer_display,e=>r.viewer_display=e),G(e,c),k()}function zm(e){return{...e,id:e.path,num:e.id,url:e.raw_url}}function Bm(e){return{clusters:Object.fromEntries(Object.entries(e.clusters).map(([e,t])=>[parseInt(e),{...t,images:t.images.map(zm)}])),background_urls:e.background_urls}}var Vm=U(`<div><span class="label"> </span> <progress class="progress is-link bar"></progress></div>`),Hm=U(`<div class="tck-bar-list"></div>`),Um=U(`<span> </span> <!> <pre> </pre>`,1),Wm=U(`<div class="tck-progress"><!></div>`);function Gm(e,t){O(t,!0);let n=M(null),r=j(()=>H(n)?.log?.errors?.join(`
`)),i;function a(){fetch(t.tracking_url).then(e=>e.json()).then(e=>{N(n,e,!0),H(n).is_finished?window.location.reload():i=setTimeout(a,1e3)}).catch(e=>{e=e.toString(),i=setTimeout(a,1e3)})}R(()=>(a(),()=>clearTimeout(i)));var o=Wm(),s=F(o),c=e=>{var t=Sr();z(()=>K(t,H(r))),G(e,t)},l=e=>{var t=W(),r=I(t),i=e=>{var t=Sr(`Done!`);G(e,t)},a=e=>{var t=W(),r=I(t),i=e=>{var t=Sr(`Loading...`);G(e,t)},a=e=>{var t=Um(),r=I(t),i=F(r,!0);D(r);var a=L(r,2),o=e=>{var t=Hm();Pr(t,21,()=>H(n).log.progress,Mr,(e,t)=>{var n=Vm(),r=F(n),i=F(r);D(r);var a=L(r,2);D(n),z(()=>{K(i,`${H(t).context??``} ${H(t).current??``}/${H(t).total??``}`),ui(a,H(t).current),Y(a,`max`,H(t).total)}),G(e,n)}),D(t),G(e,t)};q(a,e=>{H(n).log?.progress&&e(o)});var s=L(a,2),c=F(s,!0);D(s),z(e=>{Qr(r,1,`mb-3 tag status status-${H(n).status??``}`),K(i,H(n).status),K(c,e)},[()=>H(n).status==`PENDING`?`Waiting for worker...`:H(n).log?.infos?.join(`
`)]),G(e,t)};q(r,e=>{H(n)===null?e(i):e(a,!1)},!0),G(e,t)};q(r,e=>{H(n)?.is_finished?e(i):e(a,!1)},!0),G(e,t)};q(s,e=>{H(r)?e(c):e(l,!1)}),D(o),G(e,o),k()}function Km(e){let t=Object.fromEntries(Object.entries(e.sources).map(([e,t])=>[e,{name:t.metadata?.name||t.uid,...t}])),n=e.images.map((e,n)=>({id:e.id,num:n,src:e.src,url:e.url,document:t[e.doc_uid],metadata:e.metadata||{}}));return{sources:Object.values(t),images:n,transpositions:e.transpositions||[`none`]}}function qm(e,t){let n=Km(t),r=n.images.map(()=>[]);return e.forEach(([e,t,n])=>{r[t].push({similarity:n,best_source_flip:0,best_query_flip:0,query_index:t,source_index:e}),r[e].push({similarity:n,best_source_flip:0,best_query_flip:0,query_index:e,source_index:t})}),{matches:Jm(r,n,n),index:n}}function Jm(e,t,n){let r=[];for(let i=0;i<e.length;i++){let a=n.images[i],o=e[i].map(e=>({image:t.images[e.source_index],similarity:e.similarity,q_transposition:n.transpositions[e.best_query_flip],m_transposition:t.transpositions[e.best_source_flip]})).sort((e,t)=>t.similarity-e.similarity),s={},c=[];o.forEach(e=>{if(!s[e.image.document.uid]){let t=[];s[e.image.document.uid]=t,c.push(t)}s[e.image.document.uid].push(e)}),r.push({query:a,matches:o,matches_by_document:c})}return r.sort((e,t)=>t.matches[0].similarity-e.matches[0].similarity)}function Ym(e,t){console.log(t,e);let n=Km(e),r=Km(t.query),i=r.images.map(()=>[]);t.pairs.forEach(([e,t,n])=>{i[t].push({similarity:n,best_source_flip:0,best_query_flip:0,query_index:t,source_index:e})});let a=Jm(i,n,r);return{source_index:n,query_index:r,matches:a}}function Xm(e,t,n){let r=new Map;for(let n of e.edges){if(n.weight<t)continue;let e=r.get(n.source)||r.get(n.target)||{id:n.source};for(;e?.merged;)e=e.merged;let i=r.get(n.target);for(;i?.merged;)i=i.merged;i&&e!==i&&(i.merged=e),r.set(n.source,e),r.set(n.target,e)}let i=new Map,a=[];for(let e=0;e<n;e++){let t=r.get(e);for(;t?.merged;)t=t.merged;if(!t){a.push(e);continue}i.has(t.id)||i.set(t.id,{id:i.size,members:[]}),i.get(t.id).members.push(e)}return a.length>0&&i.set(-1,{id:-1,members:a}),Array.from(i.values())}function Zm(e,t){let n=[],r=new Map;for(let[t,n]of e.images.entries())r.set(n.id,t);for(let e of t){let t=r.get(e.query.id);for(let i of e.matches){let e=r.get(i.image.id);n.push({source:t,target:e,weight:i.similarity})}}return{edges:n}}function Qm(e,t,n){let r=new Map;for(let e of n)r.set(e.id,e);let i=new Map;for(let[t,n]of r){let a=n.members.map(t=>{let n=e.images[t];return{...n,raw_url:n.url,path:n.url,name:n.name||``}}),o=t>=0?t+1:r.size+1;i.set(o,{id:o,name:t>=0?`Cluster ${t+1}`:`Unclustered`,images:a})}return{clusters:Object.fromEntries(i),background_urls:e.sources.map(e=>e.src)}}var $m=U(`<div class="cl-image card"><!></div>`),eh=U(`<p>â</p>`),th=U(`<div class="cl-cluster box"><div class="cl-anchor"></div> <div class="cl-props"><div class="cl-propcontent"><div class="cl-propinfo"><p class="cl-cluster-title"><span> </span></p></div></div></div> <div class="cl-samples"><div class="cl-images cl-limitheight"></div></div></div>`);function nh(e,t){O(t,!0);var n=th(),r=L(F(n),2),i=F(r),a=F(i),o=F(a),s=F(o),c=F(s);D(s),D(o),D(a),D(i),D(r);var l=L(r,2),u=F(l);Pr(u,20,()=>t.cluster.members,e=>e,(e,n)=>{var r=$m(),i=F(r);im(i,{get image(){return t.index.images[n]}}),D(r),G(e,r)},e=>{var t=eh();G(e,t)}),D(u),D(l),D(n),z(()=>K(c,`${t.cluster.id>=0?`Cluster ${t.cluster.id}`:`Unclustered`} (${t.cluster.members.length??``})`)),G(e,n),k()}var rh=U(`<div class="toolbar-item"><label class="label is-expanded" for="clustering-threshold">Clustering threshold:</label> <div class="field"><div class="control"><input type="range"/></div> <div class="control"><input type="number" class="input" id="clustering-threshold"/></div></div></div>`),ih=U(`<div class="toolbar"><div class="toolbar-content"><!> <!> <div class="toolbar-item toolbar-btn"><!></div></div></div>`),ah=U(`<div><!> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div> <div class="cl-cluster box cl-filler"></div></div>`),oh=U(`<!> <div><!></div> <div class="mt-4"></div>`,1);function sh(e,t){O(t,!0);let n=M(!1),r=j(()=>Math.min(...t.matches.map(e=>Math.min(...e.matches.map(e=>e.similarity))))),i=j(()=>Math.max(...t.matches.map(e=>Math.max(...e.matches.map(e=>e.similarity))))),a=M(H(r)+.8*(H(i)-H(r))),o=j(()=>Zm(t.index,t.matches)),s=M(P([]));R(()=>{H(a),Xn(()=>{N(s,Xm(H(o),H(a),t.index.images.length),!0)})});var c=oh(),l=I(c),u=e=>{var o=ih(),s=F(o),c=F(s),l=e=>{var n=W(),r=I(n);J(r,()=>t.extra_toolbar_items),G(e,n)};q(c,e=>{t.extra_toolbar_items&&e(l)});var u=L(c,2),d=e=>{var t=rh(),n=L(F(t),2),o=F(n),s=F(o);li(s),Y(s,`step`,.001),D(o);var c=L(o,2),l=F(c);li(l),D(c),D(n),D(t),z(()=>{Y(s,`min`,H(r)),Y(s,`max`,H(i))}),_i(s,()=>H(a),e=>N(a,e)),_i(l,()=>H(a),e=>N(a,e)),G(e,t)};q(u,e=>{H(n)||e(d)});var f=L(u,2),p=F(f),m=e=>{Z(e,{icon:`mdi:autorenew`,onclick:()=>N(n,!1),label:`Redo automatic clustering`})},h=e=>{Z(e,{class:`is-link`,icon:`mdi:check-bold`,onclick:()=>N(n,!0),label:`Apply clustering`})};q(p,e=>{H(n)?e(m):e(h,!1)}),D(f),D(s),D(o),G(e,o)};q(l,e=>{t.visible&&e(u)});var d=L(l,2);let f;var p=F(d),m=e=>{{let n=j(()=>Qm(t.index,t.matches,H(s)));Rm(e,{get clustering_data(){return H(n)},editable:!0})}},h=e=>{var n=ah();Qr(n,1,`cl-cluster-list cl-display-grid`);var r=F(n);Pr(r,17,()=>H(s),e=>e.id,(e,n)=>{nh(e,{get cluster(){return H(n)},get index(){return t.index}})}),Se(10),D(n),G(e,n)};q(p,e=>{H(n)?e(m):e(h,!1)}),D(d),Se(2),z(e=>f=Qr(d,1,`cluster-viewer`,null,f,e),[()=>({"viewer-table":!H(n),hidden:!t.visible})]),G(e,c),k()}var ch=U(`<div>...</div>`),lh=U(`<!> <!>`,1),uh=U(`<!> <!> <!>`,1);function dh(e,t){O(t,!0);let n=X(t,`page`,15);var r=W(),i=I(r);{let e=(e,t)=>{let n=()=>t?.().pages;var r=uh(),i=I(r);Vr(i,()=>lp,(e,t)=>{t(e,{class:`pagination-ctrl button`,children:(e,t)=>{yo(e,{icon:`mdi:chevron-left`})},$$slots:{default:!0}})});var a=L(i,2);Pr(a,17,n,e=>e.key,(e,t,n,r)=>{var i=lh(),a=I(i),o=e=>{var n=W(),r=I(n);Vr(r,()=>pp,(e,n)=>{n(e,{get page(){return H(t)},class:`pagination-ctrl button`})}),G(e,n)};q(a,e=>{H(t).type===`page`&&e(o)});var s=L(a,2),c=e=>{var t=ch();G(e,t)};q(s,e=>{H(t).type===`ellipsis`&&e(c)}),G(e,i)});var o=L(a,2);Vr(o,()=>dp,(e,t)=>{t(e,{class:`pagination-ctrl button`,children:(e,t)=>{yo(e,{icon:`mdi:chevron-right`})},$$slots:{default:!0}})}),G(e,r)};Vr(i,()=>sp,(r,i)=>{i(r,{get count(){return t.total_pages},class:`pagination`,get page(){return n()},set page(e){n(e)},children:e,$$slots:{default:!0}})})}G(e,r),k()}function fh(e,t){O(t,!0);let n=ko();async function*r(){let e=new Set,r=t.matches.matches.filter(e=>!t.threshold||e.similarity>=t.threshold);r.unshift({image:t.matches.query,similarity:1,q_transposition:`none`,m_transposition:`none`}),r.forEach(t=>{Object.keys(t.image.document?.metadata||{}).forEach(t=>e.add(t)),Object.keys(t.image.metadata||{}).forEach(t=>e.add(t))}),yield[`Image`,`Source`,`Similarity`,`Document`,`Document URL`,...Array.from(e).map(e=>(e.charAt(0).toUpperCase()+e.slice(1)).replace(/[^\w\s]/g,` `))];for(let t of r){let r=Array.from(e).map(e=>(t.image.metadata||t.image.document?.metadata||{})[e]||``);yield[n.getImageName(t.image),t.image.src||t.image.id,t.similarity,n.getSourceName(t.image.document),t.image.document?.src||``,...r]}}Lo(e,{iterRows:r,filename:`similarity-matches.csv`}),k()}var ph=U(`<!> `,1),mh=U(`<div class="match-group"><div><p><!></p> <div class="columns is-multiline match-items"></div> <!></div></div>`);function hh(e,t){O(t,!0);let n=M(!1);var r=W(),i=I(r),a=e=>{var r=mh(),i=F(r),a=F(i),o=F(a),s=e=>{var n=ph(),r=I(n);yo(r,{icon:`mdi:folder`});var i=L(r);z(()=>K(i,` ${(t.matches[0].image.document?.name||t.matches[0].image.document?.uid)??``}`)),G(e,n)},c=e=>{Ip(e,{get image(){return t.matches[0].image}})};q(o,e=>{t.grouped?e(s):e(c,!1)}),D(a);var l=L(a,2);Pr(l,23,()=>t.matches,e=>e.image.id,(e,r,i)=>{var a=W(),o=I(a),s=e=>{{let n=j(()=>bh(H(r).image));im(e,Oi({get comparison(){return t.wref},get href(){return H(n)}},()=>H(r),{disable_pin:!0}))}};q(o,e=>{(H(n)||H(i)==0)&&(!t.threshold||H(r).similarity>=t.threshold)&&e(s)}),G(e,a)}),D(l);var u=L(l,2),d=e=>{{let r=j(()=>H(n)?`mdi:close`:`mdi:animation-plus`),i=j(()=>H(n)?`Collapse`:`+${t.matches.length-1}`);Z(e,{get icon(){return H(r)},onclick:()=>N(n,!H(n)),get label(){return H(i)}})}};q(u,e=>{t.matches.length>1&&e(d)}),D(i),D(r),z(()=>Qr(i,1,Kr(H(n)?`match-expanded`:`match-excerpt`))),G(e,r)};q(i,e=>{(!t.threshold||t.matches[0].similarity>=t.threshold)&&e(a)}),G(e,r),k()}var gh=(e,t)=>N(t,!H(t)),_h=U(`<p><a href="javascript:void(0)"> </a></p>`),vh=U(`<div><div class="column match-query"><!> <div class="columns is-multiline match-items is-centered"><!></div> <!> <!></div> <div class="column columns match-results"></div></div>`);function yh(e,t){O(t,!0);let n=j(()=>t.group_by_source?t.matches.matches_by_document:t.matches.matches.map(e=>[e])),r=M(!1),i=M(null);function a(){H(i)&&H(i).scrollIntoView({behavior:`smooth`,block:`center`})}R(()=>{t.highlit&&Xn(a)});var o=vh();let s;var c=F(o),l=F(c);Ip(l,{get image(){return t.matches.query}});var u=L(l,2),d=F(u);im(d,{get image(){return t.matches.query},disable_pin:!0}),D(u);var f=L(u,2),p=e=>{var t=_h(),n=F(t);n.__click=[gh,r];var i=F(n,!0);D(n),D(t),z(()=>K(i,H(r)?`Show only 5 best`:`Show all results`)),G(e,t)};q(f,e=>{H(n).length>5&&e(p)});var m=L(f,2);fh(m,{get matches(){return t.matches},get threshold(){return t.threshold}}),D(c);var h=L(c,2);Pr(h,21,()=>H(n).slice(0,H(r)?H(n).length:5),Mr,(e,n)=>{hh(e,{get matches(){return H(n)},get grouped(){return t.group_by_source},get threshold(){return t.threshold},get wref(){return t.matches.query}})}),D(h),D(o),Si(o,e=>N(i,e),()=>H(i)),z(e=>s=Qr(o,1,`match-row columns`,null,s,e),[()=>({highlit:t.highlit})]),G(e,o),k()}hr([`click`]);function bh(e){return`#match-${e.id}`}var xh=U(`<option> </option>`),Sh=U(`<div class="toolbar-item"><label class="checkbox is-normal"><input type="checkbox" class="checkbox mr-2" name="group-by-source" id="group-by-source"/> Group by source document</label></div> <div class="toolbar-item"><label class="label">Filter by document:</label> <div class="field is-narrow"><div class="select is-fullwidth"><select><option>All</option><!></select></div></div></div>`,1),Ch=U(`<div class="toolbar"><div class="toolbar-content"><!> <div class="toolbar-item"><label class="label is-expanded">Similarity threshold:</label> <div class="field"><input type="range"/> <span class="m-3"> </span></div></div> <!></div> <!></div> <div class="viewer-table"></div> <div class="mt-4"></div> <!>`,1);function wh(e,t){O(t,!0);let n=M(!1),r=M(null),i=j(()=>H(r)?t.matches.filter(e=>e.query.document===H(r)):t.matches),a=M(1),o=j(()=>Math.ceil(t.matches.length/30)),s=j(()=>Math.min(...t.matches.map(e=>Math.min(...e.matches.map(e=>e.similarity))))),c=j(()=>Math.max(...t.matches.map(e=>Math.max(...e.matches.map(e=>e.similarity))))),l=M(H(s)+.5*(H(c)-H(s))),u=M(null);function d(){let e=window.location.hash;if(e.startsWith(`#match-`)){let n=e.slice(7);N(u,n,!0);let r=t.matches.findIndex(e=>e.query.id===n);r!==-1&&N(a,Math.floor(r/30)+1);return}N(u,null),e.startsWith(`#page-`)&&N(a,parseInt(e.slice(6)),!0)}R(()=>(window.addEventListener(`hashchange`,d),d(),()=>{window.removeEventListener(`hashchange`,d)}));var f=Ch(),p=I(f),m=F(p),h=F(m),g=e=>{var n=W(),r=I(n);J(r,()=>t.extra_toolbar_items),G(e,n)};q(h,e=>{t.extra_toolbar_items&&e(g)});var _=L(h,2),v=L(F(_),2),y=F(v);li(y),Y(y,`step`,.01);var b=L(y,2),x=F(b,!0);D(b),D(v),D(_);var S=L(_,2),C=e=>{var i=Sh(),a=I(i),o=F(a),s=F(o);li(s),Se(),D(o),D(a);var c=L(a,2),l=L(F(c),2),u=F(l),d=F(u),f=F(d);f.value=f.__value=``;var p=L(f);Pr(p,17,()=>t.index.sources,e=>e.uid,(e,t)=>{var n=xh(),r=F(n,!0);D(n);var i={};z(()=>{K(r,H(t).name||H(t).uid),i!==(i=H(t).uid)&&(n.value=(n.__value=H(t).uid)??``)}),G(e,n)}),D(d),D(u),D(l),D(c),vi(s,()=>H(n),e=>N(n,e)),ri(d,()=>H(r)?.uid||``,e=>N(r,t.index.sources.find(t=>t.uid===e)||null,!0)),G(e,i)};q(S,e=>{t.index.sources.length>1&&e(C)}),D(m);var w=L(m,2);dh(w,{get total_pages(){return H(o)},get page(){return H(a)},set page(e){N(a,e,!0)}}),D(p);var ee=L(p,2);Pr(ee,21,()=>H(i).slice((H(a)-1)*30,H(a)*30),e=>e.query.id,(e,t,r,i)=>{{let r=j(()=>H(u)==H(t).query.id);yh(e,{get matches(){return H(t)},get group_by_source(){return H(n)},get highlit(){return H(r)},get threshold(){return H(l)}})}}),D(ee);var te=L(ee,4);dh(te,{get total_pages(){return H(o)},get page(){return H(a)},set page(e){N(a,e,!0)}}),z(e=>{Y(y,`min`,H(s)),Y(y,`max`,H(c)),K(x,e)},[()=>H(l).toPrecision(4)]),_i(y,()=>H(l),e=>N(l,e)),G(e,f),k()}var Th=U(`<p>Loading...</p>`),Eh=U(`<div class="toolbar-item toolbar-btn"><!></div>`),Dh=U(`<div class="toolbar-item toolbar-btn"><!></div>`),Oh=U(`<!> <!>`,1),kh=U(`<!> <!>`,1);function Ah(e,t){O(t,!0);let n=X(t,`mode`,7),r=M(P({sources:[],images:[],transpositions:[]})),i=M(P([])),a=M(!0),o=P({});Rp(o);let s=new Do;Ao(s),R(()=>{Promise.all([fetch(t.source_index_url).then(e=>e.json()),fetch(t.sim_matrix_url).then(e=>e.json())]).then(([e,t])=>{let n=qm(t,e);(e=>{var t=C(e,2);N(r,t[0],!0),N(i,t[1],!0)})([n.index,n.matches]),s.fetchIIIFNames(H(r).sources),N(a,!1)})});var c=kh(),l=I(c),u=e=>{var t=Th();G(e,t)},d=e=>{var t=Oh(),a=I(t);{let e=e=>{var t=Eh(),r=F(t);Z(r,{icon:`mdi:folder`,onclick:()=>n(`browse`),label:`Switch to Browse Mode`}),D(t),G(e,t)},t=j(()=>n()==`cluster`);sh(a,{get index(){return H(r)},get matches(){return H(i)},get visible(){return H(t)},extra_toolbar_items:e,$$slots:{extra_toolbar_items:!0}})}var o=L(a,2),s=e=>{wh(e,{get index(){return H(r)},get matches(){return H(i)},extra_toolbar_items:e=>{var t=Dh(),r=F(t);Z(r,{icon:`mdi:graph`,onclick:()=>n(`cluster`),label:`Cluster the results`}),D(t),G(e,t)},$$slots:{extra_toolbar_items:!0}})};q(o,e=>{n()==`browse`&&e(s)}),G(e,t)};q(l,e=>{H(a)?e(u):e(d,!1)});var f=L(l,2);Kp(f,Oi(()=>o)),G(e,c),k()}var jh=U(`<div class="image-generic-outer-wrapper svelte-1xln4oe"><div class="image-generic-inner-wrapper"><div class="image-generic-title"><!></div> <div class="image-generic-content mb-1"><!></div></div></div>`);function Mh(e,t){O(t,!0);let n=M(!1);R(()=>{N(n,!0)});var r=jh();let i;var a=F(r),o=F(a),s=F(o);Ip(s,{get image(){return t.image},filenameDisplay:!1}),D(o);var c=L(o,2),l=F(c);im(l,{get image(){return t.image}}),D(c),D(a),D(r),z(e=>i=ei(r,``,i,e),[()=>({opacity:H(n)?1:0})]),G(e,r),k()}var Nh=U(`<li class="column is-one-fourth is-flex"><!></li>`),Ph=U(`<ul class="columns is-mobile is-multiline list-invisible"></ul>`);function Fh(e,t){var n=Ph();Pr(n,21,()=>t.image_array,e=>e.id,(e,t)=>{var n=Nh(),r=F(n);Mh(r,{get image(){return H(t)}}),D(n),G(e,n)}),D(n),G(e,n)}function Ih(e,t){return{id:e.id,num:t,url:e.url,src:e.src}}function Lh(e){let t=e=>e.split(`/`).slice(0,-1).join(`/`),n=Object.values(e)[0];return[...new Set(Object.entries(n).map(([e,n])=>t(n.url)))].map(e=>({name:e,images:Object.entries(n).filter(([n,r])=>t(r.url)===e).map(([e,t],n)=>Ih(t,n))}))}function Rh(e){return Object.entries(e).map(([e,t])=>({name:e,images:Object.entries(t).map(([e,t],n)=>Ih(t,n))}))}function zh(e,t){return{datasetFormat:t,datasetHierarchy:t===`iiif`?`document`:`folder`,datasetContents:t===`iiif`?Rh(e):Lh(e)}}var Bh=U(`<div class="dci-wrapper"><div class="dci-title is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><h3 class="id-suffix m-0"> </h3> <!></div> <!></div>`);function Vh(e,t){O(t,!0);let n=M(4),r=()=>N(n,H(n)===4?t.datasetContentsItem.images.length:4,!0);function i(e){return e.split(`/`).slice(5).join(`/`)+`/`}var a=Bh(),o=F(a),s=F(o),c=F(s);D(s);var l=L(s,2),u=e=>{{let t=j(()=>H(n)===4?`mdi:plus`:`mdi:minus`),i=j(()=>H(n)===4?`See more items`:`See less items`);Z(e,{get icon(){return H(t)},get label(){return H(i)},onclick:()=>r()})}};q(l,e=>{t.datasetContentsItem.images.length>4&&e(u)}),D(o);var d=L(o,2);{let e=j(()=>t.datasetContentsItem.images.slice(0,H(n)));Fh(d,{get image_array(){return H(e)}})}D(a),z(e=>K(c,`Images in ${e??``}`),[()=>t.datasetFormat===`iiif`?`document #${t.itemIndex+1}`:`folder ${i(t.datasetContentsItem.name)}`]),G(e,a),k()}var Hh=U(`<div></div> <!>`,1);function Uh(e,t){O(t,!0);let n=zh(t.dataset,t.datasetFormat),r=P({});Rp(r);var i=Hh(),a=I(i);Pr(a,21,()=>n.datasetContents,Mr,(e,n,r)=>{Vh(e,{get datasetContentsItem(){return H(n)},get datasetFormat(){return t.datasetFormat},itemIndex:r})}),D(a);var o=L(a,2);Kp(o,{}),G(e,i),k()}var Wh=U(`<p>Loading...</p>`),Gh=U(`<!> <!>`,1);function Kh(e,t){O(t,!0);let n=M(P({sources:[],images:[],transpositions:[]})),r=M(P({sources:[],images:[],transpositions:[]})),i=M(P([])),a=M(!0),o=P({});Rp(o);let s=new Do;Ao(s),R(()=>{Promise.all([fetch(t.source_index_url).then(e=>e.json()),fetch(t.query_result_url).then(e=>e.json())]).then(([e,t])=>{console.log(e,t);let o=Ym(e,t);(e=>{var t=C(e,3);N(n,t[0],!0),N(r,t[1],!0),N(i,t[2],!0)})([o.source_index,o.query_index,o.matches]),s.fetchIIIFNames(H(n).sources),N(a,!1)})});var c=Gh(),l=I(c),u=e=>{var t=Wh();G(e,t)},d=e=>{wh(e,{get index(){return H(n)},get matches(){return H(i)}})};q(l,e=>{H(a)?e(u):e(d,!1)});var f=L(l,2);Kp(f,Oi(()=>o)),G(e,c),k()}function qh(e,t,n,r,i,a){wr(Rm,{target:e,props:{clustering_data:Bm(t),base_url:n,editable:r,editing:i,formfield:a}})}function Jh(e,t){wr(Gm,{target:e,props:{tracking_url:t}})}function Yh(e,t,n,r){wr(Ah,{target:e,props:{source_index_url:t,sim_matrix_url:n,mode:r}})}function Xh(e,t,n){wr(Kh,{target:e,props:{source_index_url:t,query_result_url:n}})}function Zh(e,t){wr(Fh,{target:e,props:{image_array:t}})}function Qh(e,t,n){wr(Uh,{target:e,props:{dataset:t,datasetFormat:n}})}window.DemoTools={initClusterViewer:qh,initProgressTracker:Jh,initSimilarityApp:Yh,initImageGenericList:Zh,initDatasetImageBrowser:Qh,initSearchResults:Xh}});